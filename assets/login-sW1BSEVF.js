import{b as x,a as k,i as w,o as S,d as F,e as t,w as n,a1 as y,f as e,a5 as m,Z as o,a3 as s,k as B,c as U}from"./index-BOojvlEk.js";import{c as C,a as p,u as M,f as g,V as N}from"./vee-validate.esm-DChpKwGX.js";import{v as q}from"./index-DOp_HvVW.js";import{V as D}from"./VDivider-rfRemWBP.js";import{V as P}from"./VContainer-DWb0HMS9.js";const T={id:"logo-in",class:"logo-in"},$=o("div",{class:"title"},[o("h2",null,"登入"),o("h6",null,"與狗狗歡度快樂時刻")],-1),A={class:"notice"},E=o("br",null,null,-1),I={__name:"login",setup(R){const v=x(),_=k(),c=w(),V=C({account:p().required("使用者帳號必填").min(4,"使用者帳號文字最少 4 個字").max(20,"使用者帳號文字最多 20 個字").test("驗證 account","使用者帳號格式錯誤",r=>q.isAlphanumeric(r)),password:p().required("密碼必填").min(4,"使用者密碼最少 4 個字").max(20,"使用者密碼最多 20 個字")}),{handleSubmit:f,isSubmitting:d}=M({validationSchema:V}),l=g("account"),i=g("password"),b=f(async r=>{const a=await _.login(r);if(a==="登入成功")return c({text:a,snackbarProps:{color:"green"}}),v.push("/");c({text:a,snackbarProps:{color:"red"}})});return(r,a)=>{const h=U("router-link");return S(),F("section",T,[t(P,null,{default:n(()=>[$,t(D),t(N,{onSubmit:y(e(b),["prevent"]),disabled:e(d)},{default:n(()=>[t(m,{type:"account",label:"帳號",minlength:"4",maxlength:"20",counter:"",variant:"underlined",modelValue:e(l).value.value,"onUpdate:modelValue":a[0]||(a[0]=u=>e(l).value.value=u),"error-messages":e(l).errorMessage.value},null,8,["modelValue","error-messages"]),t(m,{type:"password",label:"密碼",minlength:"4",maxlength:"20",counter:"",variant:"underlined",modelValue:e(i).value.value,"onUpdate:modelValue":a[1]||(a[1]=u=>e(i).value.value=u),"error-messages":e(i).errorMessage.value},null,8,["modelValue","error-messages"]),o("div",A,[o("p",null,[s(" 尚未加入會員？ "),E,s(" 點擊 "),t(h,{to:{path:"/register"}},{default:n(()=>[s("註冊")]),_:1}),s(" 會員 ")])]),t(B,{type:"submit",loading:e(d)},{default:n(()=>[s("登入")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1})])}}};export{I as default};
