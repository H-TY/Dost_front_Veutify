import{i as x,a as B,r as c,o as d,j as p,w as t,e as a,k as N,a2 as u,a5 as T,ab as C,d as S,g as w,F as A,aa as D,a8 as I,a3 as L,aQ as U}from"./index-BPP8pLfR.js";import{b as k}from"./route-block-B_A1xBdJ.js";import{V as f}from"./VCol-BA1E6pxV.js";import{a as y,V as F}from"./VRow-D4Fe77u5.js";import{r as j}from"./VDataTable-CXUlvGI4.js";import{a as O,V as P}from"./VList-CeVs699b.js";import"./VPagination-CUxqGpeY.js";import"./VCheckboxBtn-BXLo0nHL.js";import"./VDivider-DgVUsZ6h.js";const E=I("h1",null,"預約狗狗查詢",-1),Q={__name:"dogBookingSearch",setup(R){const{apiAuth:V}=U(),_=x(),b=B(),h=c(b.account),o=c(""),n=c([]),m=[{key:"bookingOrderNumber",order:"desc"}],v=[{align:"center",title:"訂單編號",key:"bookingOrderNumber"},{align:"center",title:"下單日期",key:"createdAt",value:l=>new Date(l.createdAt).toLocaleString()},{align:"center",title:"帳號名稱",key:"accountName"},{align:"center",title:"預約人",key:"name"},{align:"center",title:"電話",key:"phone"},{align:"center",title:"預約狗狗",key:"dogName"},{align:"center",title:"預約日期",key:"bookingDate"},{align:"center",title:"預約時段",key:"bookingTime"},{align:"center",title:"預約總時數",key:"totalBookingTime"},{align:"center",title:"預約總金額",key:"totalPrice"}],g=async()=>{var l,r;try{const{data:e}=await V.get("/order",{params:{search:h.value}});n.value.splice(0,n.value.length,...e.result.data)}catch(e){console.log(e),_({text:((r=(l=e==null?void 0:e.response)==null?void 0:l.data)==null?void 0:r.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return g(),(l,r)=>(d(),p(F,{class:"my-5",fluid:""},{default:t(()=>[a(y,{class:"text-center"},{default:t(()=>[a(f,null,{default:t(()=>[E]),_:1})]),_:1}),a(y,{class:"text-center"},{default:t(()=>[a(f,null,{default:t(()=>[a(N,{color:"green",onClick:g},{default:t(()=>[u("查詢預約")]),_:1})]),_:1})]),_:1}),a(D,{class:"mt-8",flat:""},{text:t(()=>[a(T,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=e=>o.value=e),label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"])]),default:t(()=>[a(C,null,{default:t(()=>[u("查詢預約結果")]),_:1}),a(j,{"sort-by":m,"onUpdate:sortBy":r[1]||(r[1]=e=>m=e),headers:v,items:n.value,search:o.value},{"item.bookingTime":t(({value:e})=>[a(O,null,{default:t(()=>[(d(!0),S(A,null,w(e.join(" ").split(",").sort((s,i)=>parseInt(s)-parseInt(i)),(s,i)=>(d(),p(P,{key:i},{default:t(()=>[u(L(s),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["items","search"])]),_:1})]),_:1}))}};typeof k=="function"&&k(Q);export{Q as default};
