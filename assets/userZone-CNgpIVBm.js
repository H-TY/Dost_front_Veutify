import{_ as T,a as Z,i as H,r as s,c as $,o as f,j as w,w as t,e,V as u,f as j,k as p,a0 as U,a9 as X,a1 as Y,h as g,aa as E,ab as ee,a2 as v,ac as te,ad as ae,a4 as ne,u as se,b as re,I as G,d as D,a3 as z,F as L,g as K,l as F}from"./index-CoILuuTi.js";import{u as le,V as oe}from"./vee-validate.esm-HuoBcf6h.js";import{V as O,a as Q}from"./VRow-BWU2JDfZ.js";import{V as S}from"./VCol-D9i9J99M.js";import{a as W,V as N}from"./VList-C5r_oPp2.js";import{V as ce}from"./VDivider-DXS9rv4b.js";import{V as ue,a as ie}from"./VNavigationDrawer-Dc0YzrjN.js";const de=""+new URL("userZone_bg_01-修-CbFPSVuJ.png",import.meta.url).href,fe={__name:"userPhoto",setup(J){const i=Z(),r=H(),C=s(i.image),h=s(null),c=s(!1),V=()=>{c.value=!0,B(),setTimeout(()=>{c.value=!1},1e3)},B=()=>{h.value.deleteFileRecord()},d=s(!1),_=()=>{d.value=!0},P=()=>{d.value=!1},k=s(!1),m=()=>{k.value=!k.value},I=()=>{P(),B(),k.value=!1},a=s([]),b=s([]),{handleSubmit:M,isSubmitting:R,resetForm:A}=le({initialValues:{image:"帳戶大頭照欄位"}}),q=M(async y=>{var l;if(!((l=a.value[0])!=null&&l.error))try{if(a.value.length>0)y.image=a.value[0].file;else if(c.value===!0)y.image=`https://api.multiavatar.com/${i.account}.png`;else if(c.value===!1&&a.value.length<1){r({text:"未選擇圖片上傳",snackbarProps:{color:"red",location:"center center"}});return}const o=new FormData;o.append("image",y.image);const n=await i.edit(o);n.text&&(C.value=n.reImage,r({text:n.text,snackbarProps:{color:"green"}})),P()}catch(o){console.log(o),r({text:result,snackbarProps:{color:"red"}})}});return(y,l)=>{const o=$("vue-file-agent");return f(),w(O,{fluid:"",class:"pa-0 d-flex flex-column"},{default:t(()=>[e(u,{class:"bg-transparent",onClick:_},{default:t(()=>[e(j,{src:C.value,class:"rounded-circle","min-width":"130","min-height":"130",cover:""},null,8,["src"]),e(p,{class:"iconBtnPosition d-flex justify-center align-center pa-0",flat:""},{default:t(()=>[e(U,{icon:"mdi-camera",class:"iconStyle"})]),_:1})]),_:1}),e(X,{modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=n=>d.value=n),width:"320",persistent:""},{default:t(()=>[e(oe,{onSubmit:Y(g(q),["prevent"])},{default:t(()=>[e(E,{height:"370"},{default:t(()=>[e(ee,{class:"text-h6 font-weight-bold text-center pa-0 pt-7"},{default:t(()=>[v("目前大頭照")]),_:1}),e(te,{class:"pa-0 px-6 py-7 flex-grow-0"},{default:t(()=>[e(o,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=n=>a.value=n),"raw-model-value":b.value,"onUpdate:rawModelValue":l[1]||(l[1]=n=>b.value=n),accept:"image/jpg,image/jpeg,image/png","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},deletable:"",ref_key:"fileAgent",ref:h},null,8,["modelValue","raw-model-value"])]),_:1}),e(ae,{class:"justify-center pa-0 pb-7"},{default:t(()=>[e(p,{class:"bg-grey-darken-2 me-5",type:"submit",loading:g(R),onClick:V},{default:t(()=>[v("預設圖片")]),_:1},8,["loading"]),e(p,{class:"bg-green w-25",type:"submit",loading:g(R)},{default:t(()=>[v("送出")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit"]),e(u,{class:"dialogClosePosition rounded-circle bg-transparent d-flex"},{default:t(()=>[e(p,{class:"rounded-circle d-flex pa-0 bg-grey-lighten-3 opacity-100","min-width":"60","min-height":"60",variant:"plain",onClick:y.dialogClose,flat:""},{default:t(()=>[e(U,{icon:k.value?"mdi-close-circle":"mdi-close-circle-outline",size:"48",color:"red-darken-4",onMouseover:m,onMouseout:m,onClick:I},null,8,["icon"])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},ge=T(fe,[["__scopeId","data-v-c7170fbd"]]),me={__name:"userAccountBg",setup(J){const i=Z(),r=H(),C={to:"/userZone",img:new URL(""+new URL("Dost_logo-CIekf1rM.png",import.meta.url).href,import.meta.url).href},h=s(i.accountBgImage),c=s(null),V=s(!1),B=()=>{V.value=!0,d(),setTimeout(()=>{V.value=!1},1e3)},d=()=>{c.value.deleteFileRecord()},_=s(!1),P=()=>{_.value=!0},k=()=>{_.value=!1},m=s(!1),I=()=>{m.value=!m.value},a=()=>{k(),d(),m.value=!1},b=s([]),M=s([]),{handleSubmit:R,isSubmitting:A,resetForm:q}=le({initialValues:{accountBgImage:"帳戶背景圖片欄位"}}),y=R(async l=>{var o;if(!((o=b.value[0])!=null&&o.error))try{if(b.value.length>0)l.accountBgImage=b.value[0].file,console.log("userEditData.accountBgImage1",l.accountBgImage);else if(V.value===!0)l.accountBgImage=C.img;else if(V.value===!1&&b.value.length<1){r({text:"未選擇圖片上傳",snackbarProps:{color:"red",location:"center center"}});return}const n=new FormData;n.append("accountBgImage",l.accountBgImage);const x=await i.edit(n);x.text&&(h.value=x.reAccountBgImage,r({text:x.text,snackbarProps:{color:"green"}})),k()}catch(n){console.log(n),r({text:result,snackbarProps:{color:"red"}})}});return(l,o)=>{const n=$("vue-file-agent");return f(),w(O,{fluid:"",class:"pa-0"},{default:t(()=>[e(u,{class:ne(["accountBgcss",h.value.includes("Dost_logo")?"accountBgRotateScale1":"accountBgRotateScale2"])},{default:t(()=>[e(j,{src:h.value},null,8,["src"])]),_:1},8,["class"]),e(p,{class:"iconBtnPosition d-flex justify-center align-center pa-0",flat:"",onClick:P},{default:t(()=>[e(U,{icon:"mdi-camera",class:"iconStyle"})]),_:1}),e(X,{modelValue:_.value,"onUpdate:modelValue":o[2]||(o[2]=x=>_.value=x),width:"320",persistent:""},{default:t(()=>[e(oe,{onSubmit:Y(g(y),["prevent"])},{default:t(()=>[e(E,{height:"370"},{default:t(()=>[e(ee,{class:"text-h6 font-weight-bold text-center pa-0 pt-7"},{default:t(()=>[v("目前背景圖")]),_:1}),e(te,{class:"pa-0 px-6 py-7 flex-grow-0"},{default:t(()=>[e(n,{modelValue:b.value,"onUpdate:modelValue":o[0]||(o[0]=x=>b.value=x),"raw-model-value":M.value,"onUpdate:rawModelValue":o[1]||(o[1]=x=>M.value=x),accept:"image/jpg,image/jpeg,image/png","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},deletable:"",ref_key:"fileAgent",ref:c},null,8,["modelValue","raw-model-value"])]),_:1}),e(ae,{class:"justify-center pa-0 pb-7"},{default:t(()=>[e(p,{class:"bg-grey-darken-2 me-5",type:"submit",loading:g(A),onClick:B},{default:t(()=>[v("預設圖片")]),_:1},8,["loading"]),e(p,{class:"bg-green w-25",type:"submit",loading:g(A)},{default:t(()=>[v("送出")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit"]),e(u,{class:"dialogClosePosition rounded-circle bg-transparent d-flex"},{default:t(()=>[e(p,{class:"rounded-circle d-flex pa-0 bg-grey-lighten-3 opacity-100","min-width":"60","min-height":"60",variant:"plain",onClick:l.dialogClose,flat:""},{default:t(()=>[e(U,{icon:m.value?"mdi-close-circle":"mdi-close-circle-outline",size:"48",color:"red-darken-4",onMouseover:I,onMouseout:I,onClick:a},null,8,["icon"])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},pe=T(me,[["__scopeId","data-v-6cd55f21"]]),ve={__name:"userZone",setup(J){const{mobile:i}=se(),r=Z(),C=re(),h=H(),c=s(!1),V=G(()=>i.value==!0?c.value=!1:c.value=!0),B=s(r.account),d={to:"/userZone",img:new URL(""+new URL("Dost_logo-CIekf1rM.png",import.meta.url).href,import.meta.url).href},_=G(()=>[{to:"/",text:"回首頁",icon:"mdi-home"},{to:"/userZone",text:"會員基本資料",icon:"mdi-list-box"},{to:"/userZone/dogBookingSearch",text:"預約狗狗查詢",icon:"mdi-dog"},{to:"/",text:"狗狗適性測試結果",icon:"mdi-tooltip-edit"},{to:"/",text:"設定",icon:"mdi-cog-outline"}]),P=async()=>(await r.logout(),h({text:"登出成功",snackbarProps:{color:"green"}}),C.push("/"));return(k,m)=>{const I=$("router-view");return f(),D(L,null,[g(i)?(f(),w(O,{key:0,class:"pa-0",fluid:""},{default:t(()=>[e(u,{class:"bg-transparent position-relative"},{default:t(()=>[e(u,{class:"overflow-hidden",height:"340px"},{default:t(()=>[e(pe)]),_:1}),e(u,{class:"bg-transparent userPhotoPosition"},{default:t(()=>[e(u,{class:"d-flex justify-center userPhotoBorder"},{default:t(()=>[e(ge)]),_:1}),e(u,{class:"bg-transparent text-center accountName"},{default:t(()=>[v(z(g(r).account),1)]),_:1})]),_:1})]),_:1}),e(u,{class:"bg-transparent mobileNavMargin"},{default:t(()=>[e(Q,{class:"px-5 ma-0"},{default:t(()=>[(f(!0),D(L,null,K(_.value,a=>(f(),w(S,{key:a.to,cols:"6",class:"text-center pa-5"},{default:t(()=>[e(p,{class:"mobileNavCss bg-white",to:a.to,size:"80",variant:"flat",flat:"","active-color":"green-darken-1"},{default:t(()=>[e(U,{class:"text-light-blue-darken-4",icon:a.icon,size:"40"},null,8,["icon"])]),_:2},1032,["to"]),e(u,{class:"bg-transparent mt-3 text-blue-darken-4"},{default:t(()=>[v(z(a.text),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):F("",!0),g(i)?F("",!0):(f(),w(ue,{key:1,class:"border-0",position:"relative",modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=a=>c.value=a),permanent:V.value},{image:t(()=>[e(j,{src:de,height:"1000",cover:""})]),default:t(()=>[g(i)?F("",!0):(f(),w(W,{key:0,class:"d-flex align-center pa-0 ma-4"},{default:t(()=>[e(S,{class:"pa-0 d-flex justify-end pe-4"},{default:t(()=>[e(N,{class:"rounded-circle pa-2",color:"white",width:" 70",height:"70",to:d.to,ripple:!1},{default:t(()=>[e(j,{src:d.img,cover:""},null,8,["src"])]),_:1},8,["to"])]),_:1}),e(S,null,{default:t(()=>[e(Q,{class:"d-flex flex-column"},{default:t(()=>[e(S,{class:"pa-0"},{default:t(()=>[e(N,{to:d.to,ripple:!1,"min-height":"0",class:"d-flex align-center pa-0 text-overline",text:"會員專區"},null,8,["to"])]),_:1}),e(S,{class:"pa-0"},{default:t(()=>[e(u,{class:"bg-transparent accountName d-flex"},{default:t(()=>[v(z(B.value),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})),e(ce),e(W,{class:"px-6 py-4"},{default:t(()=>[(f(!0),D(L,null,K(_.value,a=>(f(),w(N,{key:a.to,to:a.to,title:a.text,"prepend-icon":a.icon,"border-radius":"50",color:"light-blue-darken-2"},null,8,["to","title","prepend-icon"]))),128))]),_:1}),e(S,{class:"d-flex justify-center mt-5"},{default:t(()=>[g(r).isLogin?(f(),w(p,{key:0,"prepend-icon":"mdi-account-arrow-right",class:"bg-deep-orange-darken-2 bottom-0 mb-11",position:"absolute",variant:"outlined",rounded:"",ripple:!1,onClick:P},{default:t(()=>[v("登出")]),_:1})):F("",!0)]),_:1})]),_:1},8,["modelValue","permanent"])),e(ie,null,{default:t(()=>[e(I)]),_:1})],64)}}},ye=T(ve,[["__scopeId","data-v-917506ec"]]);export{ye as default};
