import{_ as T,a as Z,u as H,i as O,r as c,c as $,o as f,j as B,w as t,e,V as r,g as E,k as m,a2 as M,f as l,a0 as R,a6 as ee,a1 as te,a7 as ae,a8 as oe,a3 as p,a9 as le,aa as se,b as ce,I as K,d as z,a4 as L,F as N,h as Q,l as D}from"./index-DqTNIFwe.js";import{u as ne,V as re}from"./vee-validate.esm-B1XzqZEw.js";import{m as ie}from"./index-XiPP8dQK.js";import{V as q}from"./VContainer-B7AzpPWG.js";import{V as ue}from"./VRow-CEUJRgoB.js";import{V as W}from"./VCol-DLidg8Uj.js";import{a as de,V as ge}from"./VList-DziepPMK.js";import{V as fe,a as me}from"./VNavigationDrawer-CyV-DVsa.js";import"./VDivider-BTImqqiA.js";const pe={__name:"userPhoto",setup(G){const v=Z(),{mobile:i}=H(),_=O(),I=Math.random().toString(36).substring(2,10);let u=ie(I);const C=c(v.image),d=c(null),k=c(!1),S=()=>{k.value=!0,g(),setTimeout(()=>{k.value=!1},1e3)},g=()=>{d.value.deleteFileRecord()},V=c(!1),s=()=>{V.value=!0},P=()=>{V.value=!1},y=c(!1),F=()=>{y.value=!y.value},w=()=>{P(),g(),y.value=!1},b=c([]),j=c([]),{handleSubmit:U,isSubmitting:A,resetForm:J}=ne({initialValues:{fromCP:"userPhoto",image:"帳戶大頭照欄位"}}),h=U(async n=>{var a;if(!((a=b.value[0])!=null&&a.error))try{if(b.value.length>0)n.image=b.value[0].file;else if(k.value===!0)n.image=`data:image/svg+xml;base64,${btoa(u)}`;else if(k.value===!1&&b.value.length<1){_({text:"未選擇圖片上傳",snackbarProps:{color:"red",location:"center center"}});return}const o=new FormData;o.append("fromCP",n.fromCP),o.append("image",n.image);const x=await v.edit(o);x.text&&(C.value=x.reImage,_({text:x.text,snackbarProps:{color:"green"}})),P()}catch(o){console.log(o),_({text:result,snackbarProps:{color:"red"}})}});return(n,a)=>{const o=$("vue-file-agent");return f(),B(q,{fluid:"",class:"pa-0 d-flex flex-column w-100 fill-height"},{default:t(()=>[e(r,{class:"bg-transparent",onClick:s},{default:t(()=>[e(E,{src:C.value,class:"rounded-circle","min-width":"130","min-height":"130",cover:""},null,8,["src"]),e(m,{class:M(["d-flex justify-center align-center pa-0",l(i)?"mobileIconBtnPosition":"PCiconBtnPosition"]),flat:""},{default:t(()=>[e(R,{icon:"mdi-camera",class:M(l(i)?"mobileIconStyle":"PCiconStyle")},null,8,["class"])]),_:1},8,["class"])]),_:1}),e(ee,{modelValue:V.value,"onUpdate:modelValue":a[2]||(a[2]=x=>V.value=x),width:"320",persistent:""},{default:t(()=>[e(re,{onSubmit:te(l(h),["prevent"]),disabled:l(A)},{default:t(()=>[e(ae,{height:"370"},{default:t(()=>[e(oe,{class:"text-h6 font-weight-bold text-center pa-0 pt-7"},{default:t(()=>[p("目前大頭照")]),_:1}),e(le,{class:"pa-0 px-6 py-7 flex-grow-0"},{default:t(()=>[e(o,{modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=x=>b.value=x),"raw-model-value":j.value,"onUpdate:rawModelValue":a[1]||(a[1]=x=>j.value=x),accept:"image/jpg,image/jpeg,image/png","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},deletable:"",ref_key:"fileAgent",ref:d},null,8,["modelValue","raw-model-value"])]),_:1}),e(se,{class:"justify-center pa-0 pb-7"},{default:t(()=>[e(m,{class:"bg-grey-darken-2 me-5",type:"submit",loading:l(A),onClick:S},{default:t(()=>[p("預設圖片")]),_:1},8,["loading"]),e(m,{class:"bg-green w-25",type:"submit",loading:l(A)},{default:t(()=>[p("送出")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit","disabled"]),e(r,{class:"dialogClosePosition rounded-circle bg-transparent d-flex"},{default:t(()=>[e(m,{class:"rounded-circle d-flex pa-0 bg-grey-lighten-3 opacity-100","min-width":"60","min-height":"60",variant:"plain",onClick:n.dialogClose,flat:""},{default:t(()=>[e(R,{icon:y.value?"mdi-close-circle":"mdi-close-circle-outline",size:"48",color:"red-darken-4",onMouseover:F,onMouseout:F,onClick:w},null,8,["icon"])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},X=T(pe,[["__scopeId","data-v-19e57395"]]),ve={__name:"userAccountBg",setup(G){const v=Z(),{mobile:i}=H(),_=O(),I={to:"/userZone",img:new URL(""+new URL("Dost_logo-CIekf1rM.png",import.meta.url).href,import.meta.url).href},u=c(v.accountBgImage),C=c(null),d=c(!1),k=()=>{d.value=!0,S(),setTimeout(()=>{d.value=!1},1e3)},S=()=>{C.value.deleteFileRecord()},g=c(!1),V=()=>{g.value=!0},s=()=>{g.value=!1},P=c(!1),y=()=>{P.value=!P.value},F=()=>{s(),S(),P.value=!1},w=c([]),b=c([]),{handleSubmit:j,isSubmitting:U,resetForm:A}=ne({initialValues:{fromCP:"userAccountBg",accountBgImage:"帳戶背景圖片欄位"}}),J=j(async h=>{var n;if(!((n=w.value[0])!=null&&n.error))try{if(w.value.length>0)h.accountBgImage=w.value[0].file,console.log("userEditData.accountBgImage1",h.accountBgImage);else if(d.value===!0)h.accountBgImage=I.img;else if(d.value===!1&&w.value.length<1){_({text:"未選擇圖片上傳",snackbarProps:{color:"red",location:"center center"}});return}const a=new FormData;a.append("fromCP",h.fromCP),a.append("accountBgImage",h.accountBgImage);const o=await v.edit(a);o.text&&(u.value=o.reAccountBgImage,_({text:o.text,snackbarProps:{color:"green"}})),s()}catch(a){console.log(a),_({text:result,snackbarProps:{color:"red"}})}});return(h,n)=>{const a=$("vue-file-agent");return f(),B(q,{fluid:"",class:"pa-0 fill-height"},{default:t(()=>[e(r,{class:M(["accountBgcss",u.value.includes("Dost_logo")?"accountBgRotateScale1":"accountBgRotateScale2"])},{default:t(()=>[e(E,{src:u.value,class:"w-100 fill-height photoCss",cover:""},null,8,["src"])]),_:1},8,["class"]),e(m,{class:M(["d-flex justify-center align-center pa-0",l(i)?"mobileIconBtnPosition":"PCiconBtnPosition"]),flat:"",onClick:V},{default:t(()=>[e(R,{icon:"mdi-camera",class:M(l(i)?"mobileIconStyle":"PCiconStyle")},null,8,["class"])]),_:1},8,["class"]),e(ee,{modelValue:g.value,"onUpdate:modelValue":n[2]||(n[2]=o=>g.value=o),width:"320",persistent:""},{default:t(()=>[e(re,{onSubmit:te(l(J),["prevent"]),disabled:l(U)},{default:t(()=>[e(ae,{height:"370"},{default:t(()=>[e(oe,{class:"text-h6 font-weight-bold text-center pa-0 pt-7"},{default:t(()=>[p("目前背景圖")]),_:1}),e(le,{class:"pa-0 px-6 py-7 flex-grow-0"},{default:t(()=>[e(a,{modelValue:w.value,"onUpdate:modelValue":n[0]||(n[0]=o=>w.value=o),"raw-model-value":b.value,"onUpdate:rawModelValue":n[1]||(n[1]=o=>b.value=o),accept:"image/jpg,image/jpeg,image/png","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},deletable:"",ref_key:"fileAgent",ref:C},null,8,["modelValue","raw-model-value"])]),_:1}),e(se,{class:"justify-center pa-0 pb-7"},{default:t(()=>[e(m,{class:"bg-grey-darken-2 me-5",type:"submit",loading:l(U),onClick:k},{default:t(()=>[p("預設圖片")]),_:1},8,["loading"]),e(m,{class:"bg-green w-25",type:"submit",loading:l(U)},{default:t(()=>[p("送出")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit","disabled"]),e(r,{class:"dialogClosePosition rounded-circle bg-transparent d-flex"},{default:t(()=>[e(m,{class:"rounded-circle d-flex pa-0 bg-grey-lighten-3 opacity-100","min-width":"60","min-height":"60",variant:"plain",onClick:h.dialogClose,flat:""},{default:t(()=>[e(R,{icon:P.value?"mdi-close-circle":"mdi-close-circle-outline",size:"48",color:"red-darken-4",onMouseover:y,onMouseout:y,onClick:F},null,8,["icon"])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},Y=T(ve,[["__scopeId","data-v-068aa38b"]]),_e={__name:"userZone",setup(G){const{mobile:v}=H(),i=Z(),_=ce(),I=O(),u=c(!1),C=K(()=>v.value==!0?u.value=!1:u.value=!0);c(i.account),new URL(""+new URL("Dost_logo-CIekf1rM.png",import.meta.url).href,import.meta.url).href;const d=K(()=>[{to:"/",text:"回首頁",icon:"mdi-home"},{to:"/userZone",text:"會員基本資料",icon:"mdi-list-box"},{to:"/userZone/dogBookingSearch",text:"預約狗狗查詢",icon:"mdi-dog"},{to:"/",text:"狗狗適性測試結果",icon:"mdi-tooltip-edit"},{to:"/",text:"設定",icon:"mdi-cog-outline"}]),k=async()=>(await i.logout(),I({text:"登出成功",snackbarProps:{color:"green"}}),_.push("/"));return(S,g)=>{const V=$("router-view");return f(),z(N,null,[l(v)?(f(),B(q,{key:0,class:"pa-0",fluid:""},{default:t(()=>[e(r,{class:"bg-transparent position-relative"},{default:t(()=>[e(r,{class:"overflow-hidden",height:"340px"},{default:t(()=>[e(Y)]),_:1}),e(r,{class:"bg-transparent mobileUserPhotoPosition"},{default:t(()=>[e(r,{class:"d-flex justify-center mobileUserPhotoBorder"},{default:t(()=>[e(X)]),_:1}),e(r,{class:"bg-transparent text-center accountName"},{default:t(()=>[p(L(l(i).account),1)]),_:1})]),_:1})]),_:1}),e(r,{class:"bg-transparent mobileNavMargin"},{default:t(()=>[e(ue,{class:"px-5 ma-0"},{default:t(()=>[(f(!0),z(N,null,Q(d.value,s=>(f(),B(W,{key:s.to,cols:"6",class:"text-center pa-5"},{default:t(()=>[e(m,{class:"mobileNavCss bg-white",to:s.to,size:"80",variant:"flat",flat:"","active-color":"green-darken-1"},{default:t(()=>[e(R,{class:"text-light-blue-darken-4",icon:s.icon,size:"40"},null,8,["icon"])]),_:2},1032,["to"]),e(r,{class:"bg-transparent mt-3 text-blue-darken-4"},{default:t(()=>[p(L(s.text),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):D("",!0),l(v)?D("",!0):(f(),B(fe,{key:1,class:"border-0 shadow-lg",position:"relative",modelValue:u.value,"onUpdate:modelValue":g[0]||(g[0]=s=>u.value=s),permanent:C.value},{default:t(()=>[e(r,{class:"bg-transparent w-100 fill-height position-absolute"},{default:t(()=>[e(r,{class:"overflow-hidden PCuserBgPosition BgOverlay"},{default:t(()=>[e(Y)]),_:1})]),_:1}),e(r,{class:"bg-transparent PCuserPhotoPosition pa-5"},{default:t(()=>[e(r,{class:"PCuserPhoto"},{default:t(()=>[e(X)]),_:1}),e(r,{class:"bg-transparent text-center accountName mt-3"},{default:t(()=>[p(L(l(i).account),1)]),_:1})]),_:1}),e(de,{class:"ps-6 py-4 Zindex text-grey-darken-2"},{default:t(()=>[(f(!0),z(N,null,Q(d.value,s=>(f(),B(ge,{key:s.to,to:s.to,title:s.text,"prepend-icon":s.icon,class:"rounded-s-pill","active-class":"selectedStatus"},null,8,["to","title","prepend-icon"]))),128)),e(W,{class:"d-flex justify-center mt-15"},{default:t(()=>[l(i).isLogin?(f(),B(m,{key:0,"prepend-icon":"mdi-account-arrow-right",class:"bg-deep-orange-darken-2",variant:"outlined",rounded:"",ripple:!1,onClick:k},{default:t(()=>[p("登出")]),_:1})):D("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","permanent"])),e(me,null,{default:t(()=>[e(V)]),_:1})],64)}}},Be=T(_e,[["__scopeId","data-v-cd25f4e8"]]);export{Be as default};
