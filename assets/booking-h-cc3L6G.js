import{p as X,aw as ue,q as Z,I as _,s as ee,e as n,k as q,aN as ea,z as aa,aR as Ie,K as he,aS as ta,aT as na,r as I,aU as la,aV as ie,H as re,O as j,a2 as O,S as oe,aW as Te,X as Oe,W,L as Ae,aX as ra,P as Be,aq as $e,av as se,aY as oa,aZ as sa,a_ as ye,F as me,a$ as ia,b0 as ce,b1 as da,aQ as Ye,_ as ua,u as ca,a as va,i as ma,o as G,j as ve,w as b,d as be,g as xe,h as A,a9 as ha,V as U,a0 as Se,a4 as te,a1 as fa,a5 as Q,f as ga,a3 as ne,b2 as pa,b as ka,a6 as ya,a7 as ba,a8 as He}from"./index-C_dRcg-W.js";import{_ as xa}from"./dogsCard-Bqn-8dRH.js";import{c as Sa,a as K,d as wa,b as we,u as Va,f as E,V as Ve}from"./vee-validate.esm-Bk3_kkM1.js";import{g as J,b as _a,e as Da,P as Pa,N as Na,S as Ca,a as Ma}from"./pagination-DLY-1ky6.js";import{V as le}from"./VCol-93DuqtMK.js";import{V as Ia}from"./VDivider-BoRIpqWd.js";import{a as _e,V as Ta}from"./VRow-BzBDoCjr.js";import{a as Oa}from"./VList-U5h5yOKo.js";import{V as Aa}from"./VCheckbox-C_a1IuP0.js";import"./VCheckboxBtn-DjgahX6v.js";const Ee=X({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:ue,default:"$next"},prevIcon:{type:ue,default:"$prev"},modeIcon:{type:ue,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),De=Z()({name:"VDatePickerControls",props:Ee(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,a){let{emit:S}=a;const i=_(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),t=_(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),v=_(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),d=_(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function u(){S("click:prev")}function s(){S("click:next")}function l(){S("click:year")}function o(){S("click:month")}return ee(()=>n("div",{class:["v-date-picker-controls"]},[n(q,{class:"v-date-picker-controls__month-btn",disabled:i.value,text:e.text,variant:"text",rounded:!0,onClick:o},null),n(q,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:t.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:l},null),n(ea,{key:"mode-spacer"},null),n("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[n(q,{disabled:v.value,icon:e.prevIcon,variant:"text",onClick:u},null),n(q,{disabled:d.value,icon:e.nextIcon,variant:"text",onClick:s},null)])])),{}}}),Ba=X({appendIcon:String,color:String,header:String,transition:String,onClick:ta()},"VDatePickerHeader"),Pe=Z()({name:"VDatePickerHeader",props:Ba(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,a){let{emit:S,slots:i}=a;const{backgroundColorClasses:t,backgroundColorStyles:v}=aa(e,"color");function d(){S("click")}function u(){S("click:append")}return ee(()=>{const s=!!(i.default||e.header),l=!!(i.append||e.appendIcon);return n("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},t.value],style:v.value,onClick:d},[i.prepend&&n("div",{key:"prepend",class:"v-date-picker-header__prepend"},[i.prepend()]),s&&n(Ie,{key:"content",name:e.transition},{default:()=>{var o;return[n("div",{key:e.header,class:"v-date-picker-header__content"},[((o=i.default)==null?void 0:o.call(i))??e.header])]}}),l&&n("div",{class:"v-date-picker-header__append"},[i.append?n(he,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var o;return[(o=i.append)==null?void 0:o.call(i)]}}):n(q,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:u},null)])])}),{}}}),qe=X({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...na()},"VDatePickerMonth"),Ne=Z()({name:"VDatePickerMonth",props:qe(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,a){let{emit:S,slots:i}=a;const t=I(),{daysInMonth:v,model:d,weekNumbers:u}=la(e),s=ie(),l=re(),o=re(),f=re(!1),x=_(()=>f.value?e.reverseTransition:e.transition);e.multiple==="range"&&d.value.length>0&&(l.value=d.value[0],d.value.length>1&&(o.value=d.value[d.value.length-1]));const m=_(()=>{const h=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return d.value.length>=h});j(v,(h,r)=>{r&&(f.value=s.isBefore(h[0].date,r[0].date))});function N(h){const r=s.startOfDay(h);if(d.value.length===0?l.value=void 0:d.value.length===1&&(l.value=d.value[0],o.value=void 0),!l.value)l.value=r,d.value=[l.value];else if(o.value)l.value=h,o.value=void 0,d.value=[l.value];else{if(s.isSameDay(r,l.value)){l.value=void 0,d.value=[];return}else s.isBefore(r,l.value)?(o.value=s.endOfDay(l.value),l.value=r):o.value=s.endOfDay(r);const D=s.getDiff(o.value,l.value,"days"),P=[l.value];for(let B=1;B<D;B++){const L=s.addDays(l.value,B);P.push(L)}P.push(o.value),d.value=P}}function y(h){const r=d.value.findIndex(D=>s.isSameDay(D,h));if(r===-1)d.value=[...d.value,h];else{const D=[...d.value];D.splice(r,1),d.value=D}}function w(h){e.multiple==="range"?N(h):e.multiple?y(h):d.value=[h]}return()=>n("div",{class:"v-date-picker-month"},[e.showWeek&&n("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&n("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[O(" ")]),u.value.map(h=>n("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[h]))]),n(Ie,{name:x.value},{default:()=>{var h;return[n("div",{ref:t,key:(h=v.value[0].date)==null?void 0:h.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&s.getWeekdays(e.firstDayOfWeek).map(r=>n("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[r])),v.value.map((r,D)=>{const P={props:{onClick:()=>w(r.date)},item:r,i:D};return m.value&&!r.isSelected&&(r.isDisabled=!0),n("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":r.isAdjacent,"v-date-picker-month__day--hide-adjacent":r.isHidden,"v-date-picker-month__day--selected":r.isSelected,"v-date-picker-month__day--week-end":r.isWeekEnd,"v-date-picker-month__day--week-start":r.isWeekStart}],"data-v-date":r.isDisabled?void 0:r.isoDate},[(e.showAdjacentMonths||!r.isAdjacent)&&n(he,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(r.isSelected||r.isToday)&&!r.isDisabled?e.color:void 0,disabled:r.isDisabled,icon:!0,ripple:!1,text:r.localized,variant:r.isDisabled?r.isToday?"outlined":"text":r.isToday&&!r.isSelected?"outlined":"flat",onClick:()=>w(r.date)}}},{default:()=>{var B;return[((B=i.day)==null?void 0:B.call(i,P))??n(q,P.props,null)]}})])})])]}})])}}),Re=X({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Ce=Z()({name:"VDatePickerMonths",props:Re(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:S,slots:i}=a;const t=ie(),v=oe(e,"modelValue"),d=_(()=>{let u=t.startOfYear(t.date());return e.year&&(u=t.setYear(u,e.year)),Te(12).map(s=>{const l=t.format(u,"monthShort"),o=!!(e.min&&t.isAfter(t.startOfMonth(t.date(e.min)),u)||e.max&&t.isAfter(u,t.startOfMonth(t.date(e.max))));return u=t.getNextMonth(u),{isDisabled:o,text:l,value:s}})});return Oe(()=>{v.value=v.value??t.getMonth(t.date())}),ee(()=>n("div",{class:"v-date-picker-months",style:{height:Ae(e.height)}},[n("div",{class:"v-date-picker-months__content"},[d.value.map((u,s)=>{var f;const l={active:v.value===s,color:v.value===s?e.color:void 0,disabled:u.isDisabled,rounded:!0,text:u.text,variant:v.value===u.value?"flat":"text",onClick:()=>o(s)};function o(x){if(v.value===x){S("update:modelValue",v.value);return}v.value=x}return((f=i.month)==null?void 0:f.call(i,{month:u,i:s,props:l}))??n(q,W({key:"month"},l),null)})])])),{}}}),Ue=X({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),Me=Z()({name:"VDatePickerYears",props:Ue(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:S,slots:i}=a;const t=ie(),v=oe(e,"modelValue"),d=_(()=>{const s=t.getYear(t.date());let l=s-100,o=s+52;e.min&&(l=t.getYear(t.date(e.min))),e.max&&(o=t.getYear(t.date(e.max)));let f=t.startOfYear(t.date());return f=t.setYear(f,l),Te(o-l+1,l).map(x=>{const m=t.format(f,"year");return f=t.setYear(f,t.getYear(f)+1),{text:m,value:x}})});Oe(()=>{v.value=v.value??t.getYear(t.date())});const u=ra();return Be(async()=>{var s;await $e(),(s=u.el)==null||s.scrollIntoView({block:"center"})}),ee(()=>n("div",{class:"v-date-picker-years",style:{height:Ae(e.height)}},[n("div",{class:"v-date-picker-years__content"},[d.value.map((s,l)=>{var f;const o={ref:v.value===s.value?u:void 0,active:v.value===s.value,color:v.value===s.value?e.color:void 0,rounded:!0,text:s.text,variant:v.value===s.value?"flat":"text",onClick:()=>{if(v.value===s.value){S("update:modelValue",v.value);return}v.value=s.value}};return((f=i.year)==null?void 0:f.call(i,{year:s,i:l,props:o}))??n(q,W({key:"month"},o),null)})])])),{}}}),$a=X({header:{type:String,default:"$vuetify.datePicker.header"},...Ee(),...qe({weeksInMonth:"static"}),...se(Re(),["modelValue"]),...se(Ue(),["modelValue"]),...oa({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Ya=Z()({name:"VDatePicker",props:$a(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,a){let{emit:S,slots:i}=a;const t=ie(),{t:v}=sa(),d=oe(e,"modelValue",void 0,g=>ce(g),g=>e.multiple?g:g[0]),u=oe(e,"viewMode"),s=_(()=>{var M;const g=t.date((M=d.value)==null?void 0:M[0]);return g&&t.isValid(g)?g:t.date()}),l=I(Number(e.month??t.getMonth(t.startOfMonth(s.value)))),o=I(Number(e.year??t.getYear(t.startOfYear(t.setMonth(s.value,l.value))))),f=re(!1),x=_(()=>e.multiple&&d.value.length>1?v("$vuetify.datePicker.itemsSelected",d.value.length):d.value[0]&&t.isValid(d.value[0])?t.format(t.date(d.value[0]),"normalDateWithWeekday"):v(e.header)),m=_(()=>{let g=t.date();return g=t.setDate(g,1),g=t.setMonth(g,l.value),g=t.setYear(g,o.value),t.format(g,"monthAndYear")}),N=_(()=>`date-picker-header${f.value?"-reverse":""}-transition`),y=_(()=>{const g=t.date(e.min);return e.min&&t.isValid(g)?g:null}),w=_(()=>{const g=t.date(e.max);return e.max&&t.isValid(g)?g:null}),h=_(()=>{if(e.disabled)return!0;const g=[];if(u.value!=="month")g.push("prev","next");else{let M=t.date();if(M=t.setYear(M,o.value),M=t.setMonth(M,l.value),y.value){const $=t.addDays(t.startOfMonth(M),-1);t.isAfter(y.value,$)&&g.push("prev")}if(w.value){const $=t.addDays(t.endOfMonth(M),1);t.isAfter($,w.value)&&g.push("next")}}return g});function r(){l.value<11?l.value++:(o.value++,l.value=0,F(o.value)),H(l.value)}function D(){l.value>0?l.value--:(o.value--,l.value=11,F(o.value)),H(l.value)}function P(){u.value="month"}function B(){u.value=u.value==="months"?"month":"months"}function L(){u.value=u.value==="year"?"month":"year"}function H(g){u.value==="months"&&B(),S("update:month",g)}function F(g){u.value==="year"&&L(),S("update:year",g)}return j(d,(g,M)=>{const $=ce(M),z=ce(g);if(!z.length)return;const T=t.date($[$.length-1]),R=t.date(z[z.length-1]),Y=t.getMonth(R),C=t.getYear(R);Y!==l.value&&(l.value=Y,H(l.value)),C!==o.value&&(o.value=C,F(o.value)),f.value=t.isBefore(T,R)}),ee(()=>{const g=ye.filterProps(e),M=De.filterProps(e),$=Pe.filterProps(e),z=Ne.filterProps(e),T=se(Ce.filterProps(e),["modelValue"]),R=se(Me.filterProps(e),["modelValue"]),Y={header:x.value,transition:N.value};return n(ye,W(g,{class:["v-date-picker",`v-date-picker--${u.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var C;return((C=i.title)==null?void 0:C.call(i))??n("div",{class:"v-date-picker__title"},[v(e.title)])},header:()=>i.header?n(he,{defaults:{VDatePickerHeader:{...Y}}},{default:()=>{var C;return[(C=i.header)==null?void 0:C.call(i,Y)]}}):n(Pe,W({key:"header"},$,Y,{onClick:u.value!=="month"?P:void 0}),{...i,default:void 0}),default:()=>n(me,null,[n(De,W(M,{disabled:h.value,text:m.value,"onClick:next":r,"onClick:prev":D,"onClick:month":B,"onClick:year":L}),null),n(ia,{hideOnLeave:!0},{default:()=>[u.value==="months"?n(Ce,W({key:"date-picker-months"},T,{modelValue:l.value,"onUpdate:modelValue":[C=>l.value=C,H],min:y.value,max:w.value,year:o.value}),null):u.value==="year"?n(Me,W({key:"date-picker-years"},R,{modelValue:o.value,"onUpdate:modelValue":[C=>o.value=C,F],min:y.value,max:w.value}),null):n(Ne,W({key:"date-picker-month"},z,{modelValue:d.value,"onUpdate:modelValue":C=>d.value=C,month:l.value,"onUpdate:month":[C=>l.value=C,H],year:o.value,"onUpdate:year":[C=>o.value=C,F],min:y.value,max:w.value}),null)]})]),actions:i.actions})}),{}}});function Ha(e){let{swiper:a,extendParams:S,on:i}=e;S({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let t=!1,v={};const d=m=>m.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),u=m=>{const N=J();let y;m?y=new URL(m):y=N.location;const w=y.pathname.slice(1).split("/").filter(P=>P!==""),h=w.length,r=w[h-2],D=w[h-1];return{key:r,value:D}},s=(m,N)=>{const y=J();if(!t||!a.params.history.enabled)return;let w;a.params.url?w=new URL(a.params.url):w=y.location;const h=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${N}"]`):a.slides[N];let r=d(h.getAttribute("data-history"));if(a.params.history.root.length>0){let P=a.params.history.root;P[P.length-1]==="/"&&(P=P.slice(0,P.length-1)),r=`${P}/${m?`${m}/`:""}${r}`}else w.pathname.includes(m)||(r=`${m?`${m}/`:""}${r}`);a.params.history.keepQuery&&(r+=w.search);const D=y.history.state;D&&D.value===r||(a.params.history.replaceState?y.history.replaceState({value:r},null,r):y.history.pushState({value:r},null,r))},l=(m,N,y)=>{if(N)for(let w=0,h=a.slides.length;w<h;w+=1){const r=a.slides[w];if(d(r.getAttribute("data-history"))===N){const P=a.getSlideIndex(r);a.slideTo(P,m,y)}}else a.slideTo(0,m,y)},o=()=>{v=u(a.params.url),l(a.params.speed,v.value,!1)},f=()=>{const m=J();if(a.params.history){if(!m.history||!m.history.pushState){a.params.history.enabled=!1,a.params.hashNavigation.enabled=!0;return}if(t=!0,v=u(a.params.url),!v.key&&!v.value){a.params.history.replaceState||m.addEventListener("popstate",o);return}l(0,v.value,a.params.runCallbacksOnInit),a.params.history.replaceState||m.addEventListener("popstate",o)}},x=()=>{const m=J();a.params.history.replaceState||m.removeEventListener("popstate",o)};i("init",()=>{a.params.history.enabled&&f()}),i("destroy",()=>{a.params.history.enabled&&x()}),i("transitionEnd _freeModeNoMomentumRelease",()=>{t&&s(a.params.history.key,a.activeIndex)}),i("slideChange",()=>{t&&a.params.cssMode&&s(a.params.history.key,a.activeIndex)})}function Ea(e){let{swiper:a,extendParams:S,emit:i,on:t}=e,v=!1;const d=_a(),u=J();S({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(x,m){if(a.virtual&&a.params.virtual.enabled){const N=a.slides.filter(w=>w.getAttribute("data-hash")===m)[0];return N?parseInt(N.getAttribute("data-swiper-slide-index"),10):0}return a.getSlideIndex(Da(a.slidesEl,`.${a.params.slideClass}[data-hash="${m}"], swiper-slide[data-hash="${m}"]`)[0])}}});const s=()=>{i("hashChange");const x=d.location.hash.replace("#",""),m=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${a.activeIndex}"]`):a.slides[a.activeIndex],N=m?m.getAttribute("data-hash"):"";if(x!==N){const y=a.params.hashNavigation.getSlideIndex(a,x);if(typeof y>"u"||Number.isNaN(y))return;a.slideTo(y)}},l=()=>{if(!v||!a.params.hashNavigation.enabled)return;const x=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${a.activeIndex}"]`):a.slides[a.activeIndex],m=x?x.getAttribute("data-hash")||x.getAttribute("data-history"):"";a.params.hashNavigation.replaceState&&u.history&&u.history.replaceState?(u.history.replaceState(null,null,`#${m}`||""),i("hashSet")):(d.location.hash=m||"",i("hashSet"))},o=()=>{if(!a.params.hashNavigation.enabled||a.params.history&&a.params.history.enabled)return;v=!0;const x=d.location.hash.replace("#","");if(x){const N=a.params.hashNavigation.getSlideIndex(a,x);a.slideTo(N||0,0,a.params.runCallbacksOnInit,!0)}a.params.hashNavigation.watchState&&u.addEventListener("hashchange",s)},f=()=>{a.params.hashNavigation.watchState&&u.removeEventListener("hashchange",s)};t("init",()=>{a.params.hashNavigation.enabled&&o()}),t("destroy",()=>{a.params.hashNavigation.enabled&&f()}),t("transitionEnd _freeModeNoMomentumRelease",()=>{v&&l()}),t("slideChange",()=>{v&&a.params.cssMode&&l()})}const qa=da("BookingOrderData",()=>{const{apiAuth:e}=Ye(),a=I(new Date),S=_(()=>{const l=a.value.getFullYear().toString(),o=(a.value.getMonth()+1).toString().length>1?(a.value.getMonth()+1).toString():(a.value.getMonth()+1).toString().toString().padStart(2,"0"),f=a.value.getDate().toString().length>1?a.value.getDate().toString():a.value.getDate().toString().padStart(2,"0");return l+o+f}),i=I(null),t=I(""),v=I(""),d=I(""),u=I("");return{bookingOrderNumber:i,image:t,dogName:v,bookingDate:d,bookingTime:u,endBookingOrderData:async()=>{var l,o;try{const{data:f}=await e.get("/order",{params:{search:S.value}}),x=_(()=>f.result.data.length==0?S.value+"000":Math.max(...f.result.data.map(m=>Number(m.bookingOrderNumber))));i.value=x.value}catch(f){console.log(f),createSnackbar({text:((o=(l=f==null?void 0:f.response)==null?void 0:l.data)==null?void 0:o.message)||"發生錯誤",snackbarProps:{color:"red"}})}}}}),We=e=>(ya("data-v-dc8771ad"),e=e(),ba(),e),Ra=We(()=>He("h1",null,"預約狗狗時間",-1)),Ua=We(()=>He("h3",null,"可預約時段",-1)),Wa={__name:"booking",setup(e){const a=pa(),S=ka(),{mobile:i}=ca(),{backApi:t,apiAuth:v}=Ye(),d=va(),u=qa(),s=ma(),l=[Pa,Na,Ea,Ha],o=_(()=>{if(!d.isLogin){S.push("/login");return}return d.account}),f=I(null),x=I(new Date),m=_(()=>f.value===null||isNaN(f.value.getTime())?"左側選擇日期":f.value.toLocaleDateString()),N=p=>p>x.value,y=I([]);(async()=>{var p,k;try{const{data:c}=await t.get("/dogs");y.value.splice(0,y.value.length,...c.result.data)}catch(c){console.log(c),s({text:((k=(p=c==null?void 0:c.response)==null?void 0:p.data)==null?void 0:k.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const h=I({_id:"",image:"",dogName:"",age:0,price:0,booking:!0,bookingTime:[],feature:"",sell:!0,counter:0}),r=_(()=>h.value.image),D=I(null);j(D,(p,k)=>{if(p!==k)return T.value=[],f.value=null,pe.value.value=h.value.image});const P=()=>{a.query.id?(D.value=a.query.id,window.location.hash=`booking#${a.query.id}`,a.query.id=""):D.value=window.location.hash.substring(10)},B=()=>{P(),L()};Be(()=>{setTimeout(()=>{P(),L()},500)});const L=async()=>{var p,k;if(D.value!==null)try{await $e();const{data:c}=await t.get("/dogs/"+D.value);h.value._id=c.result._id,h.value.image=c.result.image,h.value.dogName=c.result.dogName,h.value.age=c.result.age,h.value.price=c.result.price,h.value.booking=c.result.booking,h.value.bookingTime=c.result.bookingTime,h.value.feature=c.result.feature,h.value.sell=c.result.sell,h.value.counter=c.result.counter}catch(c){console.log(c),s({text:((k=(p=c==null?void 0:c.response)==null?void 0:p.data)==null?void 0:k.message)||"發生錯誤",snackbarProps:{color:"red"}})}};L();const H=I(!1),F=p=>{p.target.innerText==m.value.slice(-2).replace("/","")&&(H.value=!0)},g=()=>{H.value=!1},M=I(!1),$=()=>{M.value=!M.value},z=()=>{M.value=!1},T=I([]),R=_(()=>T.value.length*2),Y=_(()=>h.value.price*T.value.length),C=Sa({bookingOrderNumber:K().required("預約訂單編號必填"),name:K().required("預約人名字必填"),phone:K().required("預約人電話必填"),dogName:K().required("狗狗名字必填"),bookingDate:K().required("預約日期必填"),bookingTime:wa().required("預約時段必填"),totalBookingTime:we().required("預約總時數必填").typeError("預約總時數格式錯誤").min(0,"預約總時數不能小於 0"),totalPrice:we().required("預約總金額必填").typeError("預約總金額格式錯誤").min(0,"預約總金額不能小於 0"),accountName:K().required("帳戶名稱必填")}),{handleSubmit:Le,isSubmitting:fe,resetForm:je}=Va({validationSchema:C,initialValues:{bookingOrderNumber:"",name:o.value,phone:"",image:"",dogName:"",bookingDate:"",bookingTime:[],totalBookingTime:0,totalPrice:0,accountName:""}}),ge=E("bookingOrderNumber"),ae=E("name"),de=E("phone"),pe=E("image"),Fe=E("dogName"),ze=E("bookingDate"),Qe=E("bookingTime"),Ke=E("totalBookingTime"),Xe=E("totalPrice"),Ze=E("accountName");j(m,(p,k)=>{if(p!==k)return Ze.value.value=o.value,Fe.value.value=h.value.dogName,pe.value.value=h.value.image}),(()=>{u.endBookingOrderData()})();const Ge=_(()=>u.bookingOrderNumber);j(m,async(p,k)=>{if(p!==k)return T.value=[],ze.value.value=m.value,ge.value.value=(Ge.value*1+1).toString(),console.log("OK_bookingOrderNumber",ge.value.value)}),j(T,(p,k)=>{if(p!==k)return Qe.value.value=T.value.sort((c,V)=>parseInt(c)-parseInt(V))}),j(R,(p,k)=>{if(p!==k)return Ke.value.value=R.value}),j(Y,(p,k)=>{if(p!==k)return Xe.value.value=Y.value});const Je=Le(async p=>{var k,c;try{const V=new FormData;V.append("bookingOrderNumber",p.bookingOrderNumber),V.append("name",p.name),V.append("phone",p.phone),V.append("image",p.image),V.append("dogName",p.dogName),V.append("bookingDate",p.bookingDate),V.append("bookingTime",p.bookingTime),V.append("totalBookingTime",p.totalBookingTime),V.append("totalPrice",p.totalPrice),V.append("accountName",p.accountName),await v.post("/order",V),s({text:"預約成功",snackbarProps:{color:"green"}}),je(),f.value=null,T.value=[],Y.value=0}catch(V){console.log(V),s({text:((c=(k=V==null?void 0:V.response)==null?void 0:k.data)==null?void 0:c.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),ke=_(()=>({myClass:ae.value.value.length>0}));return(p,k)=>(G(),ve(Ta,{class:"text-center mt-8"},{default:b(()=>[Ra,n(A(Ca),{slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,pagination:{clickable:!0},navigation:!0,hashNavigation:{replaceState:!0,watchState:!0},modules:l,onSlideChangeTransitionEnd:B,class:"mySwiper my-10"},{default:b(()=>[(G(!0),be(me,null,xe(y.value,c=>(G(),ve(A(Ma),{"data-hash":`/booking#${c._id}`},{default:b(()=>[n(U,{style:{width:"100%"}},{default:b(()=>[n(xa,W({ref_for:!0},c),null,16)]),_:2},1024)]),_:2},1032,["data-hash"]))),256))]),_:1}),n(_e,{class:"my-7"},{default:b(()=>[n(le,{class:"d-flex flex-wrap justify-center",cols:"12",sm:"6"},{default:b(()=>[n(Ya,{width:"400",color:"primary",modelValue:f.value,"onUpdate:modelValue":k[0]||(k[0]=c=>f.value=c),"show-adjacent-months":"","allowed-dates":N,onClick:k[1]||(k[1]=c=>F(c))},null,8,["modelValue"]),n(ha,{modelValue:H.value,"onUpdate:modelValue":k[3]||(k[3]=c=>H.value=c)},{default:b(()=>[n(Ve,null,{default:b(()=>[n(U,{class:"bg-white d-flex flex-column text-center justify-self-center align-self-center pa-7",width:"350",height:"240"},{default:b(()=>[Ua,n(Ia,{class:"my-4"}),(G(!0),be(me,null,xe(h.value.bookingTime.join(" ").split(",").sort((c,V)=>parseInt(c)-parseInt(V)),c=>(G(),ve(Aa,{class:"d-flex justify-center",modelValue:T.value,"onUpdate:modelValue":k[2]||(k[2]=V=>T.value=V),label:c,value:c,"false-icon":"mdi-paw-outline","true-icon":"mdi-paw"},null,8,["modelValue","label","value"]))),256)),n(U,{class:"dialogClosePosition rounded-circle bg-transparent d-flex"},{default:b(()=>[n(q,{class:"rounded-circle d-flex pa-0 bg-white opacity-100","min-width":"60","min-height":"60",variant:"plain",onClick:g,flat:""},{default:b(()=>[n(Se,{icon:M.value?"mdi-close-circle":"mdi-close-circle-outline",size:"48",color:"red-darken-4",onMouseover:$,onMouseout:$,onClick:z},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(U,{class:te(["bg-transparent d-flex align-center",A(i)?"mt-5":""])},{default:b(()=>[n(Se,{icon:"mdi-message-alert",class:"me-1",color:"orange-darken-2"}),O("當天日期無法預約，若有需求，請來電洽詢，謝謝！")]),_:1},8,["class"])]),_:1}),n(le,{class:te(["d-flex justify-center",A(i)?"my-4":""])},{default:b(()=>[n(Ve,{class:"w-90",cols:"12",sm:"6",onSubmit:fa(A(Je),["prevent"]),disabled:A(fe)},{default:b(()=>[n(Q,{label:"預約人姓名",class:te(ke.value),modelValue:A(ae).value.value,"onUpdate:modelValue":k[4]||(k[4]=c=>A(ae).value.value=c),"error-messages":A(ae).errorMessage.value},null,8,["class","modelValue","error-messages"]),n(Q,{label:"預約人電話",class:te(ke.value),modelValue:A(de).value.value,"onUpdate:modelValue":k[5]||(k[5]=c=>A(de).value.value=c),"error-messages":A(de).errorMessage.value},null,8,["class","modelValue","error-messages"]),n(_e,null,{default:b(()=>[n(le,{cols:"4",class:"pa-0 ps-3"},{default:b(()=>[n(U,{class:"bg-transparent my-2",elevation:"2",rounded:""},{default:b(()=>[n(ga,{src:r.value,height:"70",cover:""},null,8,["src"])]),_:1})]),_:1}),n(le,null,{default:b(()=>[n(Q,{readonly:""},{default:b(()=>[O("預約狗狗： "),n(U,{class:"text-h6 font-weight-bold bg-transparent"},{default:b(()=>[O(ne(h.value.dogName),1)]),_:1})]),_:1})]),_:1})]),_:1}),n(Q,{readonly:""},{default:b(()=>[O("預約日期： "),n(U,{class:"text-h6 font-weight-bold bg-transparent"},{default:b(()=>[O(ne(m.value),1)]),_:1})]),_:1}),n(Q,{readonly:""},{default:b(()=>[O("預約時間： "),n(Oa,{class:"my-0 pa-0 bg-transparent",items:T.value.sort((c,V)=>parseInt(c)-parseInt(V))},null,8,["items"])]),_:1}),n(Q,{readonly:""},{default:b(()=>[O("預約總時數： "),n(U,{class:"text-h5 font-weight-bold bg-transparent"},{default:b(()=>[O(ne(R.value),1)]),_:1}),O(" 小時 ")]),_:1}),n(Q,{readonly:""},{default:b(()=>[O("總計金額： "),n(U,{class:"text-h5 font-weight-bold bg-transparent"},{default:b(()=>[O(ne(Y.value),1)]),_:1}),O(" 元 ")]),_:1}),n(q,{class:"w-40 mt-5",type:"submit",color:"green",loading:A(fe)},{default:b(()=>[O("送出預約")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1},8,["class"])]),_:1})]),_:1}))}},at=ua(Wa,[["__scopeId","data-v-dc8771ad"]]);export{at as default};
