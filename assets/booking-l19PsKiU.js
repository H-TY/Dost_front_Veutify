import{p as Q,aB as be,q as J,I as b,s as le,e as t,k as q,aH as ca,z as va,aK as Fe,K as Pe,aL as ma,aM as fa,r as M,aN as ga,aO as ve,H as ue,O as De,a3 as Le,S as de,aP as je,X as ze,W as R,L as Ke,aQ as ha,P as Xe,an as xe,aA as ce,aR as ka,aS as pa,aT as Ie,F as te,aU as ba,aV as ye,aW as ya,aX as Va,aY as xa,aZ as Pa,b as Da,u as _a,a as Sa,i as wa,ao as Ca,o as W,d as ee,w as B,h as Me,f as y,j as ie,a6 as Ve,Z as E,a0 as Na,a1 as Ta,a5 as G,a2 as Be,a4 as Ia,c as Ae,au as Ma}from"./index-DqTNIFwe.js";import{u as Ba}from"./bookingOrder-CJLZ7Bmw.js";import{_ as Aa}from"./dogsCard-DvXIBB8z.js";import{c as Ya,a as ae,d as Oa,b as Ye,e as $a,u as Ua,f as $,V as Ha}from"./vee-validate.esm-B1XzqZEw.js";import{_ as Oe,a as Wa}from"./orderInfoCard-VFQjHx4Y.js";import{P as Ra,N as Ea}from"./pagination-tlttRCMl.js";import{V as qa}from"./VRow-CEUJRgoB.js";import{V as re}from"./VCol-DLidg8Uj.js";import{a as $e,V as Fa}from"./VTextarea-kHEo40dJ.js";import{V as La}from"./VDivider-BTImqqiA.js";import{V as ja}from"./VContainer-B7AzpPWG.js";import"./VCheckboxBtn-CAm5W8wT.js";const Ze=Q({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:be,default:"$next"},prevIcon:{type:be,default:"$prev"},modeIcon:{type:be,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Ue=J()({name:"VDatePickerControls",props:Ze(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,n){let{emit:k}=n;const o=b(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=b(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),c=b(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),u=b(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function s(){k("click:prev")}function r(){k("click:next")}function l(){k("click:year")}function i(){k("click:month")}return le(()=>t("div",{class:["v-date-picker-controls"]},[t(q,{class:"v-date-picker-controls__month-btn",disabled:o.value,text:e.text,variant:"text",rounded:!0,onClick:i},null),t(q,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:l},null),t(ca,{key:"mode-spacer"},null),t("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[t(q,{disabled:c.value,icon:e.prevIcon,variant:"text",onClick:s},null),t(q,{disabled:u.value,icon:e.nextIcon,variant:"text",onClick:r},null)])])),{}}}),za=Q({appendIcon:String,color:String,header:String,transition:String,onClick:ma()},"VDatePickerHeader"),He=J()({name:"VDatePickerHeader",props:za(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,n){let{emit:k,slots:o}=n;const{backgroundColorClasses:a,backgroundColorStyles:c}=va(e,"color");function u(){k("click")}function s(){k("click:append")}return le(()=>{const r=!!(o.default||e.header),l=!!(o.append||e.appendIcon);return t("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},a.value],style:c.value,onClick:u},[o.prepend&&t("div",{key:"prepend",class:"v-date-picker-header__prepend"},[o.prepend()]),r&&t(Fe,{key:"content",name:e.transition},{default:()=>{var i;return[t("div",{key:e.header,class:"v-date-picker-header__content"},[((i=o.default)==null?void 0:i.call(o))??e.header])]}}),l&&t("div",{class:"v-date-picker-header__append"},[o.append?t(Pe,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var i;return[(i=o.append)==null?void 0:i.call(o)]}}):t(q,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:s},null)])])}),{}}}),Ge=Q({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...fa()},"VDatePickerMonth"),We=J()({name:"VDatePickerMonth",props:Ge(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,n){let{emit:k,slots:o}=n;const a=M(),{daysInMonth:c,model:u,weekNumbers:s}=ga(e),r=ve(),l=ue(),i=ue(),V=ue(!1),h=b(()=>V.value?e.reverseTransition:e.transition);e.multiple==="range"&&u.value.length>0&&(l.value=u.value[0],u.value.length>1&&(i.value=u.value[u.value.length-1]));const S=b(()=>{const x=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return u.value.length>=x});De(c,(x,d)=>{d&&(V.value=r.isBefore(x[0].date,d[0].date))});function N(x){const d=r.startOfDay(x);if(u.value.length===0?l.value=void 0:u.value.length===1&&(l.value=u.value[0],i.value=void 0),!l.value)l.value=d,u.value=[l.value];else if(i.value)l.value=x,i.value=void 0,u.value=[l.value];else{if(r.isSameDay(d,l.value)){l.value=void 0,u.value=[];return}else r.isBefore(d,l.value)?(i.value=r.endOfDay(l.value),l.value=d):i.value=r.endOfDay(d);const w=r.getDiff(i.value,l.value,"days"),U=[l.value];for(let Y=1;Y<w;Y++){const X=r.addDays(l.value,Y);U.push(X)}U.push(i.value),u.value=U}}function I(x){const d=u.value.findIndex(w=>r.isSameDay(w,x));if(d===-1)u.value=[...u.value,x];else{const w=[...u.value];w.splice(d,1),u.value=w}}function A(x){e.multiple==="range"?N(x):e.multiple?I(x):u.value=[x]}return()=>t("div",{class:"v-date-picker-month"},[e.showWeek&&t("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&t("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[Le(" ")]),s.value.map(x=>t("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[x]))]),t(Fe,{name:h.value},{default:()=>{var x;return[t("div",{ref:a,key:(x=c.value[0].date)==null?void 0:x.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&r.getWeekdays(e.firstDayOfWeek).map(d=>t("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[d])),c.value.map((d,w)=>{const U={props:{onClick:()=>A(d.date)},item:d,i:w};return S.value&&!d.isSelected&&(d.isDisabled=!0),t("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":d.isAdjacent,"v-date-picker-month__day--hide-adjacent":d.isHidden,"v-date-picker-month__day--selected":d.isSelected,"v-date-picker-month__day--week-end":d.isWeekEnd,"v-date-picker-month__day--week-start":d.isWeekStart}],"data-v-date":d.isDisabled?void 0:d.isoDate},[(e.showAdjacentMonths||!d.isAdjacent)&&t(Pe,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(d.isSelected||d.isToday)&&!d.isDisabled?e.color:void 0,disabled:d.isDisabled,icon:!0,ripple:!1,text:d.localized,variant:d.isDisabled?d.isToday?"outlined":"text":d.isToday&&!d.isSelected?"outlined":"flat",onClick:()=>A(d.date)}}},{default:()=>{var Y;return[((Y=o.day)==null?void 0:Y.call(o,U))??t(q,U.props,null)]}})])})])]}})])}}),Qe=Q({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Re=J()({name:"VDatePickerMonths",props:Qe(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:k,slots:o}=n;const a=ve(),c=de(e,"modelValue"),u=b(()=>{let s=a.startOfYear(a.date());return e.year&&(s=a.setYear(s,e.year)),je(12).map(r=>{const l=a.format(s,"monthShort"),i=!!(e.min&&a.isAfter(a.startOfMonth(a.date(e.min)),s)||e.max&&a.isAfter(s,a.startOfMonth(a.date(e.max))));return s=a.getNextMonth(s),{isDisabled:i,text:l,value:r}})});return ze(()=>{c.value=c.value??a.getMonth(a.date())}),le(()=>t("div",{class:"v-date-picker-months",style:{height:Ke(e.height)}},[t("div",{class:"v-date-picker-months__content"},[u.value.map((s,r)=>{var V;const l={active:c.value===r,color:c.value===r?e.color:void 0,disabled:s.isDisabled,rounded:!0,text:s.text,variant:c.value===s.value?"flat":"text",onClick:()=>i(r)};function i(h){if(c.value===h){k("update:modelValue",c.value);return}c.value=h}return((V=o.month)==null?void 0:V.call(o,{month:s,i:r,props:l}))??t(q,R({key:"month"},l),null)})])])),{}}}),Je=Q({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),Ee=J()({name:"VDatePickerYears",props:Je(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:k,slots:o}=n;const a=ve(),c=de(e,"modelValue"),u=b(()=>{const r=a.getYear(a.date());let l=r-100,i=r+52;e.min&&(l=a.getYear(a.date(e.min))),e.max&&(i=a.getYear(a.date(e.max)));let V=a.startOfYear(a.date());return V=a.setYear(V,l),je(i-l+1,l).map(h=>{const S=a.format(V,"year");return V=a.setYear(V,a.getYear(V)+1),{text:S,value:h}})});ze(()=>{c.value=c.value??a.getYear(a.date())});const s=ha();return Xe(async()=>{var r;await xe(),(r=s.el)==null||r.scrollIntoView({block:"center"})}),le(()=>t("div",{class:"v-date-picker-years",style:{height:Ke(e.height)}},[t("div",{class:"v-date-picker-years__content"},[u.value.map((r,l)=>{var V;const i={ref:c.value===r.value?s:void 0,active:c.value===r.value,color:c.value===r.value?e.color:void 0,rounded:!0,text:r.text,variant:c.value===r.value?"flat":"text",onClick:()=>{if(c.value===r.value){k("update:modelValue",c.value);return}c.value=r.value}};return((V=o.year)==null?void 0:V.call(o,{year:r,i:l,props:i}))??t(q,R({key:"month"},i),null)})])])),{}}}),Ka=Q({header:{type:String,default:"$vuetify.datePicker.header"},...Ze(),...Ge({weeksInMonth:"static"}),...ce(Qe(),["modelValue"]),...ce(Je(),["modelValue"]),...ka({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),qe=J()({name:"VDatePicker",props:Ka(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:k,slots:o}=n;const a=ve(),{t:c}=pa(),u=de(e,"modelValue",void 0,m=>ye(m),m=>e.multiple?m:m[0]),s=de(e,"viewMode"),r=b(()=>{var T;const m=a.date((T=u.value)==null?void 0:T[0]);return m&&a.isValid(m)?m:a.date()}),l=M(Number(e.month??a.getMonth(a.startOfMonth(r.value)))),i=M(Number(e.year??a.getYear(a.startOfYear(a.setMonth(r.value,l.value))))),V=ue(!1),h=b(()=>e.multiple&&u.value.length>1?c("$vuetify.datePicker.itemsSelected",u.value.length):u.value[0]&&a.isValid(u.value[0])?a.format(a.date(u.value[0]),"normalDateWithWeekday"):c(e.header)),S=b(()=>{let m=a.date();return m=a.setDate(m,1),m=a.setMonth(m,l.value),m=a.setYear(m,i.value),a.format(m,"monthAndYear")}),N=b(()=>`date-picker-header${V.value?"-reverse":""}-transition`),I=b(()=>{const m=a.date(e.min);return e.min&&a.isValid(m)?m:null}),A=b(()=>{const m=a.date(e.max);return e.max&&a.isValid(m)?m:null}),x=b(()=>{if(e.disabled)return!0;const m=[];if(s.value!=="month")m.push("prev","next");else{let T=a.date();if(T=a.setYear(T,i.value),T=a.setMonth(T,l.value),I.value){const p=a.addDays(a.startOfMonth(T),-1);a.isAfter(I.value,p)&&m.push("prev")}if(A.value){const p=a.addDays(a.endOfMonth(T),1);a.isAfter(p,A.value)&&m.push("next")}}return m});function d(){l.value<11?l.value++:(i.value++,l.value=0,L(i.value)),O(l.value)}function w(){l.value>0?l.value--:(i.value--,l.value=11,L(i.value)),O(l.value)}function U(){s.value="month"}function Y(){s.value=s.value==="months"?"month":"months"}function X(){s.value=s.value==="year"?"month":"year"}function O(m){s.value==="months"&&Y(),k("update:month",m)}function L(m){s.value==="year"&&X(),k("update:year",m)}return De(u,(m,T)=>{const p=ye(T),j=ye(m);if(!j.length)return;const z=a.date(p[p.length-1]),K=a.date(j[j.length-1]),F=a.getMonth(K),P=a.getYear(K);F!==l.value&&(l.value=F,O(l.value)),P!==i.value&&(i.value=P,L(i.value)),V.value=a.isBefore(z,K)}),le(()=>{const m=Ie.filterProps(e),T=Ue.filterProps(e),p=He.filterProps(e),j=We.filterProps(e),z=ce(Re.filterProps(e),["modelValue"]),K=ce(Ee.filterProps(e),["modelValue"]),F={header:h.value,transition:N.value};return t(Ie,R(m,{class:["v-date-picker",`v-date-picker--${s.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var P;return((P=o.title)==null?void 0:P.call(o))??t("div",{class:"v-date-picker__title"},[c(e.title)])},header:()=>o.header?t(Pe,{defaults:{VDatePickerHeader:{...F}}},{default:()=>{var P;return[(P=o.header)==null?void 0:P.call(o,F)]}}):t(He,R({key:"header"},p,F,{onClick:s.value!=="month"?U:void 0}),{...o,default:void 0}),default:()=>t(te,null,[t(Ue,R(T,{disabled:x.value,text:S.value,"onClick:next":d,"onClick:prev":w,"onClick:month":Y,"onClick:year":X}),null),t(ba,{hideOnLeave:!0},{default:()=>[s.value==="months"?t(Re,R({key:"date-picker-months"},z,{modelValue:l.value,"onUpdate:modelValue":[P=>l.value=P,O],min:I.value,max:A.value,year:i.value}),null):s.value==="year"?t(Ee,R({key:"date-picker-years"},K,{modelValue:i.value,"onUpdate:modelValue":[P=>i.value=P,L],min:I.value,max:A.value}),null):t(We,R({key:"date-picker-month"},j,{modelValue:u.value,"onUpdate:modelValue":P=>u.value=P,month:l.value,"onUpdate:month":[P=>l.value=P,O],year:i.value,"onUpdate:year":[P=>i.value=P,L],min:I.value,max:A.value}),null)]})]),actions:o.actions})}),{}}});function Xa(e){let{swiper:n,extendParams:k,emit:o,on:a}=e,c=!1;const u=ya(),s=Va();k({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(h,S){if(n.virtual&&n.params.virtual.enabled){const N=n.slides.filter(A=>A.getAttribute("data-hash")===S)[0];return N?parseInt(N.getAttribute("data-swiper-slide-index"),10):0}return n.getSlideIndex(xa(n.slidesEl,`.${n.params.slideClass}[data-hash="${S}"], swiper-slide[data-hash="${S}"]`)[0])}}});const r=()=>{o("hashChange");const h=u.location.hash.replace("#",""),S=n.virtual&&n.params.virtual.enabled?n.slidesEl.querySelector(`[data-swiper-slide-index="${n.activeIndex}"]`):n.slides[n.activeIndex],N=S?S.getAttribute("data-hash"):"";if(h!==N){const I=n.params.hashNavigation.getSlideIndex(n,h);if(typeof I>"u"||Number.isNaN(I))return;n.slideTo(I)}},l=()=>{if(!c||!n.params.hashNavigation.enabled)return;const h=n.virtual&&n.params.virtual.enabled?n.slidesEl.querySelector(`[data-swiper-slide-index="${n.activeIndex}"]`):n.slides[n.activeIndex],S=h?h.getAttribute("data-hash")||h.getAttribute("data-history"):"";n.params.hashNavigation.replaceState&&s.history&&s.history.replaceState?(s.history.replaceState(null,null,`#${S}`||""),o("hashSet")):(u.location.hash=S||"",o("hashSet"))},i=()=>{if(!n.params.hashNavigation.enabled||n.params.history&&n.params.history.enabled)return;c=!0;const h=u.location.hash.replace("#","");if(h){const N=n.params.hashNavigation.getSlideIndex(n,h);n.slideTo(N||0,0,n.params.runCallbacksOnInit,!0)}n.params.hashNavigation.watchState&&s.addEventListener("hashchange",r)},V=()=>{n.params.hashNavigation.watchState&&s.removeEventListener("hashchange",r)};a("init",()=>{n.params.hashNavigation.enabled&&i()}),a("destroy",()=>{n.params.hashNavigation.enabled&&V()}),a("transitionEnd _freeModeNoMomentumRelease",()=>{c&&l()}),a("slideChange",()=>{c&&n.params.cssMode&&l()})}function Za(e,n){const k=b(()=>({times:e.value||e||[],price:n.value.price||0})),o=2,a=b(()=>k.value.times.length*o),c=b(()=>k.value.times.length*k.value.price);return{totalBTime:a,totalBPrice:c}}function Ga(e,n,k){const{totalBTime:o,totalBPrice:a}=Za(n,k),c=b(()=>e.value===null||isNaN(e.value.getTime())?"":e.value.toLocaleDateString()),u=b(()=>n.value.sort((l,i)=>parseInt(l)-parseInt(i)).join(`
`)),s=b(()=>`${o.value} 小時`),r=b(()=>`${a.value} 元`);return{totalBTime:o,totalBPrice:a,chooseBDate:c,BTimeTxt:u,totalBTimeTxt:s,totalBPriceTxt:r}}const Qa={id:"booking",class:"booking"},Ja={class:"notice"},et=E("p",null,"當天日期無法預約，若有需求，請來電洽詢，謝謝！",-1),at={class:"box pb-6"},tt={class:"d-flex flex-row justify-center align-baseline"},lt=E("p",null,"預約狗狗：",-1),nt=["src"],ot={class:"choose-time-dialog-txt"},st=E("h4",null,"可預約時段",-1),bt={__name:"booking",setup(e){const n=Pa(),k=Da(),{mobile:o,sm:a}=_a(),{backApi:c,apiAuth:u}=Ma(),s=Sa(),r=Ba(),l=wa(),i=[Ra,Ea,Xa],V=b(()=>s.isLogin?s.account:"Guest"),h=M(null),S=M(new Date),N=M("預約日期"),I=M(window.innerWidth);function A(){if(h.value===null||isNaN(h.value.getTime()))return I.value>576?N.value="預約日期（請於左側日期表選擇）":N.value="選擇預約日期"}De(h,(f,v)=>{(!(f instanceof Date)||!(v instanceof Date)||f.toLocaleDateString()!=v.toLocaleDateString())&&(Z.value=!1)});const x=f=>f>S.value,d=M([]),w=M([]);(async()=>{var f,v;try{const{data:C}=await c.get("/dogs");w.value.splice(0,w.value.length,...C.result.data),L()}catch(C){console.log(C),l({text:((v=(f=C==null?void 0:C.response)==null?void 0:f.data)==null?void 0:v.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const Y=M(null);function X(f){Y.value=f}const O=n.query.id;function L(){if(O){if(!O)return;const f=w.value.findIndex(v=>v._id===O);if(f===-1)return;Y.value.slideTo(f,0,!1),z(O)}else m()}function m(){var v;const f=(v=w.value[0])==null?void 0:v._id;z(f)}const T=()=>{const f=window.location.hash.split("#")[2];z(f)},p=M({_id:"",image:"",dogName:"",age:0,price:0,booking:!0,bookingTime:[],feature:"",sell:!0,counter:0}),j=b(()=>p.value.image),z=async f=>{var v,C;Se();try{await xe();const{data:_}=await c.get("/dogs/"+f);p.value._id=_.result._id,p.value.image=_.result.image,p.value.dogName=_.result.dogName,p.value.age=_.result.age,p.value.price=_.result.price,p.value.booking=_.result.booking,p.value.bookingTime=_.result.bookingTime,p.value.feature=_.result.feature,p.value.sell=_.result.sell,p.value.counter=_.result.counter}catch(_){console.log(_),l({text:((C=(v=_==null?void 0:_.response)==null?void 0:v.data)==null?void 0:C.message)||"發生錯誤",snackbarProps:{color:"red"}})}},{totalBTime:K,totalBPrice:F,chooseBDate:P,BTimeTxt:_e,totalBTimeTxt:ea,totalBPriceTxt:aa}=Ga(h,d,p),ne=M(!1),Z=M(!1),me=(f,v)=>{var g;const C=Number(P.value.split("/").pop()),_=Number((g=f.target.closest("[data-v-date]"))==null?void 0:g.dataset.vDate.split("-").pop());v=="預約日期"?Z.value=!0:(v=="預約時段"||_===C)&&(ne.value=!0)},fe=Ca({}),oe=M(!1),ta=()=>{oe.value=!0},ge=f=>{switch(f){case"dataDialog":Z.value=!1;break;case"chooseTimeDialog":ne.value=!1;break;case"dialogOrderInfo":oe.value=!1;break;default:console.warn("不存在的 dialogName:",f)}};function Se(){h.value=null,d.value=[]}const la=Ya({name:ae().required("預約人名字必填"),phone:ae().required("預約人電話必填"),dogName:ae().required("狗狗名字必填"),bookingDate:ae().required("預約日期必填"),bookingTime:Oa().required("預約時段必填").min(1,"預約時段必填"),totalBookingTime:Ye().required("預約總時數必填").typeError("預約總時數格式錯誤").min(1,"預約總時數不能小於 1"),totalPrice:Ye().required("預約總金額必填").typeError("預約總金額格式錯誤").min(1,"預約總金額不能小於 1"),accountName:ae().required("帳戶名稱必填"),orderStatus:$a().required("訂單狀態必填")}),{handleSubmit:na,isSubmitting:we,resetForm:oa}=Ua({validationSchema:la,initialValues:{name:V.value,phone:"",image:"",dogName:"",bookingDate:"",bookingTime:[],totalBookingTime:0,totalPrice:0,accountName:V.value,orderStatus:!0}}),se=$("name"),he=$("phone"),sa=$("image"),ia=$("dogName"),ke=$("bookingDate"),pe=$("bookingTime"),Ce=$("totalBookingTime"),Ne=$("totalPrice");$("accountName"),$("orderStatus");function ra(){sa.value.value=p.value.image,ia.value.value=p.value.dogName,ke.value.value=P.value,pe.value.value=d.value,Ce.value.value=K.value,Ne.value.value=F.value}const ua=na(async f=>{var v,C,_,g;try{if(!s.isLogin){console.log("User.isLogin",s.isLogin),l({text:"請先登入會員",snackbarProps:{color:"red"}}),k.push("/login");return}const D=new FormData;D.append("name",f.name),D.append("phone",f.phone),D.append("image",f.image),D.append("dogName",f.dogName),D.append("bookingDate",f.bookingDate),D.append("bookingTime",f.bookingTime),D.append("totalBookingTime",f.totalBookingTime),D.append("totalPrice",f.totalPrice),D.append("accountName",f.accountName),D.append("orderStatus",f.orderStatus);const H=await r.createBookingOrder(D),da={infor:[{title:"訂單編號",value:H.data.result.bookingOrderNumber},{title:"預約人",value:H.data.result.name},{title:"電話",value:H.data.result.phone},{title:"預約狗狗",value:H.data.result.dogName},{title:"預約日期",value:H.data.result.bookingDate},{title:"預約時段",value:H.data.result.bookingTime[0].replace(/,/g,`
`)},{title:"預約總金額",value:H.data.result.totalPrice+" 元"}],img:H.data.result.image};Object.assign(fe,da),ta(),l({text:H.text,snackbarProps:{color:"green"}}),oa(),Se()}catch(D){console.log("error",D),console.log("error?.response?.data?.message",(C=(v=D==null?void 0:D.response)==null?void 0:v.data)==null?void 0:C.message),l({text:((g=(_=D==null?void 0:D.response)==null?void 0:_.data)==null?void 0:g.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),Te=b(()=>({myClass:se.value.value.length>0}));return Xe(async()=>{await xe(),requestAnimationFrame(()=>{A()})}),(f,v)=>{const C=Ae("swiper-slide"),_=Ae("swiper");return W(),ee("section",Qa,[t(ja,null,{default:B(()=>[t(_,{class:"dogSwiper",centeredSlides:!0,spaceBetween:30,pagination:{clickable:!0},navigation:!0,hashNavigation:{replaceState:!0,watchState:!0},breakpoints:{0:{slidesPerView:1},576:{slidesPerView:"auto"}},modules:i,onSwiper:X,onSlideChangeTransitionEnd:T},{default:B(()=>[(W(!0),ee(te,null,Me(w.value,g=>(W(),ie(C,{"data-hash":`/booking#${g._id}`},{default:B(()=>[t(Aa,R({ref_for:!0},g),null,16)]),_:2},1032,["data-hash"]))),256))]),_:1}),t(qa,{class:"booking-area"},{default:B(()=>[t(re,{md:"6"},{default:B(()=>[y(o)?(W(),ie(Ve,{key:0,class:"data-dialog",modelValue:Z.value,"onUpdate:modelValue":v[1]||(v[1]=g=>Z.value=g)},{default:B(()=>[t(qe,{modelValue:h.value,"onUpdate:modelValue":v[0]||(v[0]=g=>h.value=g),"allowed-dates":x},null,8,["modelValue"]),t(Oe,{dialogName:"dataDialog",onClose:ge})]),_:1},8,["modelValue"])):(W(),ie(qe,{key:1,modelValue:h.value,"onUpdate:modelValue":v[2]||(v[2]=g=>h.value=g),onClick:me,"allowed-dates":x},null,8,["modelValue"])),E("div",Ja,[t(Na,{icon:"mdi-message-alert"}),et])]),_:1}),t(re,{md:"6"},{default:B(()=>[t(Ha,{class:"booking-form",onSubmit:Ta(y(ua),["prevent"]),disabled:y(we)},{default:B(()=>[t(G,{label:"預約人姓名",variant:"underlined",class:Be(Te.value),modelValue:y(se).value.value,"onUpdate:modelValue":v[3]||(v[3]=g=>y(se).value.value=g),"error-messages":y(se).errorMessage.value},null,8,["class","modelValue","error-messages"]),t(G,{label:"預約人電話",variant:"underlined",class:Be(Te.value),modelValue:y(he).value.value,"onUpdate:modelValue":v[4]||(v[4]=g=>y(he).value.value=g),"error-messages":y(he).errorMessage.value},null,8,["class","modelValue","error-messages"]),E("div",at,[t(re,null,{default:B(()=>[E("div",tt,[lt,E("h6",null,Ia(p.value.dogName),1)])]),_:1}),t(re,null,{default:B(()=>[E("img",{src:j.value},null,8,nt)]),_:1})]),y(o)?(W(),ee(te,{key:0},[t(G,{label:N.value,readonly:"",variant:"underlined",onClick:v[5]||(v[5]=g=>me(g,"預約日期")),"model-value":y(P),"error-messages":y(ke).errorMessage.value},null,8,["label","model-value","error-messages"]),t($e,{label:"預約時段",readonly:"",textarea:"","auto-grow":"",rows:"1",variant:"underlined","model-value":y(_e),"error-messages":y(pe).errorMessage.value,onClick:v[6]||(v[6]=g=>me(g,"預約時段"))},null,8,["model-value","error-messages"])],64)):(W(),ee(te,{key:1},[t(G,{label:N.value,disabled:"",variant:"underlined","model-value":y(P),"error-messages":y(ke).errorMessage.value},null,8,["label","model-value","error-messages"]),t($e,{label:"預約時段",disabled:"",textarea:"","auto-grow":"",rows:"1",variant:"underlined","model-value":y(_e),"error-messages":y(pe).errorMessage.value},null,8,["model-value","error-messages"])],64)),t(G,{label:" 預約總時數",disabled:"",variant:"underlined","model-value":y(ea),"error-messages":y(Ce).errorMessage.value},null,8,["model-value","error-messages"]),t(G,{label:"總計金額",disabled:"",variant:"underlined","model-value":y(aa),"error-messages":y(Ne).errorMessage.value},null,8,["model-value","error-messages"]),t(q,{class:"submit-btn",type:"submit",onClick:ra,loading:y(we)},{default:B(()=>[Le("送出預約")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1}),t(Ve,{class:"choose-time-dialog",modelValue:ne.value,"onUpdate:modelValue":v[8]||(v[8]=g=>ne.value=g)},{default:B(()=>[E("div",ot,[st,t(La),(W(!0),ee(te,null,Me(p.value.bookingTime.join(" ").split(",").sort((g,D)=>parseInt(g)-parseInt(D)),g=>(W(),ie(Fa,{"hide-details":"",modelValue:d.value,"onUpdate:modelValue":v[7]||(v[7]=D=>d.value=D),label:g,value:g,"false-icon":"mdi-paw-outline","true-icon":"mdi-paw"},null,8,["modelValue","label","value"]))),256)),t(Oe,{dialogName:"chooseTimeDialog",onClose:ge})])]),_:1},8,["modelValue"]),t(Ve,{modelValue:oe.value,"onUpdate:modelValue":v[9]||(v[9]=g=>oe.value=g)},{default:B(()=>[t(y(Wa),{class:"order-info",bigTitle:"已成功預約",orderInfoData:fe.infor,orderInfoDataImg:fe.img,dialogClose:ge},null,8,["orderInfoData","orderInfoDataImg"])]),_:1},8,["modelValue"])]),_:1})])}}};export{bt as default};
