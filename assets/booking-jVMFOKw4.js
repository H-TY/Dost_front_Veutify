import{p as X,ar as ie,q as K,I as C,s as ee,e as n,k as q,aN as qe,z as Oe,aR as Se,K as ue,aS as We,aT as Le,r as H,aU as je,aV as se,H as te,O as j,a2 as T,S as ne,aW as _e,X as Pe,W as U,L as De,aX as Fe,P as Ce,al as Ne,aq as le,aY as ze,aZ as Qe,a_ as ve,F as de,a$ as Xe,b0 as re,_ as Ke,a as Ze,i as Ge,o as Z,j as oe,w as S,d as me,g as he,h as Y,aH as Je,V as z,a0 as ea,a1 as aa,a5 as Q,a4 as fe,a3 as ae,b1 as ta,b as na,aQ as la,a6 as sa,a7 as ia,a8 as Ie}from"./index-CJxWybx8.js";import{_ as ra}from"./dogsCard-DC7wCKXQ.js";import{c as oa,a as G,d as da,b as pe,u as ua,f as L,V as ke}from"./vee-validate.esm-CGTl6MnF.js";import{b as J,d as ca,f as va,P as ma,N as ha,S as fa,a as pa}from"./pagination-DuqvsfRd.js";import{V as ge}from"./VCol-XXgwFep7.js";import{V as ka}from"./VDivider-BbeXBr5r.js";import{a as ga}from"./VList-FUvkB6vJ.js";import{V as ya}from"./VRow-CaLyweUP.js";import{V as ba}from"./VContainer-CL8ww1Zu.js";import{V as xa}from"./VCheckbox-C7Xninb6.js";import"./VCheckboxBtn-D230jcZU.js";const Me=X({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:ie,default:"$next"},prevIcon:{type:ie,default:"$prev"},modeIcon:{type:ie,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),ye=K()({name:"VDatePickerControls",props:Me(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,a){let{emit:_}=a;const d=C(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),t=C(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),c=C(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=C(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function v(){_("click:prev")}function o(){_("click:next")}function l(){_("click:year")}function r(){_("click:month")}return ee(()=>n("div",{class:["v-date-picker-controls"]},[n(q,{class:"v-date-picker-controls__month-btn",disabled:d.value,text:e.text,variant:"text",rounded:!0,onClick:r},null),n(q,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:t.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:l},null),n(qe,{key:"mode-spacer"},null),n("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[n(q,{disabled:c.value,icon:e.prevIcon,variant:"text",onClick:v},null),n(q,{disabled:i.value,icon:e.nextIcon,variant:"text",onClick:o},null)])])),{}}}),Va=X({appendIcon:String,color:String,header:String,transition:String,onClick:We()},"VDatePickerHeader"),be=K()({name:"VDatePickerHeader",props:Va(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,a){let{emit:_,slots:d}=a;const{backgroundColorClasses:t,backgroundColorStyles:c}=Oe(e,"color");function i(){_("click")}function v(){_("click:append")}return ee(()=>{const o=!!(d.default||e.header),l=!!(d.append||e.appendIcon);return n("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},t.value],style:c.value,onClick:i},[d.prepend&&n("div",{key:"prepend",class:"v-date-picker-header__prepend"},[d.prepend()]),o&&n(Se,{key:"content",name:e.transition},{default:()=>{var r;return[n("div",{key:e.header,class:"v-date-picker-header__content"},[((r=d.default)==null?void 0:r.call(d))??e.header])]}}),l&&n("div",{class:"v-date-picker-header__append"},[d.append?n(ue,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var r;return[(r=d.append)==null?void 0:r.call(d)]}}):n(q,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:v},null)])])}),{}}}),Te=X({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...Le()},"VDatePickerMonth"),xe=K()({name:"VDatePickerMonth",props:Te(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,a){let{emit:_,slots:d}=a;const t=H(),{daysInMonth:c,model:i,weekNumbers:v}=je(e),o=se(),l=te(),r=te(),y=te(!1),x=C(()=>y.value?e.reverseTransition:e.transition);e.multiple==="range"&&i.value.length>0&&(l.value=i.value[0],i.value.length>1&&(r.value=i.value[i.value.length-1]));const m=C(()=>{const g=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return i.value.length>=g});j(c,(g,s)=>{s&&(y.value=o.isBefore(g[0].date,s[0].date))});function N(g){const s=o.startOfDay(g);if(i.value.length===0?l.value=void 0:i.value.length===1&&(l.value=i.value[0],r.value=void 0),!l.value)l.value=s,i.value=[l.value];else if(r.value)l.value=g,r.value=void 0,i.value=[l.value];else{if(o.isSameDay(s,l.value)){l.value=void 0,i.value=[];return}else o.isBefore(s,l.value)?(r.value=o.endOfDay(l.value),l.value=s):r.value=o.endOfDay(s);const P=o.getDiff(r.value,l.value,"days"),V=[l.value];for(let A=1;A<P;A++){const I=o.addDays(l.value,A);V.push(I)}V.push(r.value),i.value=V}}function h(g){const s=i.value.findIndex(P=>o.isSameDay(P,g));if(s===-1)i.value=[...i.value,g];else{const P=[...i.value];P.splice(s,1),i.value=P}}function b(g){e.multiple==="range"?N(g):e.multiple?h(g):i.value=[g]}return()=>n("div",{class:"v-date-picker-month"},[e.showWeek&&n("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&n("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[T(" ")]),v.value.map(g=>n("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[g]))]),n(Se,{name:x.value},{default:()=>{var g;return[n("div",{ref:t,key:(g=c.value[0].date)==null?void 0:g.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&o.getWeekdays(e.firstDayOfWeek).map(s=>n("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[s])),c.value.map((s,P)=>{const V={props:{onClick:()=>b(s.date)},item:s,i:P};return m.value&&!s.isSelected&&(s.isDisabled=!0),n("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":s.isAdjacent,"v-date-picker-month__day--hide-adjacent":s.isHidden,"v-date-picker-month__day--selected":s.isSelected,"v-date-picker-month__day--week-end":s.isWeekEnd,"v-date-picker-month__day--week-start":s.isWeekStart}],"data-v-date":s.isDisabled?void 0:s.isoDate},[(e.showAdjacentMonths||!s.isAdjacent)&&n(ue,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(s.isSelected||s.isToday)&&!s.isDisabled?e.color:void 0,disabled:s.isDisabled,icon:!0,ripple:!1,text:s.localized,variant:s.isDisabled?s.isToday?"outlined":"text":s.isToday&&!s.isSelected?"outlined":"flat",onClick:()=>b(s.date)}}},{default:()=>{var A;return[((A=d.day)==null?void 0:A.call(d,V))??n(q,V.props,null)]}})])})])]}})])}}),Ae=X({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Ve=K()({name:"VDatePickerMonths",props:Ae(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:_,slots:d}=a;const t=se(),c=ne(e,"modelValue"),i=C(()=>{let v=t.startOfYear(t.date());return e.year&&(v=t.setYear(v,e.year)),_e(12).map(o=>{const l=t.format(v,"monthShort"),r=!!(e.min&&t.isAfter(t.startOfMonth(t.date(e.min)),v)||e.max&&t.isAfter(v,t.startOfMonth(t.date(e.max))));return v=t.getNextMonth(v),{isDisabled:r,text:l,value:o}})});return Pe(()=>{c.value=c.value??t.getMonth(t.date())}),ee(()=>n("div",{class:"v-date-picker-months",style:{height:De(e.height)}},[n("div",{class:"v-date-picker-months__content"},[i.value.map((v,o)=>{var y;const l={active:c.value===o,color:c.value===o?e.color:void 0,disabled:v.isDisabled,rounded:!0,text:v.text,variant:c.value===v.value?"flat":"text",onClick:()=>r(o)};function r(x){if(c.value===x){_("update:modelValue",c.value);return}c.value=x}return((y=d.month)==null?void 0:y.call(d,{month:v,i:o,props:l}))??n(q,U({key:"month"},l),null)})])])),{}}}),$e=X({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),we=K()({name:"VDatePickerYears",props:$e(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:_,slots:d}=a;const t=se(),c=ne(e,"modelValue"),i=C(()=>{const o=t.getYear(t.date());let l=o-100,r=o+52;e.min&&(l=t.getYear(t.date(e.min))),e.max&&(r=t.getYear(t.date(e.max)));let y=t.startOfYear(t.date());return y=t.setYear(y,l),_e(r-l+1,l).map(x=>{const m=t.format(y,"year");return y=t.setYear(y,t.getYear(y)+1),{text:m,value:x}})});Pe(()=>{c.value=c.value??t.getYear(t.date())});const v=Fe();return Ce(async()=>{var o;await Ne(),(o=v.el)==null||o.scrollIntoView({block:"center"})}),ee(()=>n("div",{class:"v-date-picker-years",style:{height:De(e.height)}},[n("div",{class:"v-date-picker-years__content"},[i.value.map((o,l)=>{var y;const r={ref:c.value===o.value?v:void 0,active:c.value===o.value,color:c.value===o.value?e.color:void 0,rounded:!0,text:o.text,variant:c.value===o.value?"flat":"text",onClick:()=>{if(c.value===o.value){_("update:modelValue",c.value);return}c.value=o.value}};return((y=d.year)==null?void 0:y.call(d,{year:o,i:l,props:r}))??n(q,U({key:"month"},r),null)})])])),{}}}),wa=X({header:{type:String,default:"$vuetify.datePicker.header"},...Me(),...Te({weeksInMonth:"static"}),...le(Ae(),["modelValue"]),...le($e(),["modelValue"]),...ze({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Sa=K()({name:"VDatePicker",props:wa(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,a){let{emit:_,slots:d}=a;const t=se(),{t:c}=Qe(),i=ne(e,"modelValue",void 0,f=>re(f),f=>e.multiple?f:f[0]),v=ne(e,"viewMode"),o=C(()=>{var M;const f=t.date((M=i.value)==null?void 0:M[0]);return f&&t.isValid(f)?f:t.date()}),l=H(Number(e.month??t.getMonth(t.startOfMonth(o.value)))),r=H(Number(e.year??t.getYear(t.startOfYear(t.setMonth(o.value,l.value))))),y=te(!1),x=C(()=>e.multiple&&i.value.length>1?c("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&t.isValid(i.value[0])?t.format(t.date(i.value[0]),"normalDateWithWeekday"):c(e.header)),m=C(()=>{let f=t.date();return f=t.setDate(f,1),f=t.setMonth(f,l.value),f=t.setYear(f,r.value),t.format(f,"monthAndYear")}),N=C(()=>`date-picker-header${y.value?"-reverse":""}-transition`),h=C(()=>{const f=t.date(e.min);return e.min&&t.isValid(f)?f:null}),b=C(()=>{const f=t.date(e.max);return e.max&&t.isValid(f)?f:null}),g=C(()=>{if(e.disabled)return!0;const f=[];if(v.value!=="month")f.push("prev","next");else{let M=t.date();if(M=t.setYear(M,r.value),M=t.setMonth(M,l.value),h.value){const $=t.addDays(t.startOfMonth(M),-1);t.isAfter(h.value,$)&&f.push("prev")}if(b.value){const $=t.addDays(t.endOfMonth(M),1);t.isAfter($,b.value)&&f.push("next")}}return f});function s(){l.value<11?l.value++:(r.value++,l.value=0,B(r.value)),E(l.value)}function P(){l.value>0?l.value--:(r.value--,l.value=11,B(r.value)),E(l.value)}function V(){v.value="month"}function A(){v.value=v.value==="months"?"month":"months"}function I(){v.value=v.value==="year"?"month":"year"}function E(f){v.value==="months"&&A(),_("update:month",f)}function B(f){v.value==="year"&&I(),_("update:year",f)}return j(i,(f,M)=>{const $=re(M),F=re(f);if(!F.length)return;const O=t.date($[$.length-1]),R=t.date(F[F.length-1]),W=t.getMonth(R),D=t.getYear(R);W!==l.value&&(l.value=W,E(l.value)),D!==r.value&&(r.value=D,B(r.value)),y.value=t.isBefore(O,R)}),ee(()=>{const f=ve.filterProps(e),M=ye.filterProps(e),$=be.filterProps(e),F=xe.filterProps(e),O=le(Ve.filterProps(e),["modelValue"]),R=le(we.filterProps(e),["modelValue"]),W={header:x.value,transition:N.value};return n(ve,U(f,{class:["v-date-picker",`v-date-picker--${v.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var D;return((D=d.title)==null?void 0:D.call(d))??n("div",{class:"v-date-picker__title"},[c(e.title)])},header:()=>d.header?n(ue,{defaults:{VDatePickerHeader:{...W}}},{default:()=>{var D;return[(D=d.header)==null?void 0:D.call(d,W)]}}):n(be,U({key:"header"},$,W,{onClick:v.value!=="month"?V:void 0}),{...d,default:void 0}),default:()=>n(de,null,[n(ye,U(M,{disabled:g.value,text:m.value,"onClick:next":s,"onClick:prev":P,"onClick:month":A,"onClick:year":I}),null),n(Xe,{hideOnLeave:!0},{default:()=>[v.value==="months"?n(Ve,U({key:"date-picker-months"},O,{modelValue:l.value,"onUpdate:modelValue":[D=>l.value=D,E],min:h.value,max:b.value,year:r.value}),null):v.value==="year"?n(we,U({key:"date-picker-years"},R,{modelValue:r.value,"onUpdate:modelValue":[D=>r.value=D,B],min:h.value,max:b.value}),null):n(xe,U({key:"date-picker-month"},F,{modelValue:i.value,"onUpdate:modelValue":D=>i.value=D,month:l.value,"onUpdate:month":[D=>l.value=D,E],year:r.value,"onUpdate:year":[D=>r.value=D,B],min:h.value,max:b.value}),null)]})]),actions:d.actions})}),{}}});function _a(e){let{swiper:a,extendParams:_,on:d}=e;_({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let t=!1,c={};const i=m=>m.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),v=m=>{const N=J();let h;m?h=new URL(m):h=N.location;const b=h.pathname.slice(1).split("/").filter(V=>V!==""),g=b.length,s=b[g-2],P=b[g-1];return{key:s,value:P}},o=(m,N)=>{const h=J();if(!t||!a.params.history.enabled)return;let b;a.params.url?b=new URL(a.params.url):b=h.location;const g=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${N}"]`):a.slides[N];let s=i(g.getAttribute("data-history"));if(a.params.history.root.length>0){let V=a.params.history.root;V[V.length-1]==="/"&&(V=V.slice(0,V.length-1)),s=`${V}/${m?`${m}/`:""}${s}`}else b.pathname.includes(m)||(s=`${m?`${m}/`:""}${s}`);a.params.history.keepQuery&&(s+=b.search);const P=h.history.state;P&&P.value===s||(a.params.history.replaceState?h.history.replaceState({value:s},null,s):h.history.pushState({value:s},null,s))},l=(m,N,h)=>{if(N)for(let b=0,g=a.slides.length;b<g;b+=1){const s=a.slides[b];if(i(s.getAttribute("data-history"))===N){const V=a.getSlideIndex(s);a.slideTo(V,m,h)}}else a.slideTo(0,m,h)},r=()=>{c=v(a.params.url),l(a.params.speed,c.value,!1)},y=()=>{const m=J();if(a.params.history){if(!m.history||!m.history.pushState){a.params.history.enabled=!1,a.params.hashNavigation.enabled=!0;return}if(t=!0,c=v(a.params.url),!c.key&&!c.value){a.params.history.replaceState||m.addEventListener("popstate",r);return}l(0,c.value,a.params.runCallbacksOnInit),a.params.history.replaceState||m.addEventListener("popstate",r)}},x=()=>{const m=J();a.params.history.replaceState||m.removeEventListener("popstate",r)};d("init",()=>{a.params.history.enabled&&y()}),d("destroy",()=>{a.params.history.enabled&&x()}),d("transitionEnd _freeModeNoMomentumRelease",()=>{t&&o(a.params.history.key,a.activeIndex)}),d("slideChange",()=>{t&&a.params.cssMode&&o(a.params.history.key,a.activeIndex)})}function Pa(e){let{swiper:a,extendParams:_,emit:d,on:t}=e,c=!1;const i=ca(),v=J();_({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(x,m){if(a.virtual&&a.params.virtual.enabled){const N=a.slides.filter(b=>b.getAttribute("data-hash")===m)[0];return N?parseInt(N.getAttribute("data-swiper-slide-index"),10):0}return a.getSlideIndex(va(a.slidesEl,`.${a.params.slideClass}[data-hash="${m}"], swiper-slide[data-hash="${m}"]`)[0])}}});const o=()=>{d("hashChange");const x=i.location.hash.replace("#",""),m=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${a.activeIndex}"]`):a.slides[a.activeIndex],N=m?m.getAttribute("data-hash"):"";if(x!==N){const h=a.params.hashNavigation.getSlideIndex(a,x);if(typeof h>"u"||Number.isNaN(h))return;a.slideTo(h)}},l=()=>{if(!c||!a.params.hashNavigation.enabled)return;const x=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${a.activeIndex}"]`):a.slides[a.activeIndex],m=x?x.getAttribute("data-hash")||x.getAttribute("data-history"):"";a.params.hashNavigation.replaceState&&v.history&&v.history.replaceState?(v.history.replaceState(null,null,`#${m}`||""),d("hashSet")):(i.location.hash=m||"",d("hashSet"))},r=()=>{if(!a.params.hashNavigation.enabled||a.params.history&&a.params.history.enabled)return;c=!0;const x=i.location.hash.replace("#","");if(x){const N=a.params.hashNavigation.getSlideIndex(a,x);a.slideTo(N||0,0,a.params.runCallbacksOnInit,!0)}a.params.hashNavigation.watchState&&v.addEventListener("hashchange",o)},y=()=>{a.params.hashNavigation.watchState&&v.removeEventListener("hashchange",o)};t("init",()=>{a.params.hashNavigation.enabled&&r()}),t("destroy",()=>{a.params.hashNavigation.enabled&&y()}),t("transitionEnd _freeModeNoMomentumRelease",()=>{c&&l()}),t("slideChange",()=>{c&&a.params.cssMode&&l()})}const Ye=e=>(sa("data-v-15a1025e"),e=e(),ia(),e),Da=Ye(()=>Ie("h1",null,"預約狗狗時間",-1)),Ca=Ye(()=>Ie("h3",null,"可預約時段",-1)),Na={__name:"booking",setup(e){const a=ta(),_=na(),{backApi:d,apiAuth:t}=la(),c=Ze(),i=Ge(),v=[ma,ha,Pa,_a],o=C(()=>{if(!c.isLogin){_.push("/login");return}return c.account}),l=H(new Date("")),r=H(new Date),y=C(()=>isNaN(l.value.getTime())?"左側選擇日期":l.value.toLocaleDateString()),x=k=>k>r.value,m=H([]);(async()=>{var k,p;try{const{data:u}=await d.get("/dogs");m.value.splice(0,m.value.length,...u.result.data)}catch(u){console.log(u),i({text:((p=(k=u==null?void 0:u.response)==null?void 0:k.data)==null?void 0:p.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const h=H({_id:"",image:"",dogName:"",age:0,price:0,booking:!0,bookingTime:[],feature:"",sell:!0,counter:0}),b=H(null);j(b,(k,p)=>{if(k!==p)return I.value=[];console.log("哈希newId:",k,"哈希oldId:",p)});const g=()=>{a.query.id?(b.value=a.query.id,window.location.hash=`booking#${a.query.id}`,a.query.id=""):b.value=window.location.hash.substring(10)},s=()=>{g(),P()};Ce(()=>{setTimeout(()=>{g(),P()},500)});const P=async()=>{var k,p;if(b.value!==null)try{await Ne();const{data:u}=await d.get("/dogs/"+b.value);h.value._id=u.result._id,h.value.image=u.result.image,h.value.dogName=u.result.dogName,h.value.age=u.result.age,h.value.price=u.result.price,h.value.booking=u.result.booking,h.value.bookingTime=u.result.bookingTime,h.value.feature=u.result.feature,h.value.sell=u.result.sell,h.value.counter=u.result.counter}catch(u){console.log(u),i({text:((p=(k=u==null?void 0:u.response)==null?void 0:k.data)==null?void 0:p.message)||"發生錯誤",snackbarProps:{color:"red"}})}};P();const V=H(!1),A=k=>{k.target.innerText==y.value.slice(-2)&&(V.value=!0)},I=H([]),E=C(()=>I.value.length*2),B=C(()=>h.value.price*I.value.length),f=oa({name:G().required("預約人名字必填"),phone:G().required("預約人電話必填"),dogName:G().required("狗狗名字必填"),bookingDate:G().required("預約日期必填"),bookingTime:da().required("預約時段必填"),totalBookingTime:pe().required("預約總時數必填").typeError("預約總時數格式錯誤").min(0,"預約總時數不能小於 0"),totalPrice:pe().required("預約總金額必填").typeError("預約總金額格式錯誤").min(0,"預約總金額不能小於 0"),accountName:G().required("帳戶名稱必填")}),{handleSubmit:M,isSubmitting:$,resetForm:F}=ua({validationSchema:f,initialValues:{name:o.value,phone:"",dogName:"",bookingDate:"",bookingTime:[],totalBookingTime:0,totalPrice:0,accountName:""}}),O=L("name"),R=L("phone"),W=L("dogName"),D=L("bookingDate"),Be=L("bookingTime"),He=L("totalBookingTime"),Ee=L("totalPrice"),Re=L("accountName");j(y,(k,p)=>{if(k!==p)return Re.value.value=o.value,W.value.value=h.value.dogName}),j(y,(k,p)=>{if(k!==p)return I.value=[],D.value.value=y.value}),j(I,(k,p)=>{if(k!==p)return Be.value.value=I.value.sort((u,w)=>parseInt(u)-parseInt(w))}),j(E,(k,p)=>{if(k!==p)return He.value.value=E.value}),j(B,(k,p)=>{if(k!==p)return Ee.value.value=B.value});const Ue=M(async k=>{var p,u;try{const w=new FormData;w.append("name",k.name),w.append("phone",k.phone),w.append("dogName",k.dogName),w.append("bookingDate",k.bookingDate),w.append("bookingTime",k.bookingTime),w.append("totalBookingTime",k.totalBookingTime),w.append("totalPrice",k.totalPrice),w.append("accountName",k.accountName),await t.post("/order",w),i({text:"預約成功",snackbarProps:{color:"green"}}),F(),y.value=NaN,I.value=[],B.value=0}catch(w){console.log(w),i({text:((u=(p=w==null?void 0:w.response)==null?void 0:p.data)==null?void 0:u.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),ce=C(()=>({myClass:O.value.value.length>0}));return(k,p)=>(Z(),oe(ba,{class:"text-center my-8"},{default:S(()=>[Da,n(Y(fa),{slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,pagination:{clickable:!0},navigation:!0,hashNavigation:{replaceState:!0,watchState:!0},modules:v,onSlideChangeTransitionEnd:s,class:"mySwiper my-10"},{default:S(()=>[(Z(!0),me(de,null,he(m.value,u=>(Z(),oe(Y(pa),{"data-hash":`/booking#${u._id}`},{default:S(()=>[n(z,{style:{width:"100%"}},{default:S(()=>[n(ra,U({ref_for:!0},u),null,16)]),_:2},1024)]),_:2},1032,["data-hash"]))),256))]),_:1}),n(ya,{class:"my-7"},{default:S(()=>[n(ge,{class:"d-flex flex-wrap justify-center",cols:"12",sm:"6"},{default:S(()=>[n(Sa,{width:"400",color:"primary",modelValue:l.value,"onUpdate:modelValue":p[0]||(p[0]=u=>l.value=u),"show-adjacent-months":"","allowed-dates":x,onClick:p[1]||(p[1]=u=>A(u))},null,8,["modelValue"]),n(Je,{modelValue:V.value,"onUpdate:modelValue":p[3]||(p[3]=u=>V.value=u),width:"auto"},{default:S(()=>[n(ke,null,{default:S(()=>[n(z,{class:"bg-white d-flex flex-column text-center justify-self-center pa-7",width:"350"},{default:S(()=>[Ca,n(ka,{class:"my-4"}),(Z(!0),me(de,null,he(h.value.bookingTime.join(" ").split(",").sort((u,w)=>parseInt(u)-parseInt(w)),u=>(Z(),oe(xa,{class:"d-flex justify-center",modelValue:I.value,"onUpdate:modelValue":p[2]||(p[2]=w=>I.value=w),label:u,value:u,"false-icon":"mdi-paw-outline","true-icon":"mdi-paw"},null,8,["modelValue","label","value"]))),256))]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(z,{class:"bg-transparent d-flex align-center"},{default:S(()=>[n(ea,{icon:"mdi-message-alert",class:"me-1",color:"orange-darken-2"}),T("當天日期無法預約，若有需求，請來電洽詢，謝謝！")]),_:1})]),_:1}),n(ge,{class:"d-flex justify-center"},{default:S(()=>[n(ke,{class:"w-90",cols:"12",sm:"6",onSubmit:aa(Y(Ue),["prevent"]),disabled:Y($)},{default:S(()=>[n(Q,{label:"預約人姓名",class:fe(ce.value),modelValue:Y(O).value.value,"onUpdate:modelValue":p[4]||(p[4]=u=>Y(O).value.value=u),"error-messages":Y(O).errorMessage.value},null,8,["class","modelValue","error-messages"]),n(Q,{label:"預約人電話",class:fe(ce.value),modelValue:Y(R).value.value,"onUpdate:modelValue":p[5]||(p[5]=u=>Y(R).value.value=u),"error-messages":Y(R).errorMessage.value},null,8,["class","modelValue","error-messages"]),n(Q,{readonly:""},{default:S(()=>[T("預約狗狗： "),n(z,{class:"text-h6 font-weight-bold bg-transparent"},{default:S(()=>[T(ae(h.value.dogName),1)]),_:1})]),_:1}),n(Q,{readonly:""},{default:S(()=>[T("預約日期： "),n(z,{class:"text-h6 font-weight-bold bg-transparent"},{default:S(()=>[T(ae(y.value),1)]),_:1})]),_:1}),n(Q,{readonly:""},{default:S(()=>[T("預約時間： "),n(ga,{class:"my-0 pa-0 bg-transparent",items:I.value.sort((u,w)=>parseInt(u)-parseInt(w))},null,8,["items"])]),_:1}),n(Q,{readonly:""},{default:S(()=>[T("預約總時數： "),n(z,{class:"text-h5 font-weight-bold bg-transparent"},{default:S(()=>[T(ae(E.value),1)]),_:1}),T(" 小時 ")]),_:1}),n(Q,{readonly:""},{default:S(()=>[T("總計金額： "),n(z,{class:"text-h5 font-weight-bold bg-transparent"},{default:S(()=>[T(ae(B.value),1)]),_:1}),T(" 元 ")]),_:1}),n(q,{class:"w-40 mt-5",type:"submit",color:"green",loading:Y($)},{default:S(()=>[T("送出預約")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1})]),_:1}))}},qa=Ke(Na,[["__scopeId","data-v-15a1025e"]]);export{qa as default};
