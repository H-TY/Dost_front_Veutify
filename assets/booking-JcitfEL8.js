import{p as X,ar as ie,q as K,I as C,s as ee,e as n,k as Y,aN as Xe,z as Ke,aR as Ne,K as ve,aS as Ze,aT as Ge,r as I,aU as Je,aV as se,H as ne,O as W,a2 as A,S as le,aW as Ce,X as Me,W as R,L as Ie,aX as ea,P as Te,al as Ae,aq as oe,aY as aa,aZ as ta,a_ as fe,F as ce,a$ as na,b0 as de,b1 as la,aQ as Oe,_ as oa,a as sa,i as ra,o as G,j as ue,w as S,d as pe,g as ge,h as $,aH as ia,V as U,a0 as ke,a1 as da,a5 as F,a4 as ye,a3 as te,b2 as ua,b as ca,a6 as va,a7 as ma,a8 as $e}from"./index-DmtSqneG.js";import{_ as ha}from"./dogsCard-FmXf45lH.js";import{c as fa,a as Q,d as pa,b as be,u as ga,f as q,V as xe}from"./vee-validate.esm-Dxik6LYE.js";import{g as J,b as ka,e as ya,P as ba,N as xa,S as Va,a as wa}from"./pagination-DsTjW4Yi.js";import{V as Ve}from"./VCol-CB80QuNc.js";import{V as Sa}from"./VDivider-COMm_wy2.js";import{a as _a}from"./VList-waFG-Sul.js";import{V as Pa}from"./VRow-BM67uoQ4.js";import{V as Da}from"./VContainer-C72uNbOI.js";import{V as Na}from"./VCheckbox-CfAQdXv8.js";import"./VCheckboxBtn-C6oWVbsS.js";const Be=X({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:ie,default:"$next"},prevIcon:{type:ie,default:"$prev"},modeIcon:{type:ie,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),we=K()({name:"VDatePickerControls",props:Be(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,a){let{emit:x}=a;const u=C(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),t=C(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),c=C(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=C(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function r(){x("click:prev")}function d(){x("click:next")}function l(){x("click:year")}function s(){x("click:month")}return ee(()=>n("div",{class:["v-date-picker-controls"]},[n(Y,{class:"v-date-picker-controls__month-btn",disabled:u.value,text:e.text,variant:"text",rounded:!0,onClick:s},null),n(Y,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:t.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:l},null),n(Xe,{key:"mode-spacer"},null),n("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[n(Y,{disabled:c.value,icon:e.prevIcon,variant:"text",onClick:r},null),n(Y,{disabled:i.value,icon:e.nextIcon,variant:"text",onClick:d},null)])])),{}}}),Ca=X({appendIcon:String,color:String,header:String,transition:String,onClick:Ze()},"VDatePickerHeader"),Se=K()({name:"VDatePickerHeader",props:Ca(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,a){let{emit:x,slots:u}=a;const{backgroundColorClasses:t,backgroundColorStyles:c}=Ke(e,"color");function i(){x("click")}function r(){x("click:append")}return ee(()=>{const d=!!(u.default||e.header),l=!!(u.append||e.appendIcon);return n("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},t.value],style:c.value,onClick:i},[u.prepend&&n("div",{key:"prepend",class:"v-date-picker-header__prepend"},[u.prepend()]),d&&n(Ne,{key:"content",name:e.transition},{default:()=>{var s;return[n("div",{key:e.header,class:"v-date-picker-header__content"},[((s=u.default)==null?void 0:s.call(u))??e.header])]}}),l&&n("div",{class:"v-date-picker-header__append"},[u.append?n(ve,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var s;return[(s=u.append)==null?void 0:s.call(u)]}}):n(Y,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:r},null)])])}),{}}}),Ye=X({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...Ge()},"VDatePickerMonth"),_e=K()({name:"VDatePickerMonth",props:Ye(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,a){let{emit:x,slots:u}=a;const t=I(),{daysInMonth:c,model:i,weekNumbers:r}=Je(e),d=se(),l=ne(),s=ne(),V=ne(!1),y=C(()=>V.value?e.reverseTransition:e.transition);e.multiple==="range"&&i.value.length>0&&(l.value=i.value[0],i.value.length>1&&(s.value=i.value[i.value.length-1]));const m=C(()=>{const g=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return i.value.length>=g});W(c,(g,o)=>{o&&(V.value=d.isBefore(g[0].date,o[0].date))});function D(g){const o=d.startOfDay(g);if(i.value.length===0?l.value=void 0:i.value.length===1&&(l.value=i.value[0],s.value=void 0),!l.value)l.value=o,i.value=[l.value];else if(s.value)l.value=g,s.value=void 0,i.value=[l.value];else{if(d.isSameDay(o,l.value)){l.value=void 0,i.value=[];return}else d.isBefore(o,l.value)?(s.value=d.endOfDay(l.value),l.value=o):s.value=d.endOfDay(o);const M=d.getDiff(s.value,l.value,"days"),_=[l.value];for(let T=1;T<M;T++){const z=d.addDays(l.value,T);_.push(z)}_.push(s.value),i.value=_}}function b(g){const o=i.value.findIndex(M=>d.isSameDay(M,g));if(o===-1)i.value=[...i.value,g];else{const M=[...i.value];M.splice(o,1),i.value=M}}function h(g){e.multiple==="range"?D(g):e.multiple?b(g):i.value=[g]}return()=>n("div",{class:"v-date-picker-month"},[e.showWeek&&n("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&n("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[A(" ")]),r.value.map(g=>n("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[g]))]),n(Ne,{name:y.value},{default:()=>{var g;return[n("div",{ref:t,key:(g=c.value[0].date)==null?void 0:g.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&d.getWeekdays(e.firstDayOfWeek).map(o=>n("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[o])),c.value.map((o,M)=>{const _={props:{onClick:()=>h(o.date)},item:o,i:M};return m.value&&!o.isSelected&&(o.isDisabled=!0),n("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":o.isAdjacent,"v-date-picker-month__day--hide-adjacent":o.isHidden,"v-date-picker-month__day--selected":o.isSelected,"v-date-picker-month__day--week-end":o.isWeekEnd,"v-date-picker-month__day--week-start":o.isWeekStart}],"data-v-date":o.isDisabled?void 0:o.isoDate},[(e.showAdjacentMonths||!o.isAdjacent)&&n(ve,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(o.isSelected||o.isToday)&&!o.isDisabled?e.color:void 0,disabled:o.isDisabled,icon:!0,ripple:!1,text:o.localized,variant:o.isDisabled?o.isToday?"outlined":"text":o.isToday&&!o.isSelected?"outlined":"flat",onClick:()=>h(o.date)}}},{default:()=>{var T;return[((T=u.day)==null?void 0:T.call(u,_))??n(Y,_.props,null)]}})])})])]}})])}}),He=X({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Pe=K()({name:"VDatePickerMonths",props:He(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:x,slots:u}=a;const t=se(),c=le(e,"modelValue"),i=C(()=>{let r=t.startOfYear(t.date());return e.year&&(r=t.setYear(r,e.year)),Ce(12).map(d=>{const l=t.format(r,"monthShort"),s=!!(e.min&&t.isAfter(t.startOfMonth(t.date(e.min)),r)||e.max&&t.isAfter(r,t.startOfMonth(t.date(e.max))));return r=t.getNextMonth(r),{isDisabled:s,text:l,value:d}})});return Me(()=>{c.value=c.value??t.getMonth(t.date())}),ee(()=>n("div",{class:"v-date-picker-months",style:{height:Ie(e.height)}},[n("div",{class:"v-date-picker-months__content"},[i.value.map((r,d)=>{var V;const l={active:c.value===d,color:c.value===d?e.color:void 0,disabled:r.isDisabled,rounded:!0,text:r.text,variant:c.value===r.value?"flat":"text",onClick:()=>s(d)};function s(y){if(c.value===y){x("update:modelValue",c.value);return}c.value=y}return((V=u.month)==null?void 0:V.call(u,{month:r,i:d,props:l}))??n(Y,R({key:"month"},l),null)})])])),{}}}),Ee=X({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),De=K()({name:"VDatePickerYears",props:Ee(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:x,slots:u}=a;const t=se(),c=le(e,"modelValue"),i=C(()=>{const d=t.getYear(t.date());let l=d-100,s=d+52;e.min&&(l=t.getYear(t.date(e.min))),e.max&&(s=t.getYear(t.date(e.max)));let V=t.startOfYear(t.date());return V=t.setYear(V,l),Ce(s-l+1,l).map(y=>{const m=t.format(V,"year");return V=t.setYear(V,t.getYear(V)+1),{text:m,value:y}})});Me(()=>{c.value=c.value??t.getYear(t.date())});const r=ea();return Te(async()=>{var d;await Ae(),(d=r.el)==null||d.scrollIntoView({block:"center"})}),ee(()=>n("div",{class:"v-date-picker-years",style:{height:Ie(e.height)}},[n("div",{class:"v-date-picker-years__content"},[i.value.map((d,l)=>{var V;const s={ref:c.value===d.value?r:void 0,active:c.value===d.value,color:c.value===d.value?e.color:void 0,rounded:!0,text:d.text,variant:c.value===d.value?"flat":"text",onClick:()=>{if(c.value===d.value){x("update:modelValue",c.value);return}c.value=d.value}};return((V=u.year)==null?void 0:V.call(u,{year:d,i:l,props:s}))??n(Y,R({key:"month"},s),null)})])])),{}}}),Ma=X({header:{type:String,default:"$vuetify.datePicker.header"},...Be(),...Ye({weeksInMonth:"static"}),...oe(He(),["modelValue"]),...oe(Ee(),["modelValue"]),...aa({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Ia=K()({name:"VDatePicker",props:Ma(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,a){let{emit:x,slots:u}=a;const t=se(),{t:c}=ta(),i=le(e,"modelValue",void 0,f=>de(f),f=>e.multiple?f:f[0]),r=le(e,"viewMode"),d=C(()=>{var w;const f=t.date((w=i.value)==null?void 0:w[0]);return f&&t.isValid(f)?f:t.date()}),l=I(Number(e.month??t.getMonth(t.startOfMonth(d.value)))),s=I(Number(e.year??t.getYear(t.startOfYear(t.setMonth(d.value,l.value))))),V=ne(!1),y=C(()=>e.multiple&&i.value.length>1?c("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&t.isValid(i.value[0])?t.format(t.date(i.value[0]),"normalDateWithWeekday"):c(e.header)),m=C(()=>{let f=t.date();return f=t.setDate(f,1),f=t.setMonth(f,l.value),f=t.setYear(f,s.value),t.format(f,"monthAndYear")}),D=C(()=>`date-picker-header${V.value?"-reverse":""}-transition`),b=C(()=>{const f=t.date(e.min);return e.min&&t.isValid(f)?f:null}),h=C(()=>{const f=t.date(e.max);return e.max&&t.isValid(f)?f:null}),g=C(()=>{if(e.disabled)return!0;const f=[];if(r.value!=="month")f.push("prev","next");else{let w=t.date();if(w=t.setYear(w,s.value),w=t.setMonth(w,l.value),b.value){const O=t.addDays(t.startOfMonth(w),-1);t.isAfter(b.value,O)&&f.push("prev")}if(h.value){const O=t.addDays(t.endOfMonth(w),1);t.isAfter(O,h.value)&&f.push("next")}}return f});function o(){l.value<11?l.value++:(s.value++,l.value=0,H(s.value)),L(l.value)}function M(){l.value>0?l.value--:(s.value--,l.value=11,H(s.value)),L(l.value)}function _(){r.value="month"}function T(){r.value=r.value==="months"?"month":"months"}function z(){r.value=r.value==="year"?"month":"year"}function L(f){r.value==="months"&&T(),x("update:month",f)}function H(f){r.value==="year"&&z(),x("update:year",f)}return W(i,(f,w)=>{const O=de(w),B=de(f);if(!B.length)return;const Z=t.date(O[O.length-1]),j=t.date(B[B.length-1]),E=t.getMonth(j),N=t.getYear(j);E!==l.value&&(l.value=E,L(l.value)),N!==s.value&&(s.value=N,H(s.value)),V.value=t.isBefore(Z,j)}),ee(()=>{const f=fe.filterProps(e),w=we.filterProps(e),O=Se.filterProps(e),B=_e.filterProps(e),Z=oe(Pe.filterProps(e),["modelValue"]),j=oe(De.filterProps(e),["modelValue"]),E={header:y.value,transition:D.value};return n(fe,R(f,{class:["v-date-picker",`v-date-picker--${r.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var N;return((N=u.title)==null?void 0:N.call(u))??n("div",{class:"v-date-picker__title"},[c(e.title)])},header:()=>u.header?n(ve,{defaults:{VDatePickerHeader:{...E}}},{default:()=>{var N;return[(N=u.header)==null?void 0:N.call(u,E)]}}):n(Se,R({key:"header"},O,E,{onClick:r.value!=="month"?_:void 0}),{...u,default:void 0}),default:()=>n(ce,null,[n(we,R(w,{disabled:g.value,text:m.value,"onClick:next":o,"onClick:prev":M,"onClick:month":T,"onClick:year":z}),null),n(na,{hideOnLeave:!0},{default:()=>[r.value==="months"?n(Pe,R({key:"date-picker-months"},Z,{modelValue:l.value,"onUpdate:modelValue":[N=>l.value=N,L],min:b.value,max:h.value,year:s.value}),null):r.value==="year"?n(De,R({key:"date-picker-years"},j,{modelValue:s.value,"onUpdate:modelValue":[N=>s.value=N,H],min:b.value,max:h.value}),null):n(_e,R({key:"date-picker-month"},B,{modelValue:i.value,"onUpdate:modelValue":N=>i.value=N,month:l.value,"onUpdate:month":[N=>l.value=N,L],year:s.value,"onUpdate:year":[N=>s.value=N,H],min:b.value,max:h.value}),null)]})]),actions:u.actions})}),{}}});function Ta(e){let{swiper:a,extendParams:x,on:u}=e;x({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let t=!1,c={};const i=m=>m.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),r=m=>{const D=J();let b;m?b=new URL(m):b=D.location;const h=b.pathname.slice(1).split("/").filter(_=>_!==""),g=h.length,o=h[g-2],M=h[g-1];return{key:o,value:M}},d=(m,D)=>{const b=J();if(!t||!a.params.history.enabled)return;let h;a.params.url?h=new URL(a.params.url):h=b.location;const g=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${D}"]`):a.slides[D];let o=i(g.getAttribute("data-history"));if(a.params.history.root.length>0){let _=a.params.history.root;_[_.length-1]==="/"&&(_=_.slice(0,_.length-1)),o=`${_}/${m?`${m}/`:""}${o}`}else h.pathname.includes(m)||(o=`${m?`${m}/`:""}${o}`);a.params.history.keepQuery&&(o+=h.search);const M=b.history.state;M&&M.value===o||(a.params.history.replaceState?b.history.replaceState({value:o},null,o):b.history.pushState({value:o},null,o))},l=(m,D,b)=>{if(D)for(let h=0,g=a.slides.length;h<g;h+=1){const o=a.slides[h];if(i(o.getAttribute("data-history"))===D){const _=a.getSlideIndex(o);a.slideTo(_,m,b)}}else a.slideTo(0,m,b)},s=()=>{c=r(a.params.url),l(a.params.speed,c.value,!1)},V=()=>{const m=J();if(a.params.history){if(!m.history||!m.history.pushState){a.params.history.enabled=!1,a.params.hashNavigation.enabled=!0;return}if(t=!0,c=r(a.params.url),!c.key&&!c.value){a.params.history.replaceState||m.addEventListener("popstate",s);return}l(0,c.value,a.params.runCallbacksOnInit),a.params.history.replaceState||m.addEventListener("popstate",s)}},y=()=>{const m=J();a.params.history.replaceState||m.removeEventListener("popstate",s)};u("init",()=>{a.params.history.enabled&&V()}),u("destroy",()=>{a.params.history.enabled&&y()}),u("transitionEnd _freeModeNoMomentumRelease",()=>{t&&d(a.params.history.key,a.activeIndex)}),u("slideChange",()=>{t&&a.params.cssMode&&d(a.params.history.key,a.activeIndex)})}function Aa(e){let{swiper:a,extendParams:x,emit:u,on:t}=e,c=!1;const i=ka(),r=J();x({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(y,m){if(a.virtual&&a.params.virtual.enabled){const D=a.slides.filter(h=>h.getAttribute("data-hash")===m)[0];return D?parseInt(D.getAttribute("data-swiper-slide-index"),10):0}return a.getSlideIndex(ya(a.slidesEl,`.${a.params.slideClass}[data-hash="${m}"], swiper-slide[data-hash="${m}"]`)[0])}}});const d=()=>{u("hashChange");const y=i.location.hash.replace("#",""),m=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${a.activeIndex}"]`):a.slides[a.activeIndex],D=m?m.getAttribute("data-hash"):"";if(y!==D){const b=a.params.hashNavigation.getSlideIndex(a,y);if(typeof b>"u"||Number.isNaN(b))return;a.slideTo(b)}},l=()=>{if(!c||!a.params.hashNavigation.enabled)return;const y=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${a.activeIndex}"]`):a.slides[a.activeIndex],m=y?y.getAttribute("data-hash")||y.getAttribute("data-history"):"";a.params.hashNavigation.replaceState&&r.history&&r.history.replaceState?(r.history.replaceState(null,null,`#${m}`||""),u("hashSet")):(i.location.hash=m||"",u("hashSet"))},s=()=>{if(!a.params.hashNavigation.enabled||a.params.history&&a.params.history.enabled)return;c=!0;const y=i.location.hash.replace("#","");if(y){const D=a.params.hashNavigation.getSlideIndex(a,y);a.slideTo(D||0,0,a.params.runCallbacksOnInit,!0)}a.params.hashNavigation.watchState&&r.addEventListener("hashchange",d)},V=()=>{a.params.hashNavigation.watchState&&r.removeEventListener("hashchange",d)};t("init",()=>{a.params.hashNavigation.enabled&&s()}),t("destroy",()=>{a.params.hashNavigation.enabled&&V()}),t("transitionEnd _freeModeNoMomentumRelease",()=>{c&&l()}),t("slideChange",()=>{c&&a.params.cssMode&&l()})}const Oa=la("BookingOrderData",()=>{const{apiAuth:e}=Oe(),a=I(new Date().toLocaleDateString().replace(/\//g,""));console.log("nowDate:",a.value);const x=I(null),u=I(""),t=I(""),c=I(""),i=async()=>{var r,d;try{console.log("Store觸發");const{data:l}=await e.get("/order",{params:{search:a.value}});x.value=Math.max(...l.result.data.map(s=>Number(s.bookingOrderNumber)))}catch(l){console.log(l),createSnackbar({text:((d=(r=l==null?void 0:l.response)==null?void 0:r.data)==null?void 0:d.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return i(),{bookingOrderNumber:x,dogName:u,bookingDate:t,bookingTime:c,endBookingOrderData:i}}),qe=e=>(va("data-v-f3556915"),e=e(),ma(),e),$a=qe(()=>$e("h1",null,"預約狗狗時間",-1)),Ba=qe(()=>$e("h3",null,"可預約時段",-1)),Ya={__name:"booking",setup(e){const a=ua(),x=ca(),{backApi:u,apiAuth:t}=Oe(),c=sa(),i=Oa(),r=ra(),d=[ba,xa,Aa,Ta],l=C(()=>{if(!c.isLogin){x.push("/login");return}return c.account}),s=I(new Date("")),V=I(new Date),y=C(()=>isNaN(s.value.getTime())?"左側選擇日期":s.value.toLocaleDateString()),m=k=>k>V.value,D=I([]);(async()=>{var k,p;try{const{data:v}=await u.get("/dogs");D.value.splice(0,D.value.length,...v.result.data)}catch(v){console.log(v),r({text:((p=(k=v==null?void 0:v.response)==null?void 0:k.data)==null?void 0:p.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const h=I({_id:"",image:"",dogName:"",age:0,price:0,booking:!0,bookingTime:[],feature:"",sell:!0,counter:0}),g=I(null);W(g,(k,p)=>{if(k!==p)return w.value=[];console.log("哈希newId:",k,"哈希oldId:",p)});const o=()=>{a.query.id?(g.value=a.query.id,window.location.hash=`booking#${a.query.id}`,a.query.id=""):g.value=window.location.hash.substring(10)},M=()=>{o(),_()};Te(()=>{setTimeout(()=>{o(),_()},500)});const _=async()=>{var k,p;if(g.value!==null)try{await Ae();const{data:v}=await u.get("/dogs/"+g.value);h.value._id=v.result._id,h.value.image=v.result.image,h.value.dogName=v.result.dogName,h.value.age=v.result.age,h.value.price=v.result.price,h.value.booking=v.result.booking,h.value.bookingTime=v.result.bookingTime,h.value.feature=v.result.feature,h.value.sell=v.result.sell,h.value.counter=v.result.counter}catch(v){console.log(v),r({text:((p=(k=v==null?void 0:v.response)==null?void 0:k.data)==null?void 0:p.message)||"發生錯誤",snackbarProps:{color:"red"}})}};_();const T=I(!1),z=k=>{k.target.innerText==y.value.slice(-2).replace("/","")&&(T.value=!0)},L=()=>{T.value=!1},H=I(!1),f=()=>{H.value=!H.value},w=I([]),O=C(()=>w.value.length*2),B=C(()=>h.value.price*w.value.length),Z=fa({bookingOrderNumber:Q().required("預約訂單編號必填"),name:Q().required("預約人名字必填"),phone:Q().required("預約人電話必填"),dogName:Q().required("狗狗名字必填"),bookingDate:Q().required("預約日期必填"),bookingTime:pa().required("預約時段必填"),totalBookingTime:be().required("預約總時數必填").typeError("預約總時數格式錯誤").min(0,"預約總時數不能小於 0"),totalPrice:be().required("預約總金額必填").typeError("預約總金額格式錯誤").min(0,"預約總金額不能小於 0"),accountName:Q().required("帳戶名稱必填")}),{handleSubmit:j,isSubmitting:E,resetForm:N}=ga({validationSchema:Z,initialValues:{bookingOrderNumber:"",name:l.value,phone:"",dogName:"",bookingDate:"",bookingTime:[],totalBookingTime:0,totalPrice:0,accountName:""}}),me=q("bookingOrderNumber"),ae=q("name"),re=q("phone"),Re=q("dogName"),Ue=q("bookingDate"),We=q("bookingTime"),Le=q("totalBookingTime"),je=q("totalPrice"),Fe=q("accountName");W(y,(k,p)=>{if(k!==p)return Fe.value.value=l.value,Re.value.value=h.value.dogName});const ze=async()=>{await i.endBookingOrderData()};W(y,(k,p)=>{if(k!==p)return w.value=[],Ue.value.value=y.value,ze(),me.value.value=(i.bookingOrderNumber+1).toString(),console.log("bookingOrderNumber",me.value.value)}),W(w,(k,p)=>{if(k!==p)return We.value.value=w.value.sort((v,P)=>parseInt(v)-parseInt(P))}),W(O,(k,p)=>{if(k!==p)return Le.value.value=O.value}),W(B,(k,p)=>{if(k!==p)return je.value.value=B.value});const Qe=j(async k=>{var p,v;try{const P=new FormData;P.append("bookingOrderNumber",k.bookingOrderNumber),P.append("name",k.name),P.append("phone",k.phone),P.append("dogName",k.dogName),P.append("bookingDate",k.bookingDate),P.append("bookingTime",k.bookingTime),P.append("totalBookingTime",k.totalBookingTime),P.append("totalPrice",k.totalPrice),P.append("accountName",k.accountName),await t.post("/order",P),r({text:"預約成功",snackbarProps:{color:"green"}}),N(),y.value=NaN,w.value=[],B.value=0}catch(P){console.log(P),r({text:((v=(p=P==null?void 0:P.response)==null?void 0:p.data)==null?void 0:v.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),he=C(()=>({myClass:ae.value.value.length>0}));return(k,p)=>(G(),ue(Da,{class:"text-center my-8"},{default:S(()=>[$a,n($(Va),{slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,pagination:{clickable:!0},navigation:!0,hashNavigation:{replaceState:!0,watchState:!0},modules:d,onSlideChangeTransitionEnd:M,class:"mySwiper my-10"},{default:S(()=>[(G(!0),pe(ce,null,ge(D.value,v=>(G(),ue($(wa),{"data-hash":`/booking#${v._id}`},{default:S(()=>[n(U,{style:{width:"100%"}},{default:S(()=>[n(ha,R({ref_for:!0},v),null,16)]),_:2},1024)]),_:2},1032,["data-hash"]))),256))]),_:1}),n(Pa,{class:"my-7"},{default:S(()=>[n(Ve,{class:"d-flex flex-wrap justify-center",cols:"12",sm:"6"},{default:S(()=>[n(Ia,{width:"400",color:"primary",modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=v=>s.value=v),"show-adjacent-months":"","allowed-dates":m,onClick:p[1]||(p[1]=v=>z(v))},null,8,["modelValue"]),n(ia,{modelValue:T.value,"onUpdate:modelValue":p[3]||(p[3]=v=>T.value=v)},{default:S(()=>[n(xe,null,{default:S(()=>[n(U,{class:"bg-white d-flex flex-column text-center justify-self-center align-self-center pa-7",width:"350",height:"240"},{default:S(()=>[Ba,n(Sa,{class:"my-4"}),(G(!0),pe(ce,null,ge(h.value.bookingTime.join(" ").split(",").sort((v,P)=>parseInt(v)-parseInt(P)),v=>(G(),ue(Na,{class:"d-flex justify-center",modelValue:w.value,"onUpdate:modelValue":p[2]||(p[2]=P=>w.value=P),label:v,value:v,"false-icon":"mdi-paw-outline","true-icon":"mdi-paw"},null,8,["modelValue","label","value"]))),256)),n(U,{class:"dialogClosePosition rounded-circle bg-transparent d-flex"},{default:S(()=>[n(Y,{class:"rounded-circle d-flex pa-0 bg-white opacity-100","min-width":"60","min-height":"60",variant:"plain",onClick:L,flat:""},{default:S(()=>[n(ke,{icon:H.value?"mdi-close-circle":"mdi-close-circle-outline",size:`48
                  `,color:"red-darken-4",onMouseenter:f,onMouseleave:f},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(U,{class:"bg-transparent d-flex align-center"},{default:S(()=>[n(ke,{icon:"mdi-message-alert",class:"me-1",color:"orange-darken-2"}),A("當天日期無法預約，若有需求，請來電洽詢，謝謝！")]),_:1})]),_:1}),n(Ve,{class:"d-flex justify-center"},{default:S(()=>[n(xe,{class:"w-90",cols:"12",sm:"6",onSubmit:da($(Qe),["prevent"]),disabled:$(E)},{default:S(()=>[n(F,{label:"預約人姓名",class:ye(he.value),modelValue:$(ae).value.value,"onUpdate:modelValue":p[4]||(p[4]=v=>$(ae).value.value=v),"error-messages":$(ae).errorMessage.value},null,8,["class","modelValue","error-messages"]),n(F,{label:"預約人電話",class:ye(he.value),modelValue:$(re).value.value,"onUpdate:modelValue":p[5]||(p[5]=v=>$(re).value.value=v),"error-messages":$(re).errorMessage.value},null,8,["class","modelValue","error-messages"]),n(F,{readonly:""},{default:S(()=>[A("預約狗狗： "),n(U,{class:"text-h6 font-weight-bold bg-transparent"},{default:S(()=>[A(te(h.value.dogName),1)]),_:1})]),_:1}),n(F,{readonly:""},{default:S(()=>[A("預約日期： "),n(U,{class:"text-h6 font-weight-bold bg-transparent"},{default:S(()=>[A(te(y.value),1)]),_:1})]),_:1}),n(F,{readonly:""},{default:S(()=>[A("預約時間： "),n(_a,{class:"my-0 pa-0 bg-transparent",items:w.value.sort((v,P)=>parseInt(v)-parseInt(P))},null,8,["items"])]),_:1}),n(F,{readonly:""},{default:S(()=>[A("預約總時數： "),n(U,{class:"text-h5 font-weight-bold bg-transparent"},{default:S(()=>[A(te(O.value),1)]),_:1}),A(" 小時 ")]),_:1}),n(F,{readonly:""},{default:S(()=>[A("總計金額： "),n(U,{class:"text-h5 font-weight-bold bg-transparent"},{default:S(()=>[A(te(B.value),1)]),_:1}),A(" 元 ")]),_:1}),n(Y,{class:"w-40 mt-5",type:"submit",color:"green",loading:$(E)},{default:S(()=>[A("送出預約")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1})]),_:1}))}},Xa=oa(Ya,[["__scopeId","data-v-f3556915"]]);export{Xa as default};
