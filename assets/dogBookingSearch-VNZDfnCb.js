import{i as x,a as B,r as d,o as u,j as p,w as t,e as a,k as T,a2 as l,a5 as S,ab as w,a3 as o,V as C,f as A,d as I,g as N,F as D,aa as L,a8 as F,aQ as P}from"./index-C_dRcg-W.js";import{b as f}from"./route-block-B_A1xBdJ.js";import{V as k}from"./VCol-93DuqtMK.js";import{a as V,V as U}from"./VRow-BzBDoCjr.js";import{r as j}from"./VDataTable-CTcOfpzA.js";import{a as E,V as O}from"./VList-U5h5yOKo.js";import"./VPagination-DJFIbb2j.js";import"./VCheckboxBtn-DjgahX6v.js";import"./VDivider-BoRIpqWd.js";const Q=F("h1",null,"預約狗狗查詢",-1),R={__name:"dogBookingSearch",setup(q){const{apiAuth:_}=P(),h=x(),y=B(),b=d(y.account),i=d(""),n=d([]);console.log(n.value);const v=[{align:"center",title:"訂單編號",key:"bookingOrderNumber"},{align:"center",title:"下單日期",key:"createdAt",value:r=>new Date(r.createdAt).toLocaleString()},{align:"center",title:"預約人",key:"name"},{align:"center",title:"電話",key:"phone"},{align:"center",title:"預約狗狗",key:"dogName"},{align:"center",title:"圖片",key:"image"},{align:"center",title:"預約日期",key:"bookingDate"},{align:"center",title:"預約時段",key:"bookingTime"},{align:"center",title:"預約總時數",key:"totalBookingTime"},{align:"center",title:"預約總金額",key:"totalPrice"}],g=async()=>{var r,s;try{const{data:e}=await _.get("/order",{params:{search:b.value}});n.value.splice(0,n.value.length,...e.result.data)}catch(e){console.log(e),h({text:((s=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:s.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return g(),(r,s)=>(u(),p(U,{class:"my-5",fluid:""},{default:t(()=>[a(V,{class:"text-center"},{default:t(()=>[a(k,null,{default:t(()=>[Q]),_:1})]),_:1}),a(V,{class:"text-center"},{default:t(()=>[a(k,null,{default:t(()=>[a(T,{color:"green",onClick:g},{default:t(()=>[l("查詢預約")]),_:1})]),_:1})]),_:1}),a(L,{class:"mt-8",flat:""},{text:t(()=>[a(S,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=e=>i.value=e),label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"])]),default:t(()=>[a(w,null,{default:t(()=>[l("查詢預約結果")]),_:1}),a(j,{headers:v,items:n.value,search:i.value},{"item.createdAt":t(({value:e})=>[l(o(e.split(" ")[0]),1)]),"item.image":t(({value:e})=>[a(C,{class:"bg-transparent my-2",elevation:"2",rounded:""},{default:t(()=>[a(A,{src:e,width:"70",height:"70",cover:""},null,8,["src"])]),_:2},1024)]),"item.bookingTime":t(({value:e})=>[a(E,null,{default:t(()=>[(u(!0),I(D,null,N(e.join(" ").split(",").sort((c,m)=>parseInt(c)-parseInt(m)),(c,m)=>(u(),p(O,{key:m},{default:t(()=>[l(o(c),1)]),_:2},1024))),128))]),_:2},1024)]),"item.totalBookingTime":t(({value:e})=>[l(o(e?e+" 小時":"無資料"),1)]),"item.totalPrice":t(({value:e})=>[l(o(e)+" 元 ",1)]),_:2},1032,["items","search"])]),_:1})]),_:1}))}};typeof f=="function"&&f(R);export{R as default};
