import{bD as h,a as p,r as n,I as i,aQ as v}from"./index-hrT1P01M.js";const N=h("BookingOrderData",()=>{const{apiAuth:s}=v();if(!p().isLogin)return;const a=n(new Date),u=i(()=>{const o=a.value.getFullYear().toString(),r=(a.value.getMonth()+1).toString().length>1?(a.value.getMonth()+1).toString():(a.value.getMonth()+1).toString().toString().padStart(2,"0"),t=a.value.getDate().toString().length>1?a.value.getDate().toString():a.value.getDate().toString().padStart(2,"0");return o+r+t}),g=n(null),d=n(""),l=n(""),S=n(""),m=n(""),c=n("");return{bookingOrderNumber:g,image:d,dogName:l,bookingDate:S,bookingTime:m,endBookingOrderData:async()=>{var o,r;try{const{data:t}=await s.get("/order",{params:{search:u.value}}),e=i(()=>t.result.data.length==0?u.value+"000":Math.max(...t.result.data.map(D=>Number(D.bookingOrderNumber))));g.value=e.value}catch(t){console.log(t),createSnackbar({text:((r=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:r.message)||"發生錯誤",snackbarProps:{color:"red"}})}},edit:async o=>{var r,t;try{const{data:e}=await s.patch("/order/"+o.id,o);return c.value=e.result.orderStatus,{text:"修改訂單成功",reOrderStatus:c.value}}catch(e){return console.log(e),((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||"訂單修改發生錯誤，請稍後再試"}}}});export{N as u};
