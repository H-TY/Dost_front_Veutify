import{_ as M,b as U,i as F,o as q,d as $,e as t,w as d,a1 as A,f as e,a5 as c,Z as n,a3 as i,k as E,au as N,c as R,av as L,aw as P}from"./index-BOojvlEk.js";import{c as T,a as r,g as Z,u as O,f as l,V as j}from"./vee-validate.esm-DChpKwGX.js";import{v as _}from"./index-DOp_HvVW.js";import{m as z}from"./index-XiPP8dQK.js";import{V as G}from"./VDivider-rfRemWBP.js";import{V as H}from"./VContainer-DWb0HMS9.js";const w=u=>(L("data-v-d3fb2eaf"),u=u(),P(),u),J={id:"register",class:"register"},K=w(()=>n("div",{class:"title"},[n("h2",null,"註冊會員"),n("h6",null,"享受狗狗至上的服務")],-1)),Q={class:"notice"},W=w(()=>n("br",null,null,-1)),X={__name:"register",setup(u){const h={to:"/userZone",img:new URL(""+new URL("Dost_logo-CIekf1rM.png",import.meta.url).href,import.meta.url).href},x=Math.random().toString(36).substring(2,10);let S=z(x);const{backApi:k}=N(),I=U(),V=F(),B=T({account:r().required("使用者帳號必填").min(4,"使用者帳號文字最少 4 個字").max(20,"使用者帳號文字最多 20 個字").test("驗證 account","使用者帳號格式錯誤",o=>_.isAlphanumeric(o)),password:r().required("密碼必填").min(4,"使用者密碼最少 4 個字").max(20,"使用者密碼最多 20 個字"),passwordConfirm:r().required("確認密碼必填").oneOf([Z("password")],"密碼不一致"),email:r().required("信箱必填").test("驗證 Email","使用者信箱格式錯誤",o=>_.isEmail(o)),image:r(),accountBgImage:r()}),{handleSubmit:C,isSubmitting:b}=O({validationSchema:B,initialValues:{image:`data:image/svg+xml;base64,${btoa(S)}`,accountBgImage:h.img}}),g=l("account"),p=l("password"),v=l("passwordConfirm"),f=l("email");l("image"),l("accountBgImage");const y=C(async o=>{var s,m;try{await k.post("/user",{account:o.account,password:o.password,email:o.email,image:o.image,accountBgImage:o.accountBgImage}),V({text:"註冊成功",snackbarProps:{color:"green"}}),I.push("/login")}catch(a){console.log(a),V({text:((m=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:m.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return(o,s)=>{const m=R("router-link");return q(),$("section",J,[t(H,null,{default:d(()=>[K,t(G),t(j,{onSubmit:A(e(y),["prevent"]),disabled:e(b)},{default:d(()=>[t(c,{type:"account",label:"帳號",minlength:"4",maxlength:"20",counter:"",variant:"underlined",modelValue:e(g).value.value,"onUpdate:modelValue":s[0]||(s[0]=a=>e(g).value.value=a),"error-messages":e(g).errorMessage.value},null,8,["modelValue","error-messages"]),t(c,{type:"email",label:"信箱",variant:"underlined",modelValue:e(f).value.value,"onUpdate:modelValue":s[1]||(s[1]=a=>e(f).value.value=a),"error-messages":e(f).errorMessage.value},null,8,["modelValue","error-messages"]),t(c,{type:"password",label:"密碼",minlength:"4",maxlength:"20",counter:"",variant:"underlined",modelValue:e(p).value.value,"onUpdate:modelValue":s[2]||(s[2]=a=>e(p).value.value=a),"error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),t(c,{type:"password",label:"確認密碼",minlength:"4",maxlength:"20",counter:"",variant:"underlined",modelValue:e(v).value.value,"onUpdate:modelValue":s[3]||(s[3]=a=>e(v).value.value=a),"error-messages":e(v).errorMessage.value},null,8,["modelValue","error-messages"]),n("div",Q,[n("p",null,[i(" 已加入會員？ "),W,i(" 點擊 "),t(m,{to:{path:"/login"}},{default:d(()=>[i("登入")]),_:1}),i(" 會員 ")])]),t(E,{type:"submit",loading:e(b)},{default:d(()=>[i("註冊")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1})])}}},te=M(X,[["__scopeId","data-v-d3fb2eaf"]]);export{te as default};
