import{p as G,aw as fe,q as K,I as C,s as ae,e as l,k as H,aN as la,z as na,aR as Be,K as ke,aS as sa,aT as ra,r as A,aU as oa,aV as de,H as re,O as z,a2 as T,S as oe,aW as Oe,X as Ye,W as U,L as He,aX as ia,P as Ee,aq as Ue,av as ie,aY as da,aZ as ua,a_ as Ve,F as ge,a$ as ca,b0 as he,_ as va,u as ma,a as fa,i as ha,b1 as pa,o as Z,j as pe,w as b,d as Se,h as we,f as M,a9 as _e,V as E,a0 as Pe,a4 as le,a1 as ga,a5 as X,g as ka,a3 as ne,b2 as ya,b as ba,aQ as xa,a6 as Va,a7 as Sa,a8 as qe}from"./index-DEyxji0U.js";import{u as wa}from"./bookingOrder-B27FIspo.js";import{_ as _a}from"./dogsCard-BD2d9vEp.js";import{c as Pa,a as J,d as Da,b as De,e as Ca,u as Ia,f as Y,V as Ce}from"./vee-validate.esm-DJKGEZZF.js";import{O as Na}from"./orderInfoCard-Bb2d0hbQ.js";import{g as ee,b as Ma,e as Ta,P as Aa,N as $a,S as Ba,a as Oa}from"./pagination-DT8MIv5c.js";import{V as se}from"./VCol-1jyxLAmW.js";import{V as Ya}from"./VDivider-BmW0kxym.js";import{a as Ie,V as Ha}from"./VRow-CpyHr9t-.js";import{a as Ea}from"./VList-BhAplFJJ.js";import{V as Ua}from"./VCheckbox-DEZD8x37.js";import"./VCheckboxBtn-BzPo99w4.js";const Re=G({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:fe,default:"$next"},prevIcon:{type:fe,default:"$prev"},modeIcon:{type:fe,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Ne=K()({name:"VDatePickerControls",props:Re(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,a){let{emit:D}=a;const u=C(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),t=C(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),m=C(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=C(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function c(){D("click:prev")}function r(){D("click:next")}function n(){D("click:year")}function o(){D("click:month")}return ae(()=>l("div",{class:["v-date-picker-controls"]},[l(H,{class:"v-date-picker-controls__month-btn",disabled:u.value,text:e.text,variant:"text",rounded:!0,onClick:o},null),l(H,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:t.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:n},null),l(la,{key:"mode-spacer"},null),l("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[l(H,{disabled:m.value,icon:e.prevIcon,variant:"text",onClick:c},null),l(H,{disabled:i.value,icon:e.nextIcon,variant:"text",onClick:r},null)])])),{}}}),qa=G({appendIcon:String,color:String,header:String,transition:String,onClick:sa()},"VDatePickerHeader"),Me=K()({name:"VDatePickerHeader",props:qa(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,a){let{emit:D,slots:u}=a;const{backgroundColorClasses:t,backgroundColorStyles:m}=na(e,"color");function i(){D("click")}function c(){D("click:append")}return ae(()=>{const r=!!(u.default||e.header),n=!!(u.append||e.appendIcon);return l("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},t.value],style:m.value,onClick:i},[u.prepend&&l("div",{key:"prepend",class:"v-date-picker-header__prepend"},[u.prepend()]),r&&l(Be,{key:"content",name:e.transition},{default:()=>{var o;return[l("div",{key:e.header,class:"v-date-picker-header__content"},[((o=u.default)==null?void 0:o.call(u))??e.header])]}}),n&&l("div",{class:"v-date-picker-header__append"},[u.append?l(ke,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var o;return[(o=u.append)==null?void 0:o.call(u)]}}):l(H,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:c},null)])])}),{}}}),Le=G({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...ra()},"VDatePickerMonth"),Te=K()({name:"VDatePickerMonth",props:Le(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,a){let{emit:D,slots:u}=a;const t=A(),{daysInMonth:m,model:i,weekNumbers:c}=oa(e),r=de(),n=re(),o=re(),k=re(!1),w=C(()=>k.value?e.reverseTransition:e.transition);e.multiple==="range"&&i.value.length>0&&(n.value=i.value[0],i.value.length>1&&(o.value=i.value[i.value.length-1]));const f=C(()=>{const v=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return i.value.length>=v});z(m,(v,s)=>{s&&(k.value=r.isBefore(v[0].date,s[0].date))});function I(v){const s=r.startOfDay(v);if(i.value.length===0?n.value=void 0:i.value.length===1&&(n.value=i.value[0],o.value=void 0),!n.value)n.value=s,i.value=[n.value];else if(o.value)n.value=v,o.value=void 0,i.value=[n.value];else{if(r.isSameDay(s,n.value)){n.value=void 0,i.value=[];return}else r.isBefore(s,n.value)?(o.value=r.endOfDay(n.value),n.value=s):o.value=r.endOfDay(s);const _=r.getDiff(o.value,n.value,"days"),P=[n.value];for(let $=1;$<_;$++){const q=r.addDays(n.value,$);P.push(q)}P.push(o.value),i.value=P}}function x(v){const s=i.value.findIndex(_=>r.isSameDay(_,v));if(s===-1)i.value=[...i.value,v];else{const _=[...i.value];_.splice(s,1),i.value=_}}function V(v){e.multiple==="range"?I(v):e.multiple?x(v):i.value=[v]}return()=>l("div",{class:"v-date-picker-month"},[e.showWeek&&l("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&l("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[T(" ")]),c.value.map(v=>l("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[v]))]),l(Be,{name:w.value},{default:()=>{var v;return[l("div",{ref:t,key:(v=m.value[0].date)==null?void 0:v.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&r.getWeekdays(e.firstDayOfWeek).map(s=>l("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[s])),m.value.map((s,_)=>{const P={props:{onClick:()=>V(s.date)},item:s,i:_};return f.value&&!s.isSelected&&(s.isDisabled=!0),l("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":s.isAdjacent,"v-date-picker-month__day--hide-adjacent":s.isHidden,"v-date-picker-month__day--selected":s.isSelected,"v-date-picker-month__day--week-end":s.isWeekEnd,"v-date-picker-month__day--week-start":s.isWeekStart}],"data-v-date":s.isDisabled?void 0:s.isoDate},[(e.showAdjacentMonths||!s.isAdjacent)&&l(ke,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(s.isSelected||s.isToday)&&!s.isDisabled?e.color:void 0,disabled:s.isDisabled,icon:!0,ripple:!1,text:s.localized,variant:s.isDisabled?s.isToday?"outlined":"text":s.isToday&&!s.isSelected?"outlined":"flat",onClick:()=>V(s.date)}}},{default:()=>{var $;return[(($=u.day)==null?void 0:$.call(u,P))??l(H,P.props,null)]}})])})])]}})])}}),We=G({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Ae=K()({name:"VDatePickerMonths",props:We(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:D,slots:u}=a;const t=de(),m=oe(e,"modelValue"),i=C(()=>{let c=t.startOfYear(t.date());return e.year&&(c=t.setYear(c,e.year)),Oe(12).map(r=>{const n=t.format(c,"monthShort"),o=!!(e.min&&t.isAfter(t.startOfMonth(t.date(e.min)),c)||e.max&&t.isAfter(c,t.startOfMonth(t.date(e.max))));return c=t.getNextMonth(c),{isDisabled:o,text:n,value:r}})});return Ye(()=>{m.value=m.value??t.getMonth(t.date())}),ae(()=>l("div",{class:"v-date-picker-months",style:{height:He(e.height)}},[l("div",{class:"v-date-picker-months__content"},[i.value.map((c,r)=>{var k;const n={active:m.value===r,color:m.value===r?e.color:void 0,disabled:c.isDisabled,rounded:!0,text:c.text,variant:m.value===c.value?"flat":"text",onClick:()=>o(r)};function o(w){if(m.value===w){D("update:modelValue",m.value);return}m.value=w}return((k=u.month)==null?void 0:k.call(u,{month:c,i:r,props:n}))??l(H,U({key:"month"},n),null)})])])),{}}}),je=G({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),$e=K()({name:"VDatePickerYears",props:je(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:D,slots:u}=a;const t=de(),m=oe(e,"modelValue"),i=C(()=>{const r=t.getYear(t.date());let n=r-100,o=r+52;e.min&&(n=t.getYear(t.date(e.min))),e.max&&(o=t.getYear(t.date(e.max)));let k=t.startOfYear(t.date());return k=t.setYear(k,n),Oe(o-n+1,n).map(w=>{const f=t.format(k,"year");return k=t.setYear(k,t.getYear(k)+1),{text:f,value:w}})});Ye(()=>{m.value=m.value??t.getYear(t.date())});const c=ia();return Ee(async()=>{var r;await Ue(),(r=c.el)==null||r.scrollIntoView({block:"center"})}),ae(()=>l("div",{class:"v-date-picker-years",style:{height:He(e.height)}},[l("div",{class:"v-date-picker-years__content"},[i.value.map((r,n)=>{var k;const o={ref:m.value===r.value?c:void 0,active:m.value===r.value,color:m.value===r.value?e.color:void 0,rounded:!0,text:r.text,variant:m.value===r.value?"flat":"text",onClick:()=>{if(m.value===r.value){D("update:modelValue",m.value);return}m.value=r.value}};return((k=u.year)==null?void 0:k.call(u,{year:r,i:n,props:o}))??l(H,U({key:"month"},o),null)})])])),{}}}),Ra=G({header:{type:String,default:"$vuetify.datePicker.header"},...Re(),...Le({weeksInMonth:"static"}),...ie(We(),["modelValue"]),...ie(je(),["modelValue"]),...da({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),La=K()({name:"VDatePicker",props:Ra(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,a){let{emit:D,slots:u}=a;const t=de(),{t:m}=ua(),i=oe(e,"modelValue",void 0,h=>he(h),h=>e.multiple?h:h[0]),c=oe(e,"viewMode"),r=C(()=>{var N;const h=t.date((N=i.value)==null?void 0:N[0]);return h&&t.isValid(h)?h:t.date()}),n=A(Number(e.month??t.getMonth(t.startOfMonth(r.value)))),o=A(Number(e.year??t.getYear(t.startOfYear(t.setMonth(r.value,n.value))))),k=re(!1),w=C(()=>e.multiple&&i.value.length>1?m("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&t.isValid(i.value[0])?t.format(t.date(i.value[0]),"normalDateWithWeekday"):m(e.header)),f=C(()=>{let h=t.date();return h=t.setDate(h,1),h=t.setMonth(h,n.value),h=t.setYear(h,o.value),t.format(h,"monthAndYear")}),I=C(()=>`date-picker-header${k.value?"-reverse":""}-transition`),x=C(()=>{const h=t.date(e.min);return e.min&&t.isValid(h)?h:null}),V=C(()=>{const h=t.date(e.max);return e.max&&t.isValid(h)?h:null}),v=C(()=>{if(e.disabled)return!0;const h=[];if(c.value!=="month")h.push("prev","next");else{let N=t.date();if(N=t.setYear(N,o.value),N=t.setMonth(N,n.value),x.value){const O=t.addDays(t.startOfMonth(N),-1);t.isAfter(x.value,O)&&h.push("prev")}if(V.value){const O=t.addDays(t.endOfMonth(N),1);t.isAfter(O,V.value)&&h.push("next")}}return h});function s(){n.value<11?n.value++:(o.value++,n.value=0,Q(o.value)),B(n.value)}function _(){n.value>0?n.value--:(o.value--,n.value=11,Q(o.value)),B(n.value)}function P(){c.value="month"}function $(){c.value=c.value==="months"?"month":"months"}function q(){c.value=c.value==="year"?"month":"year"}function B(h){c.value==="months"&&$(),D("update:month",h)}function Q(h){c.value==="year"&&q(),D("update:year",h)}return z(i,(h,N)=>{const O=he(N),R=he(h);if(!R.length)return;const L=t.date(O[O.length-1]),W=t.date(R[R.length-1]),j=t.getMonth(W),y=t.getYear(W);j!==n.value&&(n.value=j,B(n.value)),y!==o.value&&(o.value=y,Q(o.value)),k.value=t.isBefore(L,W)}),ae(()=>{const h=Ve.filterProps(e),N=Ne.filterProps(e),O=Me.filterProps(e),R=Te.filterProps(e),L=ie(Ae.filterProps(e),["modelValue"]),W=ie($e.filterProps(e),["modelValue"]),j={header:w.value,transition:I.value};return l(Ve,U(h,{class:["v-date-picker",`v-date-picker--${c.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var y;return((y=u.title)==null?void 0:y.call(u))??l("div",{class:"v-date-picker__title"},[m(e.title)])},header:()=>u.header?l(ke,{defaults:{VDatePickerHeader:{...j}}},{default:()=>{var y;return[(y=u.header)==null?void 0:y.call(u,j)]}}):l(Me,U({key:"header"},O,j,{onClick:c.value!=="month"?P:void 0}),{...u,default:void 0}),default:()=>l(ge,null,[l(Ne,U(N,{disabled:v.value,text:f.value,"onClick:next":s,"onClick:prev":_,"onClick:month":$,"onClick:year":q}),null),l(ca,{hideOnLeave:!0},{default:()=>[c.value==="months"?l(Ae,U({key:"date-picker-months"},L,{modelValue:n.value,"onUpdate:modelValue":[y=>n.value=y,B],min:x.value,max:V.value,year:o.value}),null):c.value==="year"?l($e,U({key:"date-picker-years"},W,{modelValue:o.value,"onUpdate:modelValue":[y=>o.value=y,Q],min:x.value,max:V.value}),null):l(Te,U({key:"date-picker-month"},R,{modelValue:i.value,"onUpdate:modelValue":y=>i.value=y,month:n.value,"onUpdate:month":[y=>n.value=y,B],year:o.value,"onUpdate:year":[y=>o.value=y,Q],min:x.value,max:V.value}),null)]})]),actions:u.actions})}),{}}});function Wa(e){let{swiper:a,extendParams:D,on:u}=e;D({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let t=!1,m={};const i=f=>f.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),c=f=>{const I=ee();let x;f?x=new URL(f):x=I.location;const V=x.pathname.slice(1).split("/").filter(P=>P!==""),v=V.length,s=V[v-2],_=V[v-1];return{key:s,value:_}},r=(f,I)=>{const x=ee();if(!t||!a.params.history.enabled)return;let V;a.params.url?V=new URL(a.params.url):V=x.location;const v=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${I}"]`):a.slides[I];let s=i(v.getAttribute("data-history"));if(a.params.history.root.length>0){let P=a.params.history.root;P[P.length-1]==="/"&&(P=P.slice(0,P.length-1)),s=`${P}/${f?`${f}/`:""}${s}`}else V.pathname.includes(f)||(s=`${f?`${f}/`:""}${s}`);a.params.history.keepQuery&&(s+=V.search);const _=x.history.state;_&&_.value===s||(a.params.history.replaceState?x.history.replaceState({value:s},null,s):x.history.pushState({value:s},null,s))},n=(f,I,x)=>{if(I)for(let V=0,v=a.slides.length;V<v;V+=1){const s=a.slides[V];if(i(s.getAttribute("data-history"))===I){const P=a.getSlideIndex(s);a.slideTo(P,f,x)}}else a.slideTo(0,f,x)},o=()=>{m=c(a.params.url),n(a.params.speed,m.value,!1)},k=()=>{const f=ee();if(a.params.history){if(!f.history||!f.history.pushState){a.params.history.enabled=!1,a.params.hashNavigation.enabled=!0;return}if(t=!0,m=c(a.params.url),!m.key&&!m.value){a.params.history.replaceState||f.addEventListener("popstate",o);return}n(0,m.value,a.params.runCallbacksOnInit),a.params.history.replaceState||f.addEventListener("popstate",o)}},w=()=>{const f=ee();a.params.history.replaceState||f.removeEventListener("popstate",o)};u("init",()=>{a.params.history.enabled&&k()}),u("destroy",()=>{a.params.history.enabled&&w()}),u("transitionEnd _freeModeNoMomentumRelease",()=>{t&&r(a.params.history.key,a.activeIndex)}),u("slideChange",()=>{t&&a.params.cssMode&&r(a.params.history.key,a.activeIndex)})}function ja(e){let{swiper:a,extendParams:D,emit:u,on:t}=e,m=!1;const i=Ma(),c=ee();D({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(w,f){if(a.virtual&&a.params.virtual.enabled){const I=a.slides.filter(V=>V.getAttribute("data-hash")===f)[0];return I?parseInt(I.getAttribute("data-swiper-slide-index"),10):0}return a.getSlideIndex(Ta(a.slidesEl,`.${a.params.slideClass}[data-hash="${f}"], swiper-slide[data-hash="${f}"]`)[0])}}});const r=()=>{u("hashChange");const w=i.location.hash.replace("#",""),f=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${a.activeIndex}"]`):a.slides[a.activeIndex],I=f?f.getAttribute("data-hash"):"";if(w!==I){const x=a.params.hashNavigation.getSlideIndex(a,w);if(typeof x>"u"||Number.isNaN(x))return;a.slideTo(x)}},n=()=>{if(!m||!a.params.hashNavigation.enabled)return;const w=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${a.activeIndex}"]`):a.slides[a.activeIndex],f=w?w.getAttribute("data-hash")||w.getAttribute("data-history"):"";a.params.hashNavigation.replaceState&&c.history&&c.history.replaceState?(c.history.replaceState(null,null,`#${f}`||""),u("hashSet")):(i.location.hash=f||"",u("hashSet"))},o=()=>{if(!a.params.hashNavigation.enabled||a.params.history&&a.params.history.enabled)return;m=!0;const w=i.location.hash.replace("#","");if(w){const I=a.params.hashNavigation.getSlideIndex(a,w);a.slideTo(I||0,0,a.params.runCallbacksOnInit,!0)}a.params.hashNavigation.watchState&&c.addEventListener("hashchange",r)},k=()=>{a.params.hashNavigation.watchState&&c.removeEventListener("hashchange",r)};t("init",()=>{a.params.hashNavigation.enabled&&o()}),t("destroy",()=>{a.params.hashNavigation.enabled&&k()}),t("transitionEnd _freeModeNoMomentumRelease",()=>{m&&n()}),t("slideChange",()=>{m&&a.params.cssMode&&n()})}const Fe=e=>(Va("data-v-3d129a2b"),e=e(),Sa(),e),Fa=Fe(()=>qe("h1",null,"預約狗狗時間",-1)),za=Fe(()=>qe("h3",null,"可預約時段",-1)),Qa={__name:"booking",setup(e){const a=ya(),D=ba(),{mobile:u}=ma(),{backApi:t,apiAuth:m}=xa(),i=fa(),c=wa(),r=ha(),n=[Aa,$a,ja,Wa],o=C(()=>i.isLogin?i.account:"Guest"),k=A(null),w=A(new Date),f=C(()=>k.value===null||isNaN(k.value.getTime())?"左側選擇日期":k.value.toLocaleDateString()),I=g=>g>w.value,x=A([]);(async()=>{var g,p;try{const{data:d}=await t.get("/dogs");x.value.splice(0,x.value.length,...d.result.data)}catch(d){console.log(d),r({text:((p=(g=d==null?void 0:d.response)==null?void 0:g.data)==null?void 0:p.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const v=A({_id:"",image:"",dogName:"",age:0,price:0,booking:!0,bookingTime:[],feature:"",sell:!0,counter:0}),s=C(()=>v.value.image),_=A(null);z(_,(g,p)=>{if(g!==p)return y.value=[],k.value=null,ye.value.value=v.value.image});const P=()=>{a.query.id?(_.value=a.query.id,window.location.hash=`booking#${a.query.id}`,a.query.id=""):_.value=window.location.hash.substring(10)},$=()=>{P(),q()};Ee(()=>{setTimeout(()=>{P(),q()},500)});const q=async()=>{var g,p;if(_.value!==null)try{await Ue();const{data:d}=await t.get("/dogs/"+_.value);v.value._id=d.result._id,v.value.image=d.result.image,v.value.dogName=d.result.dogName,v.value.age=d.result.age,v.value.price=d.result.price,v.value.booking=d.result.booking,v.value.bookingTime=d.result.bookingTime,v.value.feature=d.result.feature,v.value.sell=d.result.sell,v.value.counter=d.result.counter}catch(d){console.log(d),r({text:((p=(g=d==null?void 0:d.response)==null?void 0:g.data)==null?void 0:p.message)||"發生錯誤",snackbarProps:{color:"red"}})}};q();const B=A(!1),Q=g=>{g.target.innerText==f.value.slice(-2).replace("/","")&&(B.value=!0)},h=pa({}),N=A(!1),O=()=>{N.value=!0},R=()=>{B.value=!1,N.value=!1},L=A(!1),W=()=>{L.value=!L.value},j=()=>{L.value=!1},y=A([]),ue=C(()=>y.value.length*2),ce=C(()=>v.value.price*y.value.length),ze=Pa({name:J().required("預約人名字必填"),phone:J().required("預約人電話必填"),dogName:J().required("狗狗名字必填"),bookingDate:J().required("預約日期必填"),bookingTime:Da().required("預約時段必填"),totalBookingTime:De().required("預約總時數必填").typeError("預約總時數格式錯誤").min(0,"預約總時數不能小於 0"),totalPrice:De().required("預約總金額必填").typeError("預約總金額格式錯誤").min(0,"預約總金額不能小於 0"),accountName:J().required("帳戶名稱必填"),orderStatus:Ca().required("訂單狀態必填")}),{handleSubmit:Qe,isSubmitting:ve,resetForm:Xe}=Ia({validationSchema:ze,initialValues:{name:o.value,phone:"",image:"",dogName:"",bookingDate:"",bookingTime:[],totalBookingTime:0,totalPrice:0,accountName:"",orderStatus:!0}}),te=Y("name"),me=Y("phone"),ye=Y("image"),Ge=Y("dogName"),Ke=Y("bookingDate"),Ze=Y("bookingTime"),Je=Y("totalBookingTime"),ea=Y("totalPrice"),aa=Y("accountName");Y("orderStatus"),z(f,(g,p)=>{if(g!==p)return aa.value.value=o.value,Ge.value.value=v.value.dogName,ye.value.value=v.value.image}),z(f,async(g,p)=>{if(g!==p)return y.value=[],Ke.value.value=f.value}),z(y,(g,p)=>{if(g!==p)return Ze.value.value=y.value.sort((d,S)=>parseInt(d)-parseInt(S))}),z(ue,(g,p)=>{if(g!==p)return Je.value.value=ue.value}),z(ce,(g,p)=>{if(g!==p)return ea.value.value=ce.value});const be=Qe(async g=>{var p,d;try{if(!i.isLogin){console.log("User.isLogin",i.isLogin),r({text:"請先登入會員",snackbarProps:{color:"red"}}),D.push("/login");return}const S=new FormData;S.append("name",g.name),S.append("phone",g.phone),S.append("image",g.image),S.append("dogName",g.dogName),S.append("bookingDate",g.bookingDate),S.append("bookingTime",g.bookingTime),S.append("totalBookingTime",g.totalBookingTime),S.append("totalPrice",g.totalPrice),S.append("accountName",g.accountName),S.append("orderStatus",g.orderStatus);const F=await c.createBookingOrder(S),ta={infor:[{title:"訂單編號",value:F.data.result.bookingOrderNumber},{title:"預約人",value:F.data.result.accountName},{title:"電話",value:F.data.result.phone},{title:"預約狗狗",value:F.data.result.dogName},{title:"預約日期",value:F.data.result.bookingDate},{title:"預約總金額",value:F.data.result.totalPrice+" 元"}],img:F.data.result.image};Object.assign(h,ta),O(),r({text:F.text,snackbarProps:{color:"green"}}),Xe(),k.value=null,y.value=[]}catch(S){console.log(S),r({text:((d=(p=S==null?void 0:S.response)==null?void 0:p.data)==null?void 0:d.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),xe=C(()=>({myClass:te.value.value.length>0}));return(g,p)=>(Z(),pe(Ha,{class:"text-center mt-8"},{default:b(()=>[Fa,l(M(Ba),{slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,pagination:{clickable:!0},navigation:!0,hashNavigation:{replaceState:!0,watchState:!0},modules:n,onSlideChangeTransitionEnd:$,class:"mySwiper my-10"},{default:b(()=>[(Z(!0),Se(ge,null,we(x.value,d=>(Z(),pe(M(Oa),{"data-hash":`/booking#${d._id}`},{default:b(()=>[l(E,{style:{width:"100%"}},{default:b(()=>[l(_a,U({ref_for:!0},d),null,16)]),_:2},1024)]),_:2},1032,["data-hash"]))),256))]),_:1}),l(Ie,{class:"my-7"},{default:b(()=>[l(se,{class:"d-flex flex-wrap justify-center",cols:"12",sm:"6"},{default:b(()=>[l(La,{width:"400",color:"primary",modelValue:k.value,"onUpdate:modelValue":p[0]||(p[0]=d=>k.value=d),"show-adjacent-months":"","allowed-dates":I,onClick:p[1]||(p[1]=d=>Q(d))},null,8,["modelValue"]),l(_e,{modelValue:B.value,"onUpdate:modelValue":p[3]||(p[3]=d=>B.value=d)},{default:b(()=>[l(Ce,null,{default:b(()=>[l(E,{class:"bg-white d-flex flex-column text-center justify-self-center align-self-center pa-7",width:"350",height:"240"},{default:b(()=>[za,l(Ya,{class:"my-4"}),(Z(!0),Se(ge,null,we(v.value.bookingTime.join(" ").split(",").sort((d,S)=>parseInt(d)-parseInt(S)),d=>(Z(),pe(Ua,{class:"d-flex justify-center",modelValue:y.value,"onUpdate:modelValue":p[2]||(p[2]=S=>y.value=S),label:d,value:d,"false-icon":"mdi-paw-outline","true-icon":"mdi-paw"},null,8,["modelValue","label","value"]))),256)),l(E,{class:"dialogClosePosition rounded-circle bg-transparent d-flex"},{default:b(()=>[l(H,{class:"rounded-circle d-flex pa-0 bg-white opacity-100","min-width":"60","min-height":"60",variant:"plain",onClick:R,flat:""},{default:b(()=>[l(Pe,{icon:L.value?"mdi-close-circle":"mdi-close-circle-outline",size:"48",color:"red-darken-4",onMouseover:W,onMouseout:W,onClick:j},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(E,{class:le(["bg-transparent d-flex align-center",M(u)?"mt-5":""])},{default:b(()=>[l(Pe,{icon:"mdi-message-alert",class:"me-1",color:"orange-darken-2"}),T("當天日期無法預約，若有需求，請來電洽詢，謝謝！")]),_:1},8,["class"])]),_:1}),l(se,{class:le(["d-flex justify-center",M(u)?"my-4":""])},{default:b(()=>[l(Ce,{class:"w-90",cols:"12",sm:"6",onSubmit:ga(M(be),["prevent"]),disabled:M(ve)},{default:b(()=>[l(X,{label:"預約人姓名",class:le(xe.value),modelValue:M(te).value.value,"onUpdate:modelValue":p[4]||(p[4]=d=>M(te).value.value=d),"error-messages":M(te).errorMessage.value},null,8,["class","modelValue","error-messages"]),l(X,{label:"預約人電話",class:le(xe.value),modelValue:M(me).value.value,"onUpdate:modelValue":p[5]||(p[5]=d=>M(me).value.value=d),"error-messages":M(me).errorMessage.value},null,8,["class","modelValue","error-messages"]),l(Ie,null,{default:b(()=>[l(se,{cols:"4",class:"pa-0 ps-3"},{default:b(()=>[l(E,{class:"bg-transparent my-2",elevation:"2",rounded:""},{default:b(()=>[l(ka,{src:s.value,height:"70",cover:""},null,8,["src"])]),_:1})]),_:1}),l(se,null,{default:b(()=>[l(X,{readonly:""},{default:b(()=>[T("預約狗狗： "),l(E,{class:"text-h6 font-weight-bold bg-transparent"},{default:b(()=>[T(ne(v.value.dogName),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(X,{readonly:""},{default:b(()=>[T("預約日期： "),l(E,{class:"text-h6 font-weight-bold bg-transparent"},{default:b(()=>[T(ne(f.value),1)]),_:1})]),_:1}),l(X,{readonly:""},{default:b(()=>[T("預約時段： "),l(Ea,{class:"my-0 pa-0 bg-transparent",items:y.value.sort((d,S)=>parseInt(d)-parseInt(S))},null,8,["items"])]),_:1}),l(X,{readonly:""},{default:b(()=>[T("預約總時數： "),l(E,{class:"text-h5 font-weight-bold bg-transparent"},{default:b(()=>[T(ne(ue.value),1)]),_:1}),T(" 小時 ")]),_:1}),l(X,{readonly:""},{default:b(()=>[T("總計金額： "),l(E,{class:"text-h5 font-weight-bold bg-transparent"},{default:b(()=>[T(ne(ce.value),1)]),_:1}),T(" 元 ")]),_:1}),l(H,{class:"w-40 mt-5",type:"submit",color:"green",loading:M(ve)},{default:b(()=>[T("送出預約")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1},8,["class"])]),_:1}),l(_e,{modelValue:N.value,"onUpdate:modelValue":p[6]||(p[6]=d=>N.value=d)},{default:b(()=>[l(M(Na),{bigTitle:"已預約資訊",orderInfoData:h.infor,orderInfoDataImg:h.img,dialogClose:R,submit:M(be),isSubmitting:M(ve)},null,8,["orderInfoData","orderInfoDataImg","submit","isSubmitting"])]),_:1},8,["modelValue"])]),_:1}))}},ot=va(Qa,[["__scopeId","data-v-3d129a2b"]]);export{ot as default};
