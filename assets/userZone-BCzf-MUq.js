import{_ as D,a as T,u as Z,i as H,r as c,c as O,o as f,j as P,w as t,e,V as r,g as Y,k as g,a2 as U,f as n,a0 as M,a6 as E,a1 as ee,a7 as te,a8 as ae,a3 as m,a9 as le,aa as oe,b as re,I as J,d as A,a4 as z,F as L,h as K,l as N}from"./index-D3kux_Fn.js";import{u as se,V as ne}from"./vee-validate.esm-CeLV511d.js";import{V as $}from"./VContainer-BAgjXYPB.js";import{V as ce}from"./VRow-Dam3VMel.js";import{V as Q}from"./VCol-Bbx30JkQ.js";import{a as ie,V as ue}from"./VList-DgtQa6mC.js";import{V as de,a as fe}from"./VNavigationDrawer-BE64coJ-.js";import"./VDivider-C3VS5dwT.js";const ge={__name:"userPhoto",setup(q){const d=T(),{mobile:i}=Z(),p=H(),y=c(d.image),u=c(null),v=c(!1),_=()=>{v.value=!0,B(),setTimeout(()=>{v.value=!1},1e3)},B=()=>{u.value.deleteFileRecord()},k=c(!1),b=()=>{k.value=!0},I=()=>{k.value=!1},a=c(!1),C=()=>{a.value=!a.value},R=()=>{I(),B(),a.value=!1},V=c([]),h=c([]),{handleSubmit:F,isSubmitting:S,resetForm:j}=se({initialValues:{fromCP:"userPhoto",image:"帳戶大頭照欄位"}}),G=F(async w=>{var l;if(!((l=V.value[0])!=null&&l.error))try{if(V.value.length>0)w.image=V.value[0].file;else if(v.value===!0)w.image=`https://api.multiavatar.com/${d.account}.png`;else if(v.value===!1&&V.value.length<1){p({text:"未選擇圖片上傳",snackbarProps:{color:"red",location:"center center"}});return}const o=new FormData;o.append("fromCP",w.fromCP),o.append("image",w.image);const s=await d.edit(o);s.text&&(y.value=s.reImage,p({text:s.text,snackbarProps:{color:"green"}})),I()}catch(o){console.log(o),p({text:result,snackbarProps:{color:"red"}})}});return(w,l)=>{const o=O("vue-file-agent");return f(),P($,{fluid:"",class:"pa-0 d-flex flex-column w-100 fill-height"},{default:t(()=>[e(r,{class:"bg-transparent",onClick:b},{default:t(()=>[e(Y,{src:y.value,class:"rounded-circle","min-width":"130","min-height":"130",cover:""},null,8,["src"]),e(g,{class:U(["d-flex justify-center align-center pa-0",n(i)?"mobileIconBtnPosition":"PCiconBtnPosition"]),flat:""},{default:t(()=>[e(M,{icon:"mdi-camera",class:U(n(i)?"mobileIconStyle":"PCiconStyle")},null,8,["class"])]),_:1},8,["class"])]),_:1}),e(E,{modelValue:k.value,"onUpdate:modelValue":l[2]||(l[2]=s=>k.value=s),width:"320",persistent:""},{default:t(()=>[e(ne,{onSubmit:ee(n(G),["prevent"]),disabled:n(S)},{default:t(()=>[e(te,{height:"370"},{default:t(()=>[e(ae,{class:"text-h6 font-weight-bold text-center pa-0 pt-7"},{default:t(()=>[m("目前大頭照")]),_:1}),e(le,{class:"pa-0 px-6 py-7 flex-grow-0"},{default:t(()=>[e(o,{modelValue:V.value,"onUpdate:modelValue":l[0]||(l[0]=s=>V.value=s),"raw-model-value":h.value,"onUpdate:rawModelValue":l[1]||(l[1]=s=>h.value=s),accept:"image/jpg,image/jpeg,image/png","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},deletable:"",ref_key:"fileAgent",ref:u},null,8,["modelValue","raw-model-value"])]),_:1}),e(oe,{class:"justify-center pa-0 pb-7"},{default:t(()=>[e(g,{class:"bg-grey-darken-2 me-5",type:"submit",loading:n(S),onClick:_},{default:t(()=>[m("預設圖片")]),_:1},8,["loading"]),e(g,{class:"bg-green w-25",type:"submit",loading:n(S)},{default:t(()=>[m("送出")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit","disabled"]),e(r,{class:"dialogClosePosition rounded-circle bg-transparent d-flex"},{default:t(()=>[e(g,{class:"rounded-circle d-flex pa-0 bg-grey-lighten-3 opacity-100","min-width":"60","min-height":"60",variant:"plain",onClick:w.dialogClose,flat:""},{default:t(()=>[e(M,{icon:a.value?"mdi-close-circle":"mdi-close-circle-outline",size:"48",color:"red-darken-4",onMouseover:C,onMouseout:C,onClick:R},null,8,["icon"])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},W=D(ge,[["__scopeId","data-v-f0f5f920"]]),me={__name:"userAccountBg",setup(q){const d=T(),{mobile:i}=Z(),p=H(),y={to:"/userZone",img:new URL(""+new URL("Dost_logo-CIekf1rM.png",import.meta.url).href,import.meta.url).href},u=c(d.accountBgImage),v=c(null),_=c(!1),B=()=>{_.value=!0,k(),setTimeout(()=>{_.value=!1},1e3)},k=()=>{v.value.deleteFileRecord()},b=c(!1),I=()=>{b.value=!0},a=()=>{b.value=!1},C=c(!1),R=()=>{C.value=!C.value},V=()=>{a(),k(),C.value=!1},h=c([]),F=c([]),{handleSubmit:S,isSubmitting:j,resetForm:G}=se({initialValues:{fromCP:"userAccountBg",accountBgImage:"帳戶背景圖片欄位"}}),w=S(async l=>{var o;if(!((o=h.value[0])!=null&&o.error))try{if(h.value.length>0)l.accountBgImage=h.value[0].file,console.log("userEditData.accountBgImage1",l.accountBgImage);else if(_.value===!0)l.accountBgImage=y.img;else if(_.value===!1&&h.value.length<1){p({text:"未選擇圖片上傳",snackbarProps:{color:"red",location:"center center"}});return}const s=new FormData;s.append("fromCP",l.fromCP),s.append("accountBgImage",l.accountBgImage);const x=await d.edit(s);x.text&&(u.value=x.reAccountBgImage,p({text:x.text,snackbarProps:{color:"green"}})),a()}catch(s){console.log(s),p({text:result,snackbarProps:{color:"red"}})}});return(l,o)=>{const s=O("vue-file-agent");return f(),P($,{fluid:"",class:"pa-0 fill-height"},{default:t(()=>[e(r,{class:U(["accountBgcss",u.value.includes("Dost_logo")?"accountBgRotateScale1":"accountBgRotateScale2"])},{default:t(()=>[e(Y,{src:u.value,class:"w-100 fill-height photoCss",cover:""},null,8,["src"])]),_:1},8,["class"]),e(g,{class:U(["d-flex justify-center align-center pa-0",n(i)?"mobileIconBtnPosition":"PCiconBtnPosition"]),flat:"",onClick:I},{default:t(()=>[e(M,{icon:"mdi-camera",class:U(n(i)?"mobileIconStyle":"PCiconStyle")},null,8,["class"])]),_:1},8,["class"]),e(E,{modelValue:b.value,"onUpdate:modelValue":o[2]||(o[2]=x=>b.value=x),width:"320",persistent:""},{default:t(()=>[e(ne,{onSubmit:ee(n(w),["prevent"]),disabled:n(j)},{default:t(()=>[e(te,{height:"370"},{default:t(()=>[e(ae,{class:"text-h6 font-weight-bold text-center pa-0 pt-7"},{default:t(()=>[m("目前背景圖")]),_:1}),e(le,{class:"pa-0 px-6 py-7 flex-grow-0"},{default:t(()=>[e(s,{modelValue:h.value,"onUpdate:modelValue":o[0]||(o[0]=x=>h.value=x),"raw-model-value":F.value,"onUpdate:rawModelValue":o[1]||(o[1]=x=>F.value=x),accept:"image/jpg,image/jpeg,image/png","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},deletable:"",ref_key:"fileAgent",ref:v},null,8,["modelValue","raw-model-value"])]),_:1}),e(oe,{class:"justify-center pa-0 pb-7"},{default:t(()=>[e(g,{class:"bg-grey-darken-2 me-5",type:"submit",loading:n(j),onClick:B},{default:t(()=>[m("預設圖片")]),_:1},8,["loading"]),e(g,{class:"bg-green w-25",type:"submit",loading:n(j)},{default:t(()=>[m("送出")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit","disabled"]),e(r,{class:"dialogClosePosition rounded-circle bg-transparent d-flex"},{default:t(()=>[e(g,{class:"rounded-circle d-flex pa-0 bg-grey-lighten-3 opacity-100","min-width":"60","min-height":"60",variant:"plain",onClick:l.dialogClose,flat:""},{default:t(()=>[e(M,{icon:C.value?"mdi-close-circle":"mdi-close-circle-outline",size:"48",color:"red-darken-4",onMouseover:R,onMouseout:R,onClick:V},null,8,["icon"])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},X=D(me,[["__scopeId","data-v-068aa38b"]]),pe={__name:"userZone",setup(q){const{mobile:d}=Z(),i=T(),p=re(),y=H(),u=c(!1),v=J(()=>d.value==!0?u.value=!1:u.value=!0);c(i.account),new URL(""+new URL("Dost_logo-CIekf1rM.png",import.meta.url).href,import.meta.url).href;const _=J(()=>[{to:"/",text:"回首頁",icon:"mdi-home"},{to:"/userZone",text:"會員基本資料",icon:"mdi-list-box"},{to:"/userZone/dogBookingSearch",text:"預約狗狗查詢",icon:"mdi-dog"},{to:"/",text:"狗狗適性測試結果",icon:"mdi-tooltip-edit"},{to:"/",text:"設定",icon:"mdi-cog-outline"}]),B=async()=>(await i.logout(),y({text:"登出成功",snackbarProps:{color:"green"}}),p.push("/"));return(k,b)=>{const I=O("router-view");return f(),A(L,null,[n(d)?(f(),P($,{key:0,class:"pa-0",fluid:""},{default:t(()=>[e(r,{class:"bg-transparent position-relative"},{default:t(()=>[e(r,{class:"overflow-hidden",height:"340px"},{default:t(()=>[e(X)]),_:1}),e(r,{class:"bg-transparent mobileUserPhotoPosition"},{default:t(()=>[e(r,{class:"d-flex justify-center mobileUserPhotoBorder"},{default:t(()=>[e(W)]),_:1}),e(r,{class:"bg-transparent text-center accountName"},{default:t(()=>[m(z(n(i).account),1)]),_:1})]),_:1})]),_:1}),e(r,{class:"bg-transparent mobileNavMargin"},{default:t(()=>[e(ce,{class:"px-5 ma-0"},{default:t(()=>[(f(!0),A(L,null,K(_.value,a=>(f(),P(Q,{key:a.to,cols:"6",class:"text-center pa-5"},{default:t(()=>[e(g,{class:"mobileNavCss bg-white",to:a.to,size:"80",variant:"flat",flat:"","active-color":"green-darken-1"},{default:t(()=>[e(M,{class:"text-light-blue-darken-4",icon:a.icon,size:"40"},null,8,["icon"])]),_:2},1032,["to"]),e(r,{class:"bg-transparent mt-3 text-blue-darken-4"},{default:t(()=>[m(z(a.text),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):N("",!0),n(d)?N("",!0):(f(),P(de,{key:1,class:"border-0 shadow-lg",position:"relative",modelValue:u.value,"onUpdate:modelValue":b[0]||(b[0]=a=>u.value=a),permanent:v.value},{default:t(()=>[e(r,{class:"bg-transparent w-100 fill-height position-absolute"},{default:t(()=>[e(r,{class:"overflow-hidden PCuserBgPosition BgOverlay"},{default:t(()=>[e(X)]),_:1})]),_:1}),e(r,{class:"bg-transparent PCuserPhotoPosition pa-5"},{default:t(()=>[e(r,{class:"PCuserPhoto"},{default:t(()=>[e(W)]),_:1}),e(r,{class:"bg-transparent text-center accountName mt-3"},{default:t(()=>[m(z(n(i).account),1)]),_:1})]),_:1}),e(ie,{class:"ps-6 py-4 Zindex text-grey-darken-2"},{default:t(()=>[(f(!0),A(L,null,K(_.value,a=>(f(),P(ue,{key:a.to,to:a.to,title:a.text,"prepend-icon":a.icon,class:"rounded-s-pill","active-class":"selectedStatus"},null,8,["to","title","prepend-icon"]))),128)),e(Q,{class:"d-flex justify-center mt-15"},{default:t(()=>[n(i).isLogin?(f(),P(g,{key:0,"prepend-icon":"mdi-account-arrow-right",class:"bg-deep-orange-darken-2",variant:"outlined",rounded:"",ripple:!1,onClick:B},{default:t(()=>[m("登出")]),_:1})):N("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","permanent"])),e(fe,null,{default:t(()=>[e(I)]),_:1})],64)}}},Ce=D(pe,[["__scopeId","data-v-cd25f4e8"]]);export{Ce as default};
