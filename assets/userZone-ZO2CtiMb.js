import{_ as z,a as A,i as T,r as c,c as H,o as l,j as f,w as t,e,V as o,f as I,k as h,a0 as M,a9 as E,a1 as G,h as p,aa as K,ab as Q,a2 as b,ac as W,ad as X,u as Y,b as ee,I as D,d as B,a3 as U,F as j,g as R,l as P}from"./index-BPP8pLfR.js";import{u as te,V as ae}from"./vee-validate.esm-BHS1Il1s.js";import{V as J,a as L}from"./VRow-D4Fe77u5.js";import{V as x}from"./VCol-BA1E6pxV.js";import{a as Z,V as F}from"./VList-CeVs699b.js";import{V as oe}from"./VDivider-DgVUsZ6h.js";import{V as le,a as se}from"./VNavigationDrawer-DD-H808g.js";const re=""+new URL("userZone_bg_01-修-CbFPSVuJ.png",import.meta.url).href,ne={__name:"userPhoto",setup(O){const u=A(),n=T(),V=c(u.image),w=c(null),m=()=>{w.value.deleteFileRecord()},g=c(!1),S=()=>{g.value=!0},_=()=>{g.value=!1},d=c(!1),k=()=>{d.value=!d.value},N=()=>{_(),m(),d.value=!1},i=c([]),y=c([]),{handleSubmit:a,isSubmitting:$,resetForm:ue}=te({initialValues:{image:"123"}}),q=a(async C=>{var s;if(!((s=i.value[0])!=null&&s.error))try{if(i.value.length>0)C.image=i.value[0].file;else{n({text:"未選擇圖片上傳",snackbarProps:{color:"red",location:"center center"}});return}const v=new FormData;v.append("image",C.image);const r=await u.edit(v);r.text==="上傳圖片成功"&&(V.value=r.reImage,n({text:r.text,snackbarProps:{color:"green"}})),_()}catch(v){console.log(v),n({text:result,snackbarProps:{color:"red"}})}});return(C,s)=>{const v=H("vue-file-agent");return l(),f(J,{fluid:"",class:"pa-0 d-flex flex-column"},{default:t(()=>[e(o,{class:"bg-transparent",onClick:S},{default:t(()=>[e(I,{src:V.value,class:"rounded-circle","min-width":"130","min-height":"130",cover:""},null,8,["src"]),e(h,{class:"iconBtnPosition d-flex justify-center align-center pa-0",flat:""},{default:t(()=>[e(M,{icon:"mdi-camera",class:"iconStyle"})]),_:1})]),_:1}),e(E,{modelValue:g.value,"onUpdate:modelValue":s[2]||(s[2]=r=>g.value=r),width:"320",persistent:""},{default:t(()=>[e(ae,{onSubmit:G(p(q),["prevent"])},{default:t(()=>[e(K,{height:"370"},{default:t(()=>[e(Q,{class:"text-h6 font-weight-bold text-center pa-0 pt-7"},{default:t(()=>[b("目前大頭照")]),_:1}),e(W,{class:"pa-0 px-6 py-7 flex-grow-0"},{default:t(()=>[e(v,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=r=>i.value=r),"raw-model-value":y.value,"onUpdate:rawModelValue":s[1]||(s[1]=r=>y.value=r),accept:"image/jpg,image/jpeg,image/png","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},deletable:"",ref_key:"fileAgent",ref:w},null,8,["modelValue","raw-model-value"])]),_:1}),e(X,{class:"justify-center pa-0 pb-7"},{default:t(()=>[e(h,{class:"bg-green w-25",type:"submit",loading:p($)},{default:t(()=>[b("送出")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit"]),e(o,{class:"dialogClosePosition rounded-circle bg-transparent d-flex"},{default:t(()=>[e(h,{class:"rounded-circle d-flex pa-0 bg-grey-lighten-3 opacity-100","min-width":"60","min-height":"60",variant:"plain",onClick:C.dialogClose,flat:""},{default:t(()=>[e(M,{icon:d.value?"mdi-close-circle":"mdi-close-circle-outline",size:"48",color:"red-darken-4",onMouseover:k,onMouseout:k,onClick:N},null,8,["icon"])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},ie=z(ne,[["__scopeId","data-v-eba5a870"]]),ce={__name:"userZone",setup(O){const{mobile:u}=Y(),n=A(),V=ee(),w=T(),m=c(!1),g=D(()=>u.value==!0?m.value=!1:m.value=!0),S=c(n.account),_={to:"/userZone",img:new URL(""+new URL("Dost_logo-CIekf1rM.png",import.meta.url).href,import.meta.url).href},d=D(()=>[{to:"/",text:"回首頁",icon:"mdi-home"},{to:"/userZone",text:"會員基本資料",icon:"mdi-list-box"},{to:"/userZone/dogBookingSearch",text:"預約狗狗查詢",icon:"mdi-dog"},{to:"/",text:"狗狗適性測試結果",icon:"mdi-tooltip-edit"},{to:"/",text:"設定",icon:"mdi-cog-outline"}]),k=async()=>(await n.logout(),w({text:"登出成功",snackbarProps:{color:"green"}}),V.push("/"));return(N,i)=>{const y=H("router-view");return l(),B(j,null,[p(u)?(l(),f(J,{key:0,class:"pa-0",fluid:""},{default:t(()=>[e(o,{class:"bg-transparent position-relative"},{default:t(()=>[e(o,{class:"bg-white d-flex justify-center overflow-hidden","max-width":"auto","max-height":"360px"},{default:t(()=>[e(o,{class:"accountBgcss"})]),_:1}),e(o,{class:"bg-transparent userPhotoPosition"},{default:t(()=>[e(o,{class:"d-flex justify-center userPhotoBorder"},{default:t(()=>[e(ie)]),_:1}),e(o,{class:"bg-transparent text-center accountName"},{default:t(()=>[b(U(p(n).account),1)]),_:1})]),_:1})]),_:1}),e(o,{class:"bg-transparent mobileNavMargin"},{default:t(()=>[e(L,{class:"px-5 ma-0"},{default:t(()=>[(l(!0),B(j,null,R(d.value,a=>(l(),f(x,{key:a.to,cols:"6",class:"text-center pa-5"},{default:t(()=>[e(h,{class:"mobileNavCss bg-white",to:a.to,size:"80",variant:"flat",flat:"","active-color":"green-darken-1"},{default:t(()=>[e(M,{class:"text-light-blue-darken-4",icon:a.icon,size:"40"},null,8,["icon"])]),_:2},1032,["to"]),e(o,{class:"bg-transparent mt-3 text-blue-darken-4"},{default:t(()=>[b(U(a.text),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):P("",!0),p(u)?P("",!0):(l(),f(le,{key:1,class:"border-0",position:"relative",modelValue:m.value,"onUpdate:modelValue":i[0]||(i[0]=a=>m.value=a),permanent:g.value},{image:t(()=>[e(I,{src:re,height:"1000",cover:""})]),default:t(()=>[p(u)?P("",!0):(l(),f(Z,{key:0,class:"d-flex align-center pa-0 ma-4"},{default:t(()=>[e(x,{class:"pa-0 d-flex justify-end pe-4"},{default:t(()=>[e(F,{class:"rounded-circle pa-2",color:"white",width:" 70",height:"70",to:_.to,ripple:!1},{default:t(()=>[e(I,{src:_.img,cover:""},null,8,["src"])]),_:1},8,["to"])]),_:1}),e(x,null,{default:t(()=>[e(L,{class:"d-flex flex-column"},{default:t(()=>[e(x,{class:"pa-0"},{default:t(()=>[e(F,{to:_.to,ripple:!1,"min-height":"0",class:"d-flex align-center pa-0 text-overline",text:"會員專區"},null,8,["to"])]),_:1}),e(x,{class:"pa-0"},{default:t(()=>[e(o,{class:"bg-transparent accountName d-flex"},{default:t(()=>[b(U(S.value),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})),e(oe),e(Z,{class:"px-6 py-4"},{default:t(()=>[(l(!0),B(j,null,R(d.value,a=>(l(),f(F,{key:a.to,to:a.to,title:a.text,"prepend-icon":a.icon,"border-radius":"50",color:"light-blue-darken-2"},null,8,["to","title","prepend-icon"]))),128))]),_:1}),e(x,{class:"d-flex justify-center mt-5"},{default:t(()=>[p(n).isLogin?(l(),f(h,{key:0,"prepend-icon":"mdi-account-arrow-right",class:"bg-deep-orange-darken-2 bottom-0 mb-11",position:"absolute",variant:"outlined",rounded:"",ripple:!1,onClick:k},{default:t(()=>[b("登出")]),_:1})):P("",!0)]),_:1})]),_:1},8,["modelValue","permanent"])),e(se,null,{default:t(()=>[e(y)]),_:1})],64)}}},xe=z(ce,[["__scopeId","data-v-d6b2b0f2"]]);export{xe as default};
