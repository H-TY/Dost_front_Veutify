import{p as X,aw as ue,q as Z,I as P,s as ee,e as n,k as q,aN as Je,z as ea,aR as Ie,K as he,aS as aa,aT as ta,r as H,aU as na,aV as ie,H as se,O as j,a2 as T,S as re,aW as Te,X as Ae,W,L as Oe,aX as la,P as $e,aq as Be,av as oe,aY as sa,aZ as ra,a_ as ye,F as me,a$ as oa,b0 as ce,_ as ia,u as da,a as ua,i as ca,o as G,j as ve,w as b,d as be,g as xe,h as A,a9 as va,V as U,a0 as Ve,a4 as te,a1 as ma,a5 as Q,f as ha,a3 as ne,b1 as fa,b as pa,aQ as ga,a6 as ka,a7 as ya,a8 as Ye}from"./index-hrT1P01M.js";import{u as ba}from"./bookingOrder-DDcCWCK0.js";import{_ as xa}from"./dogsCard-CZGcgXBe.js";import{c as Va,a as K,d as Sa,b as Se,e as _a,u as wa,f as Y,V as _e}from"./vee-validate.esm-AH0pTEB2.js";import{g as J,b as Pa,e as Da,P as Ca,N as Na,S as Ma,a as Ia}from"./pagination-fhJVyaRM.js";import{V as le}from"./VCol-M2wSmUbX.js";import{V as Ta}from"./VDivider-D9nP8vQ5.js";import{a as we,V as Aa}from"./VRow-BbJ-UvNj.js";import{a as Oa}from"./VList-B69F-rmg.js";import{V as $a}from"./VCheckbox-CSQ9XIVJ.js";import"./VCheckboxBtn-DfqmiaKl.js";const He=X({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:ue,default:"$next"},prevIcon:{type:ue,default:"$prev"},modeIcon:{type:ue,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Pe=Z()({name:"VDatePickerControls",props:He(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,a){let{emit:D}=a;const i=P(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),t=P(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),m=P(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),d=P(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function c(){D("click:prev")}function r(){D("click:next")}function l(){D("click:year")}function o(){D("click:month")}return ee(()=>n("div",{class:["v-date-picker-controls"]},[n(q,{class:"v-date-picker-controls__month-btn",disabled:i.value,text:e.text,variant:"text",rounded:!0,onClick:o},null),n(q,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:t.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:l},null),n(Je,{key:"mode-spacer"},null),n("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[n(q,{disabled:m.value,icon:e.prevIcon,variant:"text",onClick:c},null),n(q,{disabled:d.value,icon:e.nextIcon,variant:"text",onClick:r},null)])])),{}}}),Ba=X({appendIcon:String,color:String,header:String,transition:String,onClick:aa()},"VDatePickerHeader"),De=Z()({name:"VDatePickerHeader",props:Ba(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,a){let{emit:D,slots:i}=a;const{backgroundColorClasses:t,backgroundColorStyles:m}=ea(e,"color");function d(){D("click")}function c(){D("click:append")}return ee(()=>{const r=!!(i.default||e.header),l=!!(i.append||e.appendIcon);return n("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},t.value],style:m.value,onClick:d},[i.prepend&&n("div",{key:"prepend",class:"v-date-picker-header__prepend"},[i.prepend()]),r&&n(Ie,{key:"content",name:e.transition},{default:()=>{var o;return[n("div",{key:e.header,class:"v-date-picker-header__content"},[((o=i.default)==null?void 0:o.call(i))??e.header])]}}),l&&n("div",{class:"v-date-picker-header__append"},[i.append?n(he,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var o;return[(o=i.append)==null?void 0:o.call(i)]}}):n(q,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:c},null)])])}),{}}}),Ee=X({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...ta()},"VDatePickerMonth"),Ce=Z()({name:"VDatePickerMonth",props:Ee(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,a){let{emit:D,slots:i}=a;const t=H(),{daysInMonth:m,model:d,weekNumbers:c}=na(e),r=ie(),l=se(),o=se(),k=se(!1),S=P(()=>k.value?e.reverseTransition:e.transition);e.multiple==="range"&&d.value.length>0&&(l.value=d.value[0],d.value.length>1&&(o.value=d.value[d.value.length-1]));const h=P(()=>{const v=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return d.value.length>=v});j(m,(v,s)=>{s&&(k.value=r.isBefore(v[0].date,s[0].date))});function C(v){const s=r.startOfDay(v);if(d.value.length===0?l.value=void 0:d.value.length===1&&(l.value=d.value[0],o.value=void 0),!l.value)l.value=s,d.value=[l.value];else if(o.value)l.value=v,o.value=void 0,d.value=[l.value];else{if(r.isSameDay(s,l.value)){l.value=void 0,d.value=[];return}else r.isBefore(s,l.value)?(o.value=r.endOfDay(l.value),l.value=s):o.value=r.endOfDay(s);const _=r.getDiff(o.value,l.value,"days"),w=[l.value];for(let O=1;O<_;O++){const L=r.addDays(l.value,O);w.push(L)}w.push(o.value),d.value=w}}function y(v){const s=d.value.findIndex(_=>r.isSameDay(_,v));if(s===-1)d.value=[...d.value,v];else{const _=[...d.value];_.splice(s,1),d.value=_}}function V(v){e.multiple==="range"?C(v):e.multiple?y(v):d.value=[v]}return()=>n("div",{class:"v-date-picker-month"},[e.showWeek&&n("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&n("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[T(" ")]),c.value.map(v=>n("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[v]))]),n(Ie,{name:S.value},{default:()=>{var v;return[n("div",{ref:t,key:(v=m.value[0].date)==null?void 0:v.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&r.getWeekdays(e.firstDayOfWeek).map(s=>n("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[s])),m.value.map((s,_)=>{const w={props:{onClick:()=>V(s.date)},item:s,i:_};return h.value&&!s.isSelected&&(s.isDisabled=!0),n("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":s.isAdjacent,"v-date-picker-month__day--hide-adjacent":s.isHidden,"v-date-picker-month__day--selected":s.isSelected,"v-date-picker-month__day--week-end":s.isWeekEnd,"v-date-picker-month__day--week-start":s.isWeekStart}],"data-v-date":s.isDisabled?void 0:s.isoDate},[(e.showAdjacentMonths||!s.isAdjacent)&&n(he,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(s.isSelected||s.isToday)&&!s.isDisabled?e.color:void 0,disabled:s.isDisabled,icon:!0,ripple:!1,text:s.localized,variant:s.isDisabled?s.isToday?"outlined":"text":s.isToday&&!s.isSelected?"outlined":"flat",onClick:()=>V(s.date)}}},{default:()=>{var O;return[((O=i.day)==null?void 0:O.call(i,w))??n(q,w.props,null)]}})])})])]}})])}}),qe=X({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Ne=Z()({name:"VDatePickerMonths",props:qe(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:D,slots:i}=a;const t=ie(),m=re(e,"modelValue"),d=P(()=>{let c=t.startOfYear(t.date());return e.year&&(c=t.setYear(c,e.year)),Te(12).map(r=>{const l=t.format(c,"monthShort"),o=!!(e.min&&t.isAfter(t.startOfMonth(t.date(e.min)),c)||e.max&&t.isAfter(c,t.startOfMonth(t.date(e.max))));return c=t.getNextMonth(c),{isDisabled:o,text:l,value:r}})});return Ae(()=>{m.value=m.value??t.getMonth(t.date())}),ee(()=>n("div",{class:"v-date-picker-months",style:{height:Oe(e.height)}},[n("div",{class:"v-date-picker-months__content"},[d.value.map((c,r)=>{var k;const l={active:m.value===r,color:m.value===r?e.color:void 0,disabled:c.isDisabled,rounded:!0,text:c.text,variant:m.value===c.value?"flat":"text",onClick:()=>o(r)};function o(S){if(m.value===S){D("update:modelValue",m.value);return}m.value=S}return((k=i.month)==null?void 0:k.call(i,{month:c,i:r,props:l}))??n(q,W({key:"month"},l),null)})])])),{}}}),Re=X({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),Me=Z()({name:"VDatePickerYears",props:Re(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:D,slots:i}=a;const t=ie(),m=re(e,"modelValue"),d=P(()=>{const r=t.getYear(t.date());let l=r-100,o=r+52;e.min&&(l=t.getYear(t.date(e.min))),e.max&&(o=t.getYear(t.date(e.max)));let k=t.startOfYear(t.date());return k=t.setYear(k,l),Te(o-l+1,l).map(S=>{const h=t.format(k,"year");return k=t.setYear(k,t.getYear(k)+1),{text:h,value:S}})});Ae(()=>{m.value=m.value??t.getYear(t.date())});const c=la();return $e(async()=>{var r;await Be(),(r=c.el)==null||r.scrollIntoView({block:"center"})}),ee(()=>n("div",{class:"v-date-picker-years",style:{height:Oe(e.height)}},[n("div",{class:"v-date-picker-years__content"},[d.value.map((r,l)=>{var k;const o={ref:m.value===r.value?c:void 0,active:m.value===r.value,color:m.value===r.value?e.color:void 0,rounded:!0,text:r.text,variant:m.value===r.value?"flat":"text",onClick:()=>{if(m.value===r.value){D("update:modelValue",m.value);return}m.value=r.value}};return((k=i.year)==null?void 0:k.call(i,{year:r,i:l,props:o}))??n(q,W({key:"month"},o),null)})])])),{}}}),Ya=X({header:{type:String,default:"$vuetify.datePicker.header"},...He(),...Ee({weeksInMonth:"static"}),...oe(qe(),["modelValue"]),...oe(Re(),["modelValue"]),...sa({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Ha=Z()({name:"VDatePicker",props:Ya(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,a){let{emit:D,slots:i}=a;const t=ie(),{t:m}=ra(),d=re(e,"modelValue",void 0,f=>ce(f),f=>e.multiple?f:f[0]),c=re(e,"viewMode"),r=P(()=>{var M;const f=t.date((M=d.value)==null?void 0:M[0]);return f&&t.isValid(f)?f:t.date()}),l=H(Number(e.month??t.getMonth(t.startOfMonth(r.value)))),o=H(Number(e.year??t.getYear(t.startOfYear(t.setMonth(r.value,l.value))))),k=se(!1),S=P(()=>e.multiple&&d.value.length>1?m("$vuetify.datePicker.itemsSelected",d.value.length):d.value[0]&&t.isValid(d.value[0])?t.format(t.date(d.value[0]),"normalDateWithWeekday"):m(e.header)),h=P(()=>{let f=t.date();return f=t.setDate(f,1),f=t.setMonth(f,l.value),f=t.setYear(f,o.value),t.format(f,"monthAndYear")}),C=P(()=>`date-picker-header${k.value?"-reverse":""}-transition`),y=P(()=>{const f=t.date(e.min);return e.min&&t.isValid(f)?f:null}),V=P(()=>{const f=t.date(e.max);return e.max&&t.isValid(f)?f:null}),v=P(()=>{if(e.disabled)return!0;const f=[];if(c.value!=="month")f.push("prev","next");else{let M=t.date();if(M=t.setYear(M,o.value),M=t.setMonth(M,l.value),y.value){const $=t.addDays(t.startOfMonth(M),-1);t.isAfter(y.value,$)&&f.push("prev")}if(V.value){const $=t.addDays(t.endOfMonth(M),1);t.isAfter($,V.value)&&f.push("next")}}return f});function s(){l.value<11?l.value++:(o.value++,l.value=0,F(o.value)),E(l.value)}function _(){l.value>0?l.value--:(o.value--,l.value=11,F(o.value)),E(l.value)}function w(){c.value="month"}function O(){c.value=c.value==="months"?"month":"months"}function L(){c.value=c.value==="year"?"month":"year"}function E(f){c.value==="months"&&O(),D("update:month",f)}function F(f){c.value==="year"&&L(),D("update:year",f)}return j(d,(f,M)=>{const $=ce(M),z=ce(f);if(!z.length)return;const I=t.date($[$.length-1]),R=t.date(z[z.length-1]),B=t.getMonth(R),N=t.getYear(R);B!==l.value&&(l.value=B,E(l.value)),N!==o.value&&(o.value=N,F(o.value)),k.value=t.isBefore(I,R)}),ee(()=>{const f=ye.filterProps(e),M=Pe.filterProps(e),$=De.filterProps(e),z=Ce.filterProps(e),I=oe(Ne.filterProps(e),["modelValue"]),R=oe(Me.filterProps(e),["modelValue"]),B={header:S.value,transition:C.value};return n(ye,W(f,{class:["v-date-picker",`v-date-picker--${c.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var N;return((N=i.title)==null?void 0:N.call(i))??n("div",{class:"v-date-picker__title"},[m(e.title)])},header:()=>i.header?n(he,{defaults:{VDatePickerHeader:{...B}}},{default:()=>{var N;return[(N=i.header)==null?void 0:N.call(i,B)]}}):n(De,W({key:"header"},$,B,{onClick:c.value!=="month"?w:void 0}),{...i,default:void 0}),default:()=>n(me,null,[n(Pe,W(M,{disabled:v.value,text:h.value,"onClick:next":s,"onClick:prev":_,"onClick:month":O,"onClick:year":L}),null),n(oa,{hideOnLeave:!0},{default:()=>[c.value==="months"?n(Ne,W({key:"date-picker-months"},I,{modelValue:l.value,"onUpdate:modelValue":[N=>l.value=N,E],min:y.value,max:V.value,year:o.value}),null):c.value==="year"?n(Me,W({key:"date-picker-years"},R,{modelValue:o.value,"onUpdate:modelValue":[N=>o.value=N,F],min:y.value,max:V.value}),null):n(Ce,W({key:"date-picker-month"},z,{modelValue:d.value,"onUpdate:modelValue":N=>d.value=N,month:l.value,"onUpdate:month":[N=>l.value=N,E],year:o.value,"onUpdate:year":[N=>o.value=N,F],min:y.value,max:V.value}),null)]})]),actions:i.actions})}),{}}});function Ea(e){let{swiper:a,extendParams:D,on:i}=e;D({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let t=!1,m={};const d=h=>h.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),c=h=>{const C=J();let y;h?y=new URL(h):y=C.location;const V=y.pathname.slice(1).split("/").filter(w=>w!==""),v=V.length,s=V[v-2],_=V[v-1];return{key:s,value:_}},r=(h,C)=>{const y=J();if(!t||!a.params.history.enabled)return;let V;a.params.url?V=new URL(a.params.url):V=y.location;const v=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${C}"]`):a.slides[C];let s=d(v.getAttribute("data-history"));if(a.params.history.root.length>0){let w=a.params.history.root;w[w.length-1]==="/"&&(w=w.slice(0,w.length-1)),s=`${w}/${h?`${h}/`:""}${s}`}else V.pathname.includes(h)||(s=`${h?`${h}/`:""}${s}`);a.params.history.keepQuery&&(s+=V.search);const _=y.history.state;_&&_.value===s||(a.params.history.replaceState?y.history.replaceState({value:s},null,s):y.history.pushState({value:s},null,s))},l=(h,C,y)=>{if(C)for(let V=0,v=a.slides.length;V<v;V+=1){const s=a.slides[V];if(d(s.getAttribute("data-history"))===C){const w=a.getSlideIndex(s);a.slideTo(w,h,y)}}else a.slideTo(0,h,y)},o=()=>{m=c(a.params.url),l(a.params.speed,m.value,!1)},k=()=>{const h=J();if(a.params.history){if(!h.history||!h.history.pushState){a.params.history.enabled=!1,a.params.hashNavigation.enabled=!0;return}if(t=!0,m=c(a.params.url),!m.key&&!m.value){a.params.history.replaceState||h.addEventListener("popstate",o);return}l(0,m.value,a.params.runCallbacksOnInit),a.params.history.replaceState||h.addEventListener("popstate",o)}},S=()=>{const h=J();a.params.history.replaceState||h.removeEventListener("popstate",o)};i("init",()=>{a.params.history.enabled&&k()}),i("destroy",()=>{a.params.history.enabled&&S()}),i("transitionEnd _freeModeNoMomentumRelease",()=>{t&&r(a.params.history.key,a.activeIndex)}),i("slideChange",()=>{t&&a.params.cssMode&&r(a.params.history.key,a.activeIndex)})}function qa(e){let{swiper:a,extendParams:D,emit:i,on:t}=e,m=!1;const d=Pa(),c=J();D({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(S,h){if(a.virtual&&a.params.virtual.enabled){const C=a.slides.filter(V=>V.getAttribute("data-hash")===h)[0];return C?parseInt(C.getAttribute("data-swiper-slide-index"),10):0}return a.getSlideIndex(Da(a.slidesEl,`.${a.params.slideClass}[data-hash="${h}"], swiper-slide[data-hash="${h}"]`)[0])}}});const r=()=>{i("hashChange");const S=d.location.hash.replace("#",""),h=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${a.activeIndex}"]`):a.slides[a.activeIndex],C=h?h.getAttribute("data-hash"):"";if(S!==C){const y=a.params.hashNavigation.getSlideIndex(a,S);if(typeof y>"u"||Number.isNaN(y))return;a.slideTo(y)}},l=()=>{if(!m||!a.params.hashNavigation.enabled)return;const S=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${a.activeIndex}"]`):a.slides[a.activeIndex],h=S?S.getAttribute("data-hash")||S.getAttribute("data-history"):"";a.params.hashNavigation.replaceState&&c.history&&c.history.replaceState?(c.history.replaceState(null,null,`#${h}`||""),i("hashSet")):(d.location.hash=h||"",i("hashSet"))},o=()=>{if(!a.params.hashNavigation.enabled||a.params.history&&a.params.history.enabled)return;m=!0;const S=d.location.hash.replace("#","");if(S){const C=a.params.hashNavigation.getSlideIndex(a,S);a.slideTo(C||0,0,a.params.runCallbacksOnInit,!0)}a.params.hashNavigation.watchState&&c.addEventListener("hashchange",r)},k=()=>{a.params.hashNavigation.watchState&&c.removeEventListener("hashchange",r)};t("init",()=>{a.params.hashNavigation.enabled&&o()}),t("destroy",()=>{a.params.hashNavigation.enabled&&k()}),t("transitionEnd _freeModeNoMomentumRelease",()=>{m&&l()}),t("slideChange",()=>{m&&a.params.cssMode&&l()})}const Ue=e=>(ka("data-v-ef5aa120"),e=e(),ya(),e),Ra=Ue(()=>Ye("h1",null,"預約狗狗時間",-1)),Ua=Ue(()=>Ye("h3",null,"可預約時段",-1)),Wa={__name:"booking",setup(e){const a=fa(),D=pa(),{mobile:i}=da(),{backApi:t,apiAuth:m}=ga(),d=ua(),c=ba(),r=ca(),l=[Ca,Na,qa,Ea],o=P(()=>{if(!d.isLogin){D.push("/login");return}return d.account}),k=H(null),S=H(new Date),h=P(()=>k.value===null||isNaN(k.value.getTime())?"左側選擇日期":k.value.toLocaleDateString()),C=p=>p>S.value,y=H([]);(async()=>{var p,g;try{const{data:u}=await t.get("/dogs");y.value.splice(0,y.value.length,...u.result.data)}catch(u){console.log(u),r({text:((g=(p=u==null?void 0:u.response)==null?void 0:p.data)==null?void 0:g.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const v=H({_id:"",image:"",dogName:"",age:0,price:0,booking:!0,bookingTime:[],feature:"",sell:!0,counter:0}),s=P(()=>v.value.image),_=H(null);j(_,(p,g)=>{if(p!==g)return I.value=[],k.value=null,ge.value.value=v.value.image});const w=()=>{a.query.id?(_.value=a.query.id,window.location.hash=`booking#${a.query.id}`,a.query.id=""):_.value=window.location.hash.substring(10)},O=()=>{w(),L()};$e(()=>{setTimeout(()=>{w(),L()},500)});const L=async()=>{var p,g;if(_.value!==null)try{await Be();const{data:u}=await t.get("/dogs/"+_.value);v.value._id=u.result._id,v.value.image=u.result.image,v.value.dogName=u.result.dogName,v.value.age=u.result.age,v.value.price=u.result.price,v.value.booking=u.result.booking,v.value.bookingTime=u.result.bookingTime,v.value.feature=u.result.feature,v.value.sell=u.result.sell,v.value.counter=u.result.counter}catch(u){console.log(u),r({text:((g=(p=u==null?void 0:u.response)==null?void 0:p.data)==null?void 0:g.message)||"發生錯誤",snackbarProps:{color:"red"}})}};L();const E=H(!1),F=p=>{p.target.innerText==h.value.slice(-2).replace("/","")&&(E.value=!0)},f=()=>{E.value=!1},M=H(!1),$=()=>{M.value=!M.value},z=()=>{M.value=!1},I=H([]),R=P(()=>I.value.length*2),B=P(()=>v.value.price*I.value.length),N=Va({bookingOrderNumber:K().required("預約訂單編號必填"),name:K().required("預約人名字必填"),phone:K().required("預約人電話必填"),dogName:K().required("狗狗名字必填"),bookingDate:K().required("預約日期必填"),bookingTime:Sa().required("預約時段必填"),totalBookingTime:Se().required("預約總時數必填").typeError("預約總時數格式錯誤").min(0,"預約總時數不能小於 0"),totalPrice:Se().required("預約總金額必填").typeError("預約總金額格式錯誤").min(0,"預約總金額不能小於 0"),accountName:K().required("帳戶名稱必填"),orderStatus:_a().required("訂單狀態必填")}),{handleSubmit:We,isSubmitting:fe,resetForm:Le}=wa({validationSchema:N,initialValues:{bookingOrderNumber:"",name:o.value,phone:"",image:"",dogName:"",bookingDate:"",bookingTime:[],totalBookingTime:0,totalPrice:0,accountName:"",orderStatus:!0}}),pe=Y("bookingOrderNumber"),ae=Y("name"),de=Y("phone"),ge=Y("image"),je=Y("dogName"),Fe=Y("bookingDate"),ze=Y("bookingTime"),Qe=Y("totalBookingTime"),Ke=Y("totalPrice"),Xe=Y("accountName");Y("orderStatus"),j(h,(p,g)=>{if(p!==g)return Xe.value.value=o.value,je.value.value=v.value.dogName,ge.value.value=v.value.image}),(()=>{c.endBookingOrderData()})();const Ze=P(()=>c.bookingOrderNumber);j(h,async(p,g)=>{if(p!==g)return I.value=[],Fe.value.value=h.value,pe.value.value=(Ze.value*1+1).toString(),console.log("OK_bookingOrderNumber",pe.value.value)}),j(I,(p,g)=>{if(p!==g)return ze.value.value=I.value.sort((u,x)=>parseInt(u)-parseInt(x))}),j(R,(p,g)=>{if(p!==g)return Qe.value.value=R.value}),j(B,(p,g)=>{if(p!==g)return Ke.value.value=B.value});const Ge=We(async p=>{var g,u;try{const x=new FormData;x.append("bookingOrderNumber",p.bookingOrderNumber),x.append("name",p.name),x.append("phone",p.phone),x.append("image",p.image),x.append("dogName",p.dogName),x.append("bookingDate",p.bookingDate),x.append("bookingTime",p.bookingTime),x.append("totalBookingTime",p.totalBookingTime),x.append("totalPrice",p.totalPrice),x.append("accountName",p.accountName),x.append("orderStatus",p.orderStatus),await m.post("/order",x),r({text:"預約成功",snackbarProps:{color:"green"}}),Le(),k.value=null,I.value=[],B.value=0}catch(x){console.log(x),r({text:((u=(g=x==null?void 0:x.response)==null?void 0:g.data)==null?void 0:u.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),ke=P(()=>({myClass:ae.value.value.length>0}));return(p,g)=>(G(),ve(Aa,{class:"text-center mt-8"},{default:b(()=>[Ra,n(A(Ma),{slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,pagination:{clickable:!0},navigation:!0,hashNavigation:{replaceState:!0,watchState:!0},modules:l,onSlideChangeTransitionEnd:O,class:"mySwiper my-10"},{default:b(()=>[(G(!0),be(me,null,xe(y.value,u=>(G(),ve(A(Ia),{"data-hash":`/booking#${u._id}`},{default:b(()=>[n(U,{style:{width:"100%"}},{default:b(()=>[n(xa,W({ref_for:!0},u),null,16)]),_:2},1024)]),_:2},1032,["data-hash"]))),256))]),_:1}),n(we,{class:"my-7"},{default:b(()=>[n(le,{class:"d-flex flex-wrap justify-center",cols:"12",sm:"6"},{default:b(()=>[n(Ha,{width:"400",color:"primary",modelValue:k.value,"onUpdate:modelValue":g[0]||(g[0]=u=>k.value=u),"show-adjacent-months":"","allowed-dates":C,onClick:g[1]||(g[1]=u=>F(u))},null,8,["modelValue"]),n(va,{modelValue:E.value,"onUpdate:modelValue":g[3]||(g[3]=u=>E.value=u)},{default:b(()=>[n(_e,null,{default:b(()=>[n(U,{class:"bg-white d-flex flex-column text-center justify-self-center align-self-center pa-7",width:"350",height:"240"},{default:b(()=>[Ua,n(Ta,{class:"my-4"}),(G(!0),be(me,null,xe(v.value.bookingTime.join(" ").split(",").sort((u,x)=>parseInt(u)-parseInt(x)),u=>(G(),ve($a,{class:"d-flex justify-center",modelValue:I.value,"onUpdate:modelValue":g[2]||(g[2]=x=>I.value=x),label:u,value:u,"false-icon":"mdi-paw-outline","true-icon":"mdi-paw"},null,8,["modelValue","label","value"]))),256)),n(U,{class:"dialogClosePosition rounded-circle bg-transparent d-flex"},{default:b(()=>[n(q,{class:"rounded-circle d-flex pa-0 bg-white opacity-100","min-width":"60","min-height":"60",variant:"plain",onClick:f,flat:""},{default:b(()=>[n(Ve,{icon:M.value?"mdi-close-circle":"mdi-close-circle-outline",size:"48",color:"red-darken-4",onMouseover:$,onMouseout:$,onClick:z},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(U,{class:te(["bg-transparent d-flex align-center",A(i)?"mt-5":""])},{default:b(()=>[n(Ve,{icon:"mdi-message-alert",class:"me-1",color:"orange-darken-2"}),T("當天日期無法預約，若有需求，請來電洽詢，謝謝！")]),_:1},8,["class"])]),_:1}),n(le,{class:te(["d-flex justify-center",A(i)?"my-4":""])},{default:b(()=>[n(_e,{class:"w-90",cols:"12",sm:"6",onSubmit:ma(A(Ge),["prevent"]),disabled:A(fe)},{default:b(()=>[n(Q,{label:"預約人姓名",class:te(ke.value),modelValue:A(ae).value.value,"onUpdate:modelValue":g[4]||(g[4]=u=>A(ae).value.value=u),"error-messages":A(ae).errorMessage.value},null,8,["class","modelValue","error-messages"]),n(Q,{label:"預約人電話",class:te(ke.value),modelValue:A(de).value.value,"onUpdate:modelValue":g[5]||(g[5]=u=>A(de).value.value=u),"error-messages":A(de).errorMessage.value},null,8,["class","modelValue","error-messages"]),n(we,null,{default:b(()=>[n(le,{cols:"4",class:"pa-0 ps-3"},{default:b(()=>[n(U,{class:"bg-transparent my-2",elevation:"2",rounded:""},{default:b(()=>[n(ha,{src:s.value,height:"70",cover:""},null,8,["src"])]),_:1})]),_:1}),n(le,null,{default:b(()=>[n(Q,{readonly:""},{default:b(()=>[T("預約狗狗： "),n(U,{class:"text-h6 font-weight-bold bg-transparent"},{default:b(()=>[T(ne(v.value.dogName),1)]),_:1})]),_:1})]),_:1})]),_:1}),n(Q,{readonly:""},{default:b(()=>[T("預約日期： "),n(U,{class:"text-h6 font-weight-bold bg-transparent"},{default:b(()=>[T(ne(h.value),1)]),_:1})]),_:1}),n(Q,{readonly:""},{default:b(()=>[T("預約時間： "),n(Oa,{class:"my-0 pa-0 bg-transparent",items:I.value.sort((u,x)=>parseInt(u)-parseInt(x))},null,8,["items"])]),_:1}),n(Q,{readonly:""},{default:b(()=>[T("預約總時數： "),n(U,{class:"text-h5 font-weight-bold bg-transparent"},{default:b(()=>[T(ne(R.value),1)]),_:1}),T(" 小時 ")]),_:1}),n(Q,{readonly:""},{default:b(()=>[T("總計金額： "),n(U,{class:"text-h5 font-weight-bold bg-transparent"},{default:b(()=>[T(ne(B.value),1)]),_:1}),T(" 元 ")]),_:1}),n(q,{class:"w-40 mt-5",type:"submit",color:"green",loading:A(fe)},{default:b(()=>[T("送出預約")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1},8,["class"])]),_:1})]),_:1}))}},tt=ia(Wa,[["__scopeId","data-v-ef5aa120"]]);export{tt as default};
