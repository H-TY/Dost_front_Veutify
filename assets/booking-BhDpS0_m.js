import{p as X,ar as se,q as K,I as N,s as ee,e as l,k as R,aN as je,z as Fe,aR as Se,K as ue,aS as ze,aT as Qe,r as T,aU as Xe,aV as re,H as te,O as L,a2 as A,S as ne,aW as _e,X as Pe,W as q,L as De,aX as Ke,P as Ne,al as Ce,aq as le,aY as Ze,aZ as Ge,a_ as ve,F as de,a$ as Je,b0 as oe,b1 as ea,aQ as Me,_ as aa,a as ta,i as na,o as G,j as ie,w as D,d as me,g as he,h as B,aH as la,V as j,a0 as ra,a1 as sa,a5 as F,a4 as fe,a3 as ae,b2 as oa,b as ia,a6 as da,a7 as ua,a8 as Ie}from"./index-CnKDs-mF.js";import{_ as ca}from"./dogsCard-dfgWEyI8.js";import{c as va,a as Q,d as ma,b as pe,u as ha,f as E,V as ge}from"./vee-validate.esm-DQJdt-9R.js";import{b as J,d as fa,f as pa,P as ga,N as ka,S as ya,a as ba}from"./pagination-DVI9MMBU.js";import{V as ke}from"./VCol-CrgD1yeS.js";import{V as xa}from"./VDivider-bRFIQgSV.js";import{a as Va}from"./VList-Bew-uVHL.js";import{V as wa}from"./VRow-IkpUkABv.js";import{V as Sa}from"./VContainer-BLyZHjss.js";import{V as _a}from"./VCheckbox-EjHXhN4Z.js";import"./VCheckboxBtn-yv2f7NIx.js";const Te=X({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:se,default:"$next"},prevIcon:{type:se,default:"$prev"},modeIcon:{type:se,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),ye=K()({name:"VDatePickerControls",props:Te(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,a){let{emit:x}=a;const u=N(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),t=N(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),c=N(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=N(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function o(){x("click:prev")}function d(){x("click:next")}function n(){x("click:year")}function s(){x("click:month")}return ee(()=>l("div",{class:["v-date-picker-controls"]},[l(R,{class:"v-date-picker-controls__month-btn",disabled:u.value,text:e.text,variant:"text",rounded:!0,onClick:s},null),l(R,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:t.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:n},null),l(je,{key:"mode-spacer"},null),l("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[l(R,{disabled:c.value,icon:e.prevIcon,variant:"text",onClick:o},null),l(R,{disabled:i.value,icon:e.nextIcon,variant:"text",onClick:d},null)])])),{}}}),Pa=X({appendIcon:String,color:String,header:String,transition:String,onClick:ze()},"VDatePickerHeader"),be=K()({name:"VDatePickerHeader",props:Pa(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,a){let{emit:x,slots:u}=a;const{backgroundColorClasses:t,backgroundColorStyles:c}=Fe(e,"color");function i(){x("click")}function o(){x("click:append")}return ee(()=>{const d=!!(u.default||e.header),n=!!(u.append||e.appendIcon);return l("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},t.value],style:c.value,onClick:i},[u.prepend&&l("div",{key:"prepend",class:"v-date-picker-header__prepend"},[u.prepend()]),d&&l(Se,{key:"content",name:e.transition},{default:()=>{var s;return[l("div",{key:e.header,class:"v-date-picker-header__content"},[((s=u.default)==null?void 0:s.call(u))??e.header])]}}),n&&l("div",{class:"v-date-picker-header__append"},[u.append?l(ue,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var s;return[(s=u.append)==null?void 0:s.call(u)]}}):l(R,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:o},null)])])}),{}}}),Ae=X({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...Qe()},"VDatePickerMonth"),xe=K()({name:"VDatePickerMonth",props:Ae(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,a){let{emit:x,slots:u}=a;const t=T(),{daysInMonth:c,model:i,weekNumbers:o}=Xe(e),d=re(),n=te(),s=te(),V=te(!1),y=N(()=>V.value?e.reverseTransition:e.transition);e.multiple==="range"&&i.value.length>0&&(n.value=i.value[0],i.value.length>1&&(s.value=i.value[i.value.length-1]));const h=N(()=>{const g=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return i.value.length>=g});L(c,(g,r)=>{r&&(V.value=d.isBefore(g[0].date,r[0].date))});function _(g){const r=d.startOfDay(g);if(i.value.length===0?n.value=void 0:i.value.length===1&&(n.value=i.value[0],s.value=void 0),!n.value)n.value=r,i.value=[n.value];else if(s.value)n.value=g,s.value=void 0,i.value=[n.value];else{if(d.isSameDay(r,n.value)){n.value=void 0,i.value=[];return}else d.isBefore(r,n.value)?(s.value=d.endOfDay(n.value),n.value=r):s.value=d.endOfDay(r);const C=d.getDiff(s.value,n.value,"days"),w=[n.value];for(let O=1;O<C;O++){const z=d.addDays(n.value,O);w.push(z)}w.push(s.value),i.value=w}}function b(g){const r=i.value.findIndex(C=>d.isSameDay(C,g));if(r===-1)i.value=[...i.value,g];else{const C=[...i.value];C.splice(r,1),i.value=C}}function f(g){e.multiple==="range"?_(g):e.multiple?b(g):i.value=[g]}return()=>l("div",{class:"v-date-picker-month"},[e.showWeek&&l("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&l("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[A(" ")]),o.value.map(g=>l("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[g]))]),l(Se,{name:y.value},{default:()=>{var g;return[l("div",{ref:t,key:(g=c.value[0].date)==null?void 0:g.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&d.getWeekdays(e.firstDayOfWeek).map(r=>l("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[r])),c.value.map((r,C)=>{const w={props:{onClick:()=>f(r.date)},item:r,i:C};return h.value&&!r.isSelected&&(r.isDisabled=!0),l("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":r.isAdjacent,"v-date-picker-month__day--hide-adjacent":r.isHidden,"v-date-picker-month__day--selected":r.isSelected,"v-date-picker-month__day--week-end":r.isWeekEnd,"v-date-picker-month__day--week-start":r.isWeekStart}],"data-v-date":r.isDisabled?void 0:r.isoDate},[(e.showAdjacentMonths||!r.isAdjacent)&&l(ue,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(r.isSelected||r.isToday)&&!r.isDisabled?e.color:void 0,disabled:r.isDisabled,icon:!0,ripple:!1,text:r.localized,variant:r.isDisabled?r.isToday?"outlined":"text":r.isToday&&!r.isSelected?"outlined":"flat",onClick:()=>f(r.date)}}},{default:()=>{var O;return[((O=u.day)==null?void 0:O.call(u,w))??l(R,w.props,null)]}})])})])]}})])}}),Oe=X({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Ve=K()({name:"VDatePickerMonths",props:Oe(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:x,slots:u}=a;const t=re(),c=ne(e,"modelValue"),i=N(()=>{let o=t.startOfYear(t.date());return e.year&&(o=t.setYear(o,e.year)),_e(12).map(d=>{const n=t.format(o,"monthShort"),s=!!(e.min&&t.isAfter(t.startOfMonth(t.date(e.min)),o)||e.max&&t.isAfter(o,t.startOfMonth(t.date(e.max))));return o=t.getNextMonth(o),{isDisabled:s,text:n,value:d}})});return Pe(()=>{c.value=c.value??t.getMonth(t.date())}),ee(()=>l("div",{class:"v-date-picker-months",style:{height:De(e.height)}},[l("div",{class:"v-date-picker-months__content"},[i.value.map((o,d)=>{var V;const n={active:c.value===d,color:c.value===d?e.color:void 0,disabled:o.isDisabled,rounded:!0,text:o.text,variant:c.value===o.value?"flat":"text",onClick:()=>s(d)};function s(y){if(c.value===y){x("update:modelValue",c.value);return}c.value=y}return((V=u.month)==null?void 0:V.call(u,{month:o,i:d,props:n}))??l(R,q({key:"month"},n),null)})])])),{}}}),$e=X({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),we=K()({name:"VDatePickerYears",props:$e(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:x,slots:u}=a;const t=re(),c=ne(e,"modelValue"),i=N(()=>{const d=t.getYear(t.date());let n=d-100,s=d+52;e.min&&(n=t.getYear(t.date(e.min))),e.max&&(s=t.getYear(t.date(e.max)));let V=t.startOfYear(t.date());return V=t.setYear(V,n),_e(s-n+1,n).map(y=>{const h=t.format(V,"year");return V=t.setYear(V,t.getYear(V)+1),{text:h,value:y}})});Pe(()=>{c.value=c.value??t.getYear(t.date())});const o=Ke();return Ne(async()=>{var d;await Ce(),(d=o.el)==null||d.scrollIntoView({block:"center"})}),ee(()=>l("div",{class:"v-date-picker-years",style:{height:De(e.height)}},[l("div",{class:"v-date-picker-years__content"},[i.value.map((d,n)=>{var V;const s={ref:c.value===d.value?o:void 0,active:c.value===d.value,color:c.value===d.value?e.color:void 0,rounded:!0,text:d.text,variant:c.value===d.value?"flat":"text",onClick:()=>{if(c.value===d.value){x("update:modelValue",c.value);return}c.value=d.value}};return((V=u.year)==null?void 0:V.call(u,{year:d,i:n,props:s}))??l(R,q({key:"month"},s),null)})])])),{}}}),Da=X({header:{type:String,default:"$vuetify.datePicker.header"},...Te(),...Ae({weeksInMonth:"static"}),...le(Oe(),["modelValue"]),...le($e(),["modelValue"]),...Ze({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Na=K()({name:"VDatePicker",props:Da(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,a){let{emit:x,slots:u}=a;const t=re(),{t:c}=Ge(),i=ne(e,"modelValue",void 0,m=>oe(m),m=>e.multiple?m:m[0]),o=ne(e,"viewMode"),d=N(()=>{var I;const m=t.date((I=i.value)==null?void 0:I[0]);return m&&t.isValid(m)?m:t.date()}),n=T(Number(e.month??t.getMonth(t.startOfMonth(d.value)))),s=T(Number(e.year??t.getYear(t.startOfYear(t.setMonth(d.value,n.value))))),V=te(!1),y=N(()=>e.multiple&&i.value.length>1?c("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&t.isValid(i.value[0])?t.format(t.date(i.value[0]),"normalDateWithWeekday"):c(e.header)),h=N(()=>{let m=t.date();return m=t.setDate(m,1),m=t.setMonth(m,n.value),m=t.setYear(m,s.value),t.format(m,"monthAndYear")}),_=N(()=>`date-picker-header${V.value?"-reverse":""}-transition`),b=N(()=>{const m=t.date(e.min);return e.min&&t.isValid(m)?m:null}),f=N(()=>{const m=t.date(e.max);return e.max&&t.isValid(m)?m:null}),g=N(()=>{if(e.disabled)return!0;const m=[];if(o.value!=="month")m.push("prev","next");else{let I=t.date();if(I=t.setYear(I,s.value),I=t.setMonth(I,n.value),b.value){const Y=t.addDays(t.startOfMonth(I),-1);t.isAfter(b.value,Y)&&m.push("prev")}if(f.value){const Y=t.addDays(t.endOfMonth(I),1);t.isAfter(Y,f.value)&&m.push("next")}}return m});function r(){n.value<11?n.value++:(s.value++,n.value=0,H(s.value)),M(n.value)}function C(){n.value>0?n.value--:(s.value--,n.value=11,H(s.value)),M(n.value)}function w(){o.value="month"}function O(){o.value=o.value==="months"?"month":"months"}function z(){o.value=o.value==="year"?"month":"year"}function M(m){o.value==="months"&&O(),x("update:month",m)}function H(m){o.value==="year"&&z(),x("update:year",m)}return L(i,(m,I)=>{const Y=oe(I),U=oe(m);if(!U.length)return;const Z=t.date(Y[Y.length-1]),W=t.date(U[U.length-1]),$=t.getMonth(W),P=t.getYear(W);$!==n.value&&(n.value=$,M(n.value)),P!==s.value&&(s.value=P,H(s.value)),V.value=t.isBefore(Z,W)}),ee(()=>{const m=ve.filterProps(e),I=ye.filterProps(e),Y=be.filterProps(e),U=xe.filterProps(e),Z=le(Ve.filterProps(e),["modelValue"]),W=le(we.filterProps(e),["modelValue"]),$={header:y.value,transition:_.value};return l(ve,q(m,{class:["v-date-picker",`v-date-picker--${o.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var P;return((P=u.title)==null?void 0:P.call(u))??l("div",{class:"v-date-picker__title"},[c(e.title)])},header:()=>u.header?l(ue,{defaults:{VDatePickerHeader:{...$}}},{default:()=>{var P;return[(P=u.header)==null?void 0:P.call(u,$)]}}):l(be,q({key:"header"},Y,$,{onClick:o.value!=="month"?w:void 0}),{...u,default:void 0}),default:()=>l(de,null,[l(ye,q(I,{disabled:g.value,text:h.value,"onClick:next":r,"onClick:prev":C,"onClick:month":O,"onClick:year":z}),null),l(Je,{hideOnLeave:!0},{default:()=>[o.value==="months"?l(Ve,q({key:"date-picker-months"},Z,{modelValue:n.value,"onUpdate:modelValue":[P=>n.value=P,M],min:b.value,max:f.value,year:s.value}),null):o.value==="year"?l(we,q({key:"date-picker-years"},W,{modelValue:s.value,"onUpdate:modelValue":[P=>s.value=P,H],min:b.value,max:f.value}),null):l(xe,q({key:"date-picker-month"},U,{modelValue:i.value,"onUpdate:modelValue":P=>i.value=P,month:n.value,"onUpdate:month":[P=>n.value=P,M],year:s.value,"onUpdate:year":[P=>s.value=P,H],min:b.value,max:f.value}),null)]})]),actions:u.actions})}),{}}});function Ca(e){let{swiper:a,extendParams:x,on:u}=e;x({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let t=!1,c={};const i=h=>h.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),o=h=>{const _=J();let b;h?b=new URL(h):b=_.location;const f=b.pathname.slice(1).split("/").filter(w=>w!==""),g=f.length,r=f[g-2],C=f[g-1];return{key:r,value:C}},d=(h,_)=>{const b=J();if(!t||!a.params.history.enabled)return;let f;a.params.url?f=new URL(a.params.url):f=b.location;const g=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${_}"]`):a.slides[_];let r=i(g.getAttribute("data-history"));if(a.params.history.root.length>0){let w=a.params.history.root;w[w.length-1]==="/"&&(w=w.slice(0,w.length-1)),r=`${w}/${h?`${h}/`:""}${r}`}else f.pathname.includes(h)||(r=`${h?`${h}/`:""}${r}`);a.params.history.keepQuery&&(r+=f.search);const C=b.history.state;C&&C.value===r||(a.params.history.replaceState?b.history.replaceState({value:r},null,r):b.history.pushState({value:r},null,r))},n=(h,_,b)=>{if(_)for(let f=0,g=a.slides.length;f<g;f+=1){const r=a.slides[f];if(i(r.getAttribute("data-history"))===_){const w=a.getSlideIndex(r);a.slideTo(w,h,b)}}else a.slideTo(0,h,b)},s=()=>{c=o(a.params.url),n(a.params.speed,c.value,!1)},V=()=>{const h=J();if(a.params.history){if(!h.history||!h.history.pushState){a.params.history.enabled=!1,a.params.hashNavigation.enabled=!0;return}if(t=!0,c=o(a.params.url),!c.key&&!c.value){a.params.history.replaceState||h.addEventListener("popstate",s);return}n(0,c.value,a.params.runCallbacksOnInit),a.params.history.replaceState||h.addEventListener("popstate",s)}},y=()=>{const h=J();a.params.history.replaceState||h.removeEventListener("popstate",s)};u("init",()=>{a.params.history.enabled&&V()}),u("destroy",()=>{a.params.history.enabled&&y()}),u("transitionEnd _freeModeNoMomentumRelease",()=>{t&&d(a.params.history.key,a.activeIndex)}),u("slideChange",()=>{t&&a.params.cssMode&&d(a.params.history.key,a.activeIndex)})}function Ma(e){let{swiper:a,extendParams:x,emit:u,on:t}=e,c=!1;const i=fa(),o=J();x({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(y,h){if(a.virtual&&a.params.virtual.enabled){const _=a.slides.filter(f=>f.getAttribute("data-hash")===h)[0];return _?parseInt(_.getAttribute("data-swiper-slide-index"),10):0}return a.getSlideIndex(pa(a.slidesEl,`.${a.params.slideClass}[data-hash="${h}"], swiper-slide[data-hash="${h}"]`)[0])}}});const d=()=>{u("hashChange");const y=i.location.hash.replace("#",""),h=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${a.activeIndex}"]`):a.slides[a.activeIndex],_=h?h.getAttribute("data-hash"):"";if(y!==_){const b=a.params.hashNavigation.getSlideIndex(a,y);if(typeof b>"u"||Number.isNaN(b))return;a.slideTo(b)}},n=()=>{if(!c||!a.params.hashNavigation.enabled)return;const y=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${a.activeIndex}"]`):a.slides[a.activeIndex],h=y?y.getAttribute("data-hash")||y.getAttribute("data-history"):"";a.params.hashNavigation.replaceState&&o.history&&o.history.replaceState?(o.history.replaceState(null,null,`#${h}`||""),u("hashSet")):(i.location.hash=h||"",u("hashSet"))},s=()=>{if(!a.params.hashNavigation.enabled||a.params.history&&a.params.history.enabled)return;c=!0;const y=i.location.hash.replace("#","");if(y){const _=a.params.hashNavigation.getSlideIndex(a,y);a.slideTo(_||0,0,a.params.runCallbacksOnInit,!0)}a.params.hashNavigation.watchState&&o.addEventListener("hashchange",d)},V=()=>{a.params.hashNavigation.watchState&&o.removeEventListener("hashchange",d)};t("init",()=>{a.params.hashNavigation.enabled&&s()}),t("destroy",()=>{a.params.hashNavigation.enabled&&V()}),t("transitionEnd _freeModeNoMomentumRelease",()=>{c&&n()}),t("slideChange",()=>{c&&a.params.cssMode&&n()})}const Ia=ea("BookingOrderData",()=>{const{apiAuth:e}=Me(),a=T(new Date().toLocaleDateString().replace(/\//g,""));console.log("nowDate:",a.value);const x=T(null),u=T(""),t=T(""),c=T(""),i=async()=>{var o,d;try{console.log("Store觸發");const{data:n}=await e.get("/order",{params:{search:a.value}});x.value=Math.max(...n.result.data.map(s=>Number(s.bookingOrderNumber)))}catch(n){console.log(n),createSnackbar({text:((d=(o=n==null?void 0:n.response)==null?void 0:o.data)==null?void 0:d.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return i(),{bookingOrderNumber:x,dogName:u,bookingDate:t,bookingTime:c,endBookingOrderData:i}}),Be=e=>(da("data-v-b1a90ff4"),e=e(),ua(),e),Ta=Be(()=>Ie("h1",null,"預約狗狗時間",-1)),Aa=Be(()=>Ie("h3",null,"可預約時段",-1)),Oa={__name:"booking",setup(e){const a=oa(),x=ia(),{backApi:u,apiAuth:t}=Me(),c=ta(),i=Ia(),o=na(),d=[ga,ka,Ma,Ca],n=N(()=>{if(!c.isLogin){x.push("/login");return}return c.account}),s=T(new Date("")),V=T(new Date),y=N(()=>isNaN(s.value.getTime())?"左側選擇日期":s.value.toLocaleDateString()),h=k=>k>V.value,_=T([]);(async()=>{var k,p;try{const{data:v}=await u.get("/dogs");_.value.splice(0,_.value.length,...v.result.data)}catch(v){console.log(v),o({text:((p=(k=v==null?void 0:v.response)==null?void 0:k.data)==null?void 0:p.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const f=T({_id:"",image:"",dogName:"",age:0,price:0,booking:!0,bookingTime:[],feature:"",sell:!0,counter:0}),g=T(null);L(g,(k,p)=>{if(k!==p)return M.value=[];console.log("哈希newId:",k,"哈希oldId:",p)});const r=()=>{a.query.id?(g.value=a.query.id,window.location.hash=`booking#${a.query.id}`,a.query.id=""):g.value=window.location.hash.substring(10)},C=()=>{r(),w()};Ne(()=>{setTimeout(()=>{r(),w()},500)});const w=async()=>{var k,p;if(g.value!==null)try{await Ce();const{data:v}=await u.get("/dogs/"+g.value);f.value._id=v.result._id,f.value.image=v.result.image,f.value.dogName=v.result.dogName,f.value.age=v.result.age,f.value.price=v.result.price,f.value.booking=v.result.booking,f.value.bookingTime=v.result.bookingTime,f.value.feature=v.result.feature,f.value.sell=v.result.sell,f.value.counter=v.result.counter}catch(v){console.log(v),o({text:((p=(k=v==null?void 0:v.response)==null?void 0:k.data)==null?void 0:p.message)||"發生錯誤",snackbarProps:{color:"red"}})}};w();const O=T(!1),z=k=>{k.target.innerText==y.value.slice(-2).replace("/","")&&(O.value=!0)},M=T([]),H=N(()=>M.value.length*2),m=N(()=>f.value.price*M.value.length),I=va({bookingOrderNumber:Q().required("預約訂單編號必填"),name:Q().required("預約人名字必填"),phone:Q().required("預約人電話必填"),dogName:Q().required("狗狗名字必填"),bookingDate:Q().required("預約日期必填"),bookingTime:ma().required("預約時段必填"),totalBookingTime:pe().required("預約總時數必填").typeError("預約總時數格式錯誤").min(0,"預約總時數不能小於 0"),totalPrice:pe().required("預約總金額必填").typeError("預約總金額格式錯誤").min(0,"預約總金額不能小於 0"),accountName:Q().required("帳戶名稱必填")}),{handleSubmit:Y,isSubmitting:U,resetForm:Z}=ha({validationSchema:I,initialValues:{bookingOrderNumber:"",name:n.value,phone:"",dogName:"",bookingDate:"",bookingTime:[],totalBookingTime:0,totalPrice:0,accountName:""}}),W=E("bookingOrderNumber"),$=E("name"),P=E("phone"),Ye=E("dogName"),He=E("bookingDate"),Ee=E("bookingTime"),qe=E("totalBookingTime"),Re=E("totalPrice"),Ue=E("accountName");L(y,(k,p)=>{if(k!==p)return Ue.value.value=n.value,Ye.value.value=f.value.dogName});const We=async()=>{await i.endBookingOrderData()};L(y,(k,p)=>{if(k!==p)return M.value=[],He.value.value=y.value,We(),W.value.value=(i.bookingOrderNumber+1).toString(),console.log("bookingOrderNumber",W.value.value)}),L(M,(k,p)=>{if(k!==p)return Ee.value.value=M.value.sort((v,S)=>parseInt(v)-parseInt(S))}),L(H,(k,p)=>{if(k!==p)return qe.value.value=H.value}),L(m,(k,p)=>{if(k!==p)return Re.value.value=m.value});const Le=Y(async k=>{var p,v;try{const S=new FormData;S.append("bookingOrderNumber",k.bookingOrderNumber),S.append("name",k.name),S.append("phone",k.phone),S.append("dogName",k.dogName),S.append("bookingDate",k.bookingDate),S.append("bookingTime",k.bookingTime),S.append("totalBookingTime",k.totalBookingTime),S.append("totalPrice",k.totalPrice),S.append("accountName",k.accountName),await t.post("/order",S),o({text:"預約成功",snackbarProps:{color:"green"}}),Z(),y.value=NaN,M.value=[],m.value=0}catch(S){console.log(S),o({text:((v=(p=S==null?void 0:S.response)==null?void 0:p.data)==null?void 0:v.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),ce=N(()=>({myClass:$.value.value.length>0}));return(k,p)=>(G(),ie(Sa,{class:"text-center my-8"},{default:D(()=>[Ta,l(B(ya),{slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,pagination:{clickable:!0},navigation:!0,hashNavigation:{replaceState:!0,watchState:!0},modules:d,onSlideChangeTransitionEnd:C,class:"mySwiper my-10"},{default:D(()=>[(G(!0),me(de,null,he(_.value,v=>(G(),ie(B(ba),{"data-hash":`/booking#${v._id}`},{default:D(()=>[l(j,{style:{width:"100%"}},{default:D(()=>[l(ca,q({ref_for:!0},v),null,16)]),_:2},1024)]),_:2},1032,["data-hash"]))),256))]),_:1}),l(wa,{class:"my-7"},{default:D(()=>[l(ke,{class:"d-flex flex-wrap justify-center",cols:"12",sm:"6"},{default:D(()=>[l(Na,{width:"400",color:"primary",modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=v=>s.value=v),"show-adjacent-months":"","allowed-dates":h,onClick:p[1]||(p[1]=v=>z(v))},null,8,["modelValue"]),l(la,{modelValue:O.value,"onUpdate:modelValue":p[3]||(p[3]=v=>O.value=v),width:"auto"},{default:D(()=>[l(ge,null,{default:D(()=>[l(j,{class:"bg-white d-flex flex-column text-center justify-self-center pa-7",width:"350"},{default:D(()=>[Aa,l(xa,{class:"my-4"}),(G(!0),me(de,null,he(f.value.bookingTime.join(" ").split(",").sort((v,S)=>parseInt(v)-parseInt(S)),v=>(G(),ie(_a,{class:"d-flex justify-center",modelValue:M.value,"onUpdate:modelValue":p[2]||(p[2]=S=>M.value=S),label:v,value:v,"false-icon":"mdi-paw-outline","true-icon":"mdi-paw"},null,8,["modelValue","label","value"]))),256))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(j,{class:"bg-transparent d-flex align-center"},{default:D(()=>[l(ra,{icon:"mdi-message-alert",class:"me-1",color:"orange-darken-2"}),A("當天日期無法預約，若有需求，請來電洽詢，謝謝！")]),_:1})]),_:1}),l(ke,{class:"d-flex justify-center"},{default:D(()=>[l(ge,{class:"w-90",cols:"12",sm:"6",onSubmit:sa(B(Le),["prevent"]),disabled:B(U)},{default:D(()=>[l(F,{label:"預約人姓名",class:fe(ce.value),modelValue:B($).value.value,"onUpdate:modelValue":p[4]||(p[4]=v=>B($).value.value=v),"error-messages":B($).errorMessage.value},null,8,["class","modelValue","error-messages"]),l(F,{label:"預約人電話",class:fe(ce.value),modelValue:B(P).value.value,"onUpdate:modelValue":p[5]||(p[5]=v=>B(P).value.value=v),"error-messages":B(P).errorMessage.value},null,8,["class","modelValue","error-messages"]),l(F,{readonly:""},{default:D(()=>[A("預約狗狗： "),l(j,{class:"text-h6 font-weight-bold bg-transparent"},{default:D(()=>[A(ae(f.value.dogName),1)]),_:1})]),_:1}),l(F,{readonly:""},{default:D(()=>[A("預約日期： "),l(j,{class:"text-h6 font-weight-bold bg-transparent"},{default:D(()=>[A(ae(y.value),1)]),_:1})]),_:1}),l(F,{readonly:""},{default:D(()=>[A("預約時間： "),l(Va,{class:"my-0 pa-0 bg-transparent",items:M.value.sort((v,S)=>parseInt(v)-parseInt(S))},null,8,["items"])]),_:1}),l(F,{readonly:""},{default:D(()=>[A("預約總時數： "),l(j,{class:"text-h5 font-weight-bold bg-transparent"},{default:D(()=>[A(ae(H.value),1)]),_:1}),A(" 小時 ")]),_:1}),l(F,{readonly:""},{default:D(()=>[A("總計金額： "),l(j,{class:"text-h5 font-weight-bold bg-transparent"},{default:D(()=>[A(ae(m.value),1)]),_:1}),A(" 元 ")]),_:1}),l(R,{class:"w-40 mt-5",type:"submit",color:"green",loading:B(U)},{default:D(()=>[A("送出預約")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1})]),_:1}))}},Fa=aa(Oa,[["__scopeId","data-v-b1a90ff4"]]);export{Fa as default};
