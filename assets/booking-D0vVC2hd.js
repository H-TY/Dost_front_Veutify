import{p as ee,aB as ye,q as ae,I as P,s as ie,e as t,k as U,aH as va,z as ma,aK as ze,K as De,aL as fa,aM as ha,r as T,aN as ga,aO as he,H as ve,O as z,a3 as Ke,S as me,aP as Xe,X as Ze,W as L,L as Ge,aQ as ka,P as Qe,an as Pe,aA as fe,aR as pa,aS as ba,aT as Oe,F as oe,aU as ya,aV as Ve,aW as Va,aX as xa,aY as _a,aZ as Pa,b as Da,u as Sa,a as wa,i as Ca,ao as Na,o as F,d as le,w as M,h as Ye,f as _,j as de,Z as $,a0 as xe,a6 as _e,a1 as Ia,a5 as J,a2 as $e,a4 as Ma,c as Ue,au as Ta}from"./index-BkPrSAUD.js";import{u as Aa}from"./bookingOrder-Dy1vj3JV.js";import{_ as Ba}from"./dogsCard-C8unOjYp.js";import{c as Oa,a as ne,d as Ya,b as He,e as $a,u as Ua,f as E,V as Ha}from"./vee-validate.esm-DL6hPMqZ.js";import{O as Wa}from"./orderInfoCard-Bcmloorq.js";import{P as Ra,N as Ea}from"./pagination-C-hd4qrK.js";import{V as qa}from"./VRow-Bo8TDhzy.js";import{V as ce}from"./VCol-oS4yroM6.js";import{a as We,V as Fa}from"./VTextarea-ClAR0hJN.js";import{V as La}from"./VDivider-jt_XFhFN.js";import{V as ja}from"./VContainer-CFV9Hhwo.js";import"./VCheckboxBtn-Bu5Y0FEL.js";const Je=ee({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:ye,default:"$next"},prevIcon:{type:ye,default:"$prev"},modeIcon:{type:ye,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Re=ae()({name:"VDatePickerControls",props:Je(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,o){let{emit:D}=o;const d=P(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=P(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),m=P(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),c=P(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function i(){D("click:prev")}function u(){D("click:next")}function l(){D("click:year")}function s(){D("click:month")}return ie(()=>t("div",{class:["v-date-picker-controls"]},[t(U,{class:"v-date-picker-controls__month-btn",disabled:d.value,text:e.text,variant:"text",rounded:!0,onClick:s},null),t(U,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:l},null),t(va,{key:"mode-spacer"},null),t("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[t(U,{disabled:m.value,icon:e.prevIcon,variant:"text",onClick:i},null),t(U,{disabled:c.value,icon:e.nextIcon,variant:"text",onClick:u},null)])])),{}}}),za=ee({appendIcon:String,color:String,header:String,transition:String,onClick:fa()},"VDatePickerHeader"),Ee=ae()({name:"VDatePickerHeader",props:za(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,o){let{emit:D,slots:d}=o;const{backgroundColorClasses:a,backgroundColorStyles:m}=ma(e,"color");function c(){D("click")}function i(){D("click:append")}return ie(()=>{const u=!!(d.default||e.header),l=!!(d.append||e.appendIcon);return t("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},a.value],style:m.value,onClick:c},[d.prepend&&t("div",{key:"prepend",class:"v-date-picker-header__prepend"},[d.prepend()]),u&&t(ze,{key:"content",name:e.transition},{default:()=>{var s;return[t("div",{key:e.header,class:"v-date-picker-header__content"},[((s=d.default)==null?void 0:s.call(d))??e.header])]}}),l&&t("div",{class:"v-date-picker-header__append"},[d.append?t(De,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var s;return[(s=d.append)==null?void 0:s.call(d)]}}):t(U,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:i},null)])])}),{}}}),ea=ee({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...ha()},"VDatePickerMonth"),qe=ae()({name:"VDatePickerMonth",props:ea(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,o){let{emit:D,slots:d}=o;const a=T(),{daysInMonth:m,model:c,weekNumbers:i}=ga(e),u=he(),l=ve(),s=ve(),b=ve(!1),h=P(()=>b.value?e.reverseTransition:e.transition);e.multiple==="range"&&c.value.length>0&&(l.value=c.value[0],c.value.length>1&&(s.value=c.value[c.value.length-1]));const S=P(()=>{const k=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return c.value.length>=k});z(m,(k,v)=>{v&&(b.value=u.isBefore(k[0].date,v[0].date))});function N(k){const v=u.startOfDay(k);if(c.value.length===0?l.value=void 0:c.value.length===1&&(l.value=c.value[0],s.value=void 0),!l.value)l.value=v,c.value=[l.value];else if(s.value)l.value=k,s.value=void 0,c.value=[l.value];else{if(u.isSameDay(v,l.value)){l.value=void 0,c.value=[];return}else u.isBefore(v,l.value)?(s.value=u.endOfDay(l.value),l.value=v):s.value=u.endOfDay(v);const w=u.getDiff(s.value,l.value,"days"),q=[l.value];for(let Y=1;Y<w;Y++){const Q=u.addDays(l.value,Y);q.push(Q)}q.push(s.value),c.value=q}}function A(k){const v=c.value.findIndex(w=>u.isSameDay(w,k));if(v===-1)c.value=[...c.value,k];else{const w=[...c.value];w.splice(v,1),c.value=w}}function O(k){e.multiple==="range"?N(k):e.multiple?A(k):c.value=[k]}return()=>t("div",{class:"v-date-picker-month"},[e.showWeek&&t("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&t("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[Ke(" ")]),i.value.map(k=>t("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[k]))]),t(ze,{name:h.value},{default:()=>{var k;return[t("div",{ref:a,key:(k=m.value[0].date)==null?void 0:k.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&u.getWeekdays(e.firstDayOfWeek).map(v=>t("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[v])),m.value.map((v,w)=>{const q={props:{onClick:()=>O(v.date)},item:v,i:w};return S.value&&!v.isSelected&&(v.isDisabled=!0),t("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":v.isAdjacent,"v-date-picker-month__day--hide-adjacent":v.isHidden,"v-date-picker-month__day--selected":v.isSelected,"v-date-picker-month__day--week-end":v.isWeekEnd,"v-date-picker-month__day--week-start":v.isWeekStart}],"data-v-date":v.isDisabled?void 0:v.isoDate},[(e.showAdjacentMonths||!v.isAdjacent)&&t(De,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(v.isSelected||v.isToday)&&!v.isDisabled?e.color:void 0,disabled:v.isDisabled,icon:!0,ripple:!1,text:v.localized,variant:v.isDisabled?v.isToday?"outlined":"text":v.isToday&&!v.isSelected?"outlined":"flat",onClick:()=>O(v.date)}}},{default:()=>{var Y;return[((Y=d.day)==null?void 0:Y.call(d,q))??t(U,q.props,null)]}})])})])]}})])}}),aa=ee({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Fe=ae()({name:"VDatePickerMonths",props:aa(),emits:{"update:modelValue":e=>!0},setup(e,o){let{emit:D,slots:d}=o;const a=he(),m=me(e,"modelValue"),c=P(()=>{let i=a.startOfYear(a.date());return e.year&&(i=a.setYear(i,e.year)),Xe(12).map(u=>{const l=a.format(i,"monthShort"),s=!!(e.min&&a.isAfter(a.startOfMonth(a.date(e.min)),i)||e.max&&a.isAfter(i,a.startOfMonth(a.date(e.max))));return i=a.getNextMonth(i),{isDisabled:s,text:l,value:u}})});return Ze(()=>{m.value=m.value??a.getMonth(a.date())}),ie(()=>t("div",{class:"v-date-picker-months",style:{height:Ge(e.height)}},[t("div",{class:"v-date-picker-months__content"},[c.value.map((i,u)=>{var b;const l={active:m.value===u,color:m.value===u?e.color:void 0,disabled:i.isDisabled,rounded:!0,text:i.text,variant:m.value===i.value?"flat":"text",onClick:()=>s(u)};function s(h){if(m.value===h){D("update:modelValue",m.value);return}m.value=h}return((b=d.month)==null?void 0:b.call(d,{month:i,i:u,props:l}))??t(U,L({key:"month"},l),null)})])])),{}}}),ta=ee({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),Le=ae()({name:"VDatePickerYears",props:ta(),emits:{"update:modelValue":e=>!0},setup(e,o){let{emit:D,slots:d}=o;const a=he(),m=me(e,"modelValue"),c=P(()=>{const u=a.getYear(a.date());let l=u-100,s=u+52;e.min&&(l=a.getYear(a.date(e.min))),e.max&&(s=a.getYear(a.date(e.max)));let b=a.startOfYear(a.date());return b=a.setYear(b,l),Xe(s-l+1,l).map(h=>{const S=a.format(b,"year");return b=a.setYear(b,a.getYear(b)+1),{text:S,value:h}})});Ze(()=>{m.value=m.value??a.getYear(a.date())});const i=ka();return Qe(async()=>{var u;await Pe(),(u=i.el)==null||u.scrollIntoView({block:"center"})}),ie(()=>t("div",{class:"v-date-picker-years",style:{height:Ge(e.height)}},[t("div",{class:"v-date-picker-years__content"},[c.value.map((u,l)=>{var b;const s={ref:m.value===u.value?i:void 0,active:m.value===u.value,color:m.value===u.value?e.color:void 0,rounded:!0,text:u.text,variant:m.value===u.value?"flat":"text",onClick:()=>{if(m.value===u.value){D("update:modelValue",m.value);return}m.value=u.value}};return((b=d.year)==null?void 0:b.call(d,{year:u,i:l,props:s}))??t(U,L({key:"month"},s),null)})])])),{}}}),Ka=ee({header:{type:String,default:"$vuetify.datePicker.header"},...Je(),...ea({weeksInMonth:"static"}),...fe(aa(),["modelValue"]),...fe(ta(),["modelValue"]),...pa({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),je=ae()({name:"VDatePicker",props:Ka(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,o){let{emit:D,slots:d}=o;const a=he(),{t:m}=ba(),c=me(e,"modelValue",void 0,f=>Ve(f),f=>e.multiple?f:f[0]),i=me(e,"viewMode"),u=P(()=>{var I;const f=a.date((I=c.value)==null?void 0:I[0]);return f&&a.isValid(f)?f:a.date()}),l=T(Number(e.month??a.getMonth(a.startOfMonth(u.value)))),s=T(Number(e.year??a.getYear(a.startOfYear(a.setMonth(u.value,l.value))))),b=ve(!1),h=P(()=>e.multiple&&c.value.length>1?m("$vuetify.datePicker.itemsSelected",c.value.length):c.value[0]&&a.isValid(c.value[0])?a.format(a.date(c.value[0]),"normalDateWithWeekday"):m(e.header)),S=P(()=>{let f=a.date();return f=a.setDate(f,1),f=a.setMonth(f,l.value),f=a.setYear(f,s.value),a.format(f,"monthAndYear")}),N=P(()=>`date-picker-header${b.value?"-reverse":""}-transition`),A=P(()=>{const f=a.date(e.min);return e.min&&a.isValid(f)?f:null}),O=P(()=>{const f=a.date(e.max);return e.max&&a.isValid(f)?f:null}),k=P(()=>{if(e.disabled)return!0;const f=[];if(i.value!=="month")f.push("prev","next");else{let I=a.date();if(I=a.setYear(I,s.value),I=a.setMonth(I,l.value),A.value){const p=a.addDays(a.startOfMonth(I),-1);a.isAfter(A.value,p)&&f.push("prev")}if(O.value){const p=a.addDays(a.endOfMonth(I),1);a.isAfter(p,O.value)&&f.push("next")}}return f});function v(){l.value<11?l.value++:(s.value++,l.value=0,K(s.value)),H(l.value)}function w(){l.value>0?l.value--:(s.value--,l.value=11,K(s.value)),H(l.value)}function q(){i.value="month"}function Y(){i.value=i.value==="months"?"month":"months"}function Q(){i.value=i.value==="year"?"month":"year"}function H(f){i.value==="months"&&Y(),D("update:month",f)}function K(f){i.value==="year"&&Q(),D("update:year",f)}return z(c,(f,I)=>{const p=Ve(I),X=Ve(f);if(!X.length)return;const Z=a.date(p[p.length-1]),W=a.date(X[X.length-1]),B=a.getMonth(W),V=a.getYear(W);B!==l.value&&(l.value=B,H(l.value)),V!==s.value&&(s.value=V,K(s.value)),b.value=a.isBefore(Z,W)}),ie(()=>{const f=Oe.filterProps(e),I=Re.filterProps(e),p=Ee.filterProps(e),X=qe.filterProps(e),Z=fe(Fe.filterProps(e),["modelValue"]),W=fe(Le.filterProps(e),["modelValue"]),B={header:h.value,transition:N.value};return t(Oe,L(f,{class:["v-date-picker",`v-date-picker--${i.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var V;return((V=d.title)==null?void 0:V.call(d))??t("div",{class:"v-date-picker__title"},[m(e.title)])},header:()=>d.header?t(De,{defaults:{VDatePickerHeader:{...B}}},{default:()=>{var V;return[(V=d.header)==null?void 0:V.call(d,B)]}}):t(Ee,L({key:"header"},p,B,{onClick:i.value!=="month"?q:void 0}),{...d,default:void 0}),default:()=>t(oe,null,[t(Re,L(I,{disabled:k.value,text:S.value,"onClick:next":v,"onClick:prev":w,"onClick:month":Y,"onClick:year":Q}),null),t(ya,{hideOnLeave:!0},{default:()=>[i.value==="months"?t(Fe,L({key:"date-picker-months"},Z,{modelValue:l.value,"onUpdate:modelValue":[V=>l.value=V,H],min:A.value,max:O.value,year:s.value}),null):i.value==="year"?t(Le,L({key:"date-picker-years"},W,{modelValue:s.value,"onUpdate:modelValue":[V=>s.value=V,K],min:A.value,max:O.value}),null):t(qe,L({key:"date-picker-month"},X,{modelValue:c.value,"onUpdate:modelValue":V=>c.value=V,month:l.value,"onUpdate:month":[V=>l.value=V,H],year:s.value,"onUpdate:year":[V=>s.value=V,K],min:A.value,max:O.value}),null)]})]),actions:d.actions})}),{}}});function Xa(e){let{swiper:o,extendParams:D,emit:d,on:a}=e,m=!1;const c=Va(),i=xa();D({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(h,S){if(o.virtual&&o.params.virtual.enabled){const N=o.slides.filter(O=>O.getAttribute("data-hash")===S)[0];return N?parseInt(N.getAttribute("data-swiper-slide-index"),10):0}return o.getSlideIndex(_a(o.slidesEl,`.${o.params.slideClass}[data-hash="${S}"], swiper-slide[data-hash="${S}"]`)[0])}}});const u=()=>{d("hashChange");const h=c.location.hash.replace("#",""),S=o.virtual&&o.params.virtual.enabled?o.slidesEl.querySelector(`[data-swiper-slide-index="${o.activeIndex}"]`):o.slides[o.activeIndex],N=S?S.getAttribute("data-hash"):"";if(h!==N){const A=o.params.hashNavigation.getSlideIndex(o,h);if(typeof A>"u"||Number.isNaN(A))return;o.slideTo(A)}},l=()=>{if(!m||!o.params.hashNavigation.enabled)return;const h=o.virtual&&o.params.virtual.enabled?o.slidesEl.querySelector(`[data-swiper-slide-index="${o.activeIndex}"]`):o.slides[o.activeIndex],S=h?h.getAttribute("data-hash")||h.getAttribute("data-history"):"";o.params.hashNavigation.replaceState&&i.history&&i.history.replaceState?(i.history.replaceState(null,null,`#${S}`||""),d("hashSet")):(c.location.hash=S||"",d("hashSet"))},s=()=>{if(!o.params.hashNavigation.enabled||o.params.history&&o.params.history.enabled)return;m=!0;const h=c.location.hash.replace("#","");if(h){const N=o.params.hashNavigation.getSlideIndex(o,h);o.slideTo(N||0,0,o.params.runCallbacksOnInit,!0)}o.params.hashNavigation.watchState&&i.addEventListener("hashchange",u)},b=()=>{o.params.hashNavigation.watchState&&i.removeEventListener("hashchange",u)};a("init",()=>{o.params.hashNavigation.enabled&&s()}),a("destroy",()=>{o.params.hashNavigation.enabled&&b()}),a("transitionEnd _freeModeNoMomentumRelease",()=>{m&&l()}),a("slideChange",()=>{m&&o.params.cssMode&&l()})}const Za={id:"booking",class:"booking"},Ga={class:"dialog-close"},Qa={class:"notice"},Ja=$("p",null,"當天日期無法預約，若有需求，請來電洽詢，謝謝！",-1),et={class:"box pb-6"},at={class:"d-flex flex-row justify-center align-baseline"},tt=$("p",null,"預約狗狗：",-1),lt=["src"],nt={class:"choose-time-dialog-txt"},ot=$("h4",null,"可預約時段",-1),it={class:"dialog-close"},bt={__name:"booking",setup(e){const o=Pa(),D=Da(),{mobile:d,sm:a}=Sa(),{backApi:m,apiAuth:c}=Ta(),i=wa(),u=Aa(),l=Ca(),s=[Ra,Ea,Xa],b=P(()=>i.isLogin?i.account:"Guest"),h=T(null),S=T(new Date),N=T("預約日期"),A=T(window.innerWidth);function O(){if(h.value===null||isNaN(h.value.getTime()))return A.value>576?N.value="預約日期（請於左側日期表選擇）":N.value="選擇預約日期"}const k=P(()=>h.value===null||isNaN(h.value.getTime())?"尚未選取日期":h.value.toLocaleDateString());z(h,(r,n)=>{(!(r instanceof Date)||!(n instanceof Date)||r.toLocaleDateString()!=n.toLocaleDateString())&&(B.value=!1)});const v=r=>r>S.value,w=T([]);(async()=>{var r,n;try{const{data:C}=await m.get("/dogs");w.value.splice(0,w.value.length,...C.result.data),K()}catch(C){console.log(C),l({text:((n=(r=C==null?void 0:C.response)==null?void 0:r.data)==null?void 0:n.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const Y=T(null);function Q(r){Y.value=r}const H=o.query.id;function K(){if(H){if(!H)return;const r=w.value.findIndex(n=>n._id===H);if(r===-1)return;Y.value.slideTo(r,0,!1),Z(H)}else f()}function f(){var n;const r=(n=w.value[0])==null?void 0:n._id;Z(r)}const I=()=>{const r=window.location.hash.split("#")[2];Z(r)},p=T({_id:"",image:"",dogName:"",age:0,price:0,booking:!0,bookingTime:[],feature:"",sell:!0,counter:0}),X=P(()=>p.value.image),Z=async r=>{var n,C;Ie();try{await Pe();const{data:x}=await m.get("/dogs/"+r);p.value._id=x.result._id,p.value.image=x.result.image,p.value.dogName=x.result.dogName,p.value.age=x.result.age,p.value.price=x.result.price,p.value.booking=x.result.booking,p.value.bookingTime=x.result.bookingTime,p.value.feature=x.result.feature,p.value.sell=x.result.sell,p.value.counter=x.result.counter}catch(x){console.log(x),l({text:((C=(n=x==null?void 0:x.response)==null?void 0:n.data)==null?void 0:C.message)||"發生錯誤",snackbarProps:{color:"red"}})}},W=T(!1),B=T(!1),V=(r,n)=>{n=="預約時段"||r.target.innerText==k.value.slice(-2).replace("/","")?W.value=!0:B.value=!0},ge=Na({}),se=T(!1),la=()=>{se.value=!0},ke=()=>{B.value=!1,W.value=!1,se.value=!1},te=T(!1),re=()=>{te.value=!te.value},Se=()=>{te.value=!1},R=T([]),we=P(()=>{const r=R.value;return r.length>1?r.join(`
`):R.value}),Ce=P(()=>`${R.value.length*2} 小時`),Ne=P(()=>`${p.value.price*R.value.length} 元`);function Ie(){h.value=null,R.value=[]}const na=Oa({name:ne().required("預約人名字必填"),phone:ne().required("預約人電話必填"),dogName:ne().required("狗狗名字必填"),bookingDate:ne().required("預約日期必填"),bookingTime:Ya().required("預約時段必填"),totalBookingTime:He().required("預約總時數必填").typeError("預約總時數格式錯誤").min(0,"預約總時數不能小於 0"),totalPrice:He().required("預約總金額必填").typeError("預約總金額格式錯誤").min(0,"預約總金額不能小於 0"),accountName:ne().required("帳戶名稱必填"),orderStatus:$a().required("訂單狀態必填")}),{handleSubmit:oa,isSubmitting:pe,resetForm:ia}=Ua({validationSchema:na,initialValues:{name:b.value,phone:"",image:"",dogName:"",bookingDate:"",bookingTime:[],totalBookingTime:0,totalPrice:0,accountName:"",orderStatus:!0}}),ue=E("name"),be=E("phone"),sa=E("image"),ra=E("dogName"),G=E("bookingDate"),ua=E("bookingTime"),Me=E("totalBookingTime"),Te=E("totalPrice"),da=E("accountName");E("orderStatus"),z(k,(r,n)=>{if(r!==n)return da.value.value=b.value,ra.value.value=p.value.dogName,sa.value.value=p.value.image}),z(k,async(r,n)=>{if(r!==n)return R.value=[],G.value.value=k.value}),z(R,(r,n)=>{if(r!==n)return ua.value.value=R.value.sort((C,x)=>parseInt(C)-parseInt(x))}),z(Ce,(r,n)=>{if(r!==n)return Me.value.value=Ce.value}),z(Ne,(r,n)=>{if(r!==n)return Te.value.value=Ne.value});const Ae=oa(async r=>{var n,C,x,g;try{if(!i.isLogin){console.log("User.isLogin",i.isLogin),l({text:"請先登入會員",snackbarProps:{color:"red"}}),D.push("/login");return}const y=new FormData;y.append("name",r.name),y.append("phone",r.phone),y.append("image",r.image),y.append("dogName",r.dogName),y.append("bookingDate",r.bookingDate),y.append("bookingTime",r.bookingTime),y.append("totalBookingTime",r.totalBookingTime),y.append("totalPrice",r.totalPrice),y.append("accountName",r.accountName),y.append("orderStatus",r.orderStatus);const j=await u.createBookingOrder(y),ca={infor:[{title:"訂單編號",value:j.data.result.bookingOrderNumber},{title:"預約人",value:j.data.result.accountName},{title:"電話",value:j.data.result.phone},{title:"預約狗狗",value:j.data.result.dogName},{title:"預約日期",value:j.data.result.bookingDate},{title:"預約總金額",value:j.data.result.totalPrice+" 元"}],img:j.data.result.image};Object.assign(ge,ca),la(),l({text:j.text,snackbarProps:{color:"green"}}),ia(),Ie()}catch(y){console.log("error",y),console.log("error?.response?.data?.message",(C=(n=y==null?void 0:y.response)==null?void 0:n.data)==null?void 0:C.message),l({text:((g=(x=y==null?void 0:y.response)==null?void 0:x.data)==null?void 0:g.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),Be=P(()=>({myClass:ue.value.value.length>0}));return Qe(async()=>{await Pe(),requestAnimationFrame(()=>{O()})}),(r,n)=>{const C=Ue("swiper-slide"),x=Ue("swiper");return F(),le("section",Za,[t(ja,null,{default:M(()=>[t(x,{class:"dogSwiper",centeredSlides:!0,spaceBetween:30,pagination:{clickable:!0},navigation:!0,hashNavigation:{replaceState:!0,watchState:!0},breakpoints:{0:{slidesPerView:1},576:{slidesPerView:"auto"}},modules:s,onSwiper:Q,onSlideChangeTransitionEnd:I},{default:M(()=>[(F(!0),le(oe,null,Ye(w.value,g=>(F(),de(C,{"data-hash":`/booking#${g._id}`},{default:M(()=>[t(Ba,L({ref_for:!0},g),null,16)]),_:2},1032,["data-hash"]))),256))]),_:1}),t(qa,{class:"booking-area"},{default:M(()=>[t(ce,{md:"6"},{default:M(()=>[_(d)?(F(),de(_e,{key:0,class:"data-dialog",modelValue:B.value,"onUpdate:modelValue":n[1]||(n[1]=g=>B.value=g)},{default:M(()=>[t(je,{modelValue:h.value,"onUpdate:modelValue":n[0]||(n[0]=g=>h.value=g),"allowed-dates":v},null,8,["modelValue"]),$("div",Ga,[t(U,{onClick:ke},{default:M(()=>[t(xe,{icon:te.value?"mdi-close-circle":"mdi-close-circle-outline",onMouseover:re,onMouseout:re,onClick:Se},null,8,["icon"])]),_:1})])]),_:1},8,["modelValue"])):(F(),de(je,{key:1,modelValue:h.value,"onUpdate:modelValue":n[2]||(n[2]=g=>h.value=g),onClick:V,"allowed-dates":v},null,8,["modelValue"])),$("div",Qa,[t(xe,{icon:"mdi-message-alert"}),Ja])]),_:1}),t(ce,{md:"6"},{default:M(()=>[t(Ha,{class:"booking-form",onSubmit:Ia(_(Ae),["prevent"]),disabled:_(pe)},{default:M(()=>[t(J,{label:"預約人姓名",variant:"underlined",class:$e(Be.value),modelValue:_(ue).value.value,"onUpdate:modelValue":n[3]||(n[3]=g=>_(ue).value.value=g),"error-messages":_(ue).errorMessage.value},null,8,["class","modelValue","error-messages"]),t(J,{label:"預約人電話",variant:"underlined",class:$e(Be.value),modelValue:_(be).value.value,"onUpdate:modelValue":n[4]||(n[4]=g=>_(be).value.value=g),"error-messages":_(be).errorMessage.value},null,8,["class","modelValue","error-messages"]),$("div",et,[t(ce,null,{default:M(()=>[$("div",at,[tt,$("h6",null,Ma(p.value.dogName),1)])]),_:1}),t(ce,null,{default:M(()=>[$("img",{src:X.value},null,8,lt)]),_:1})]),_(d)?(F(),le(oe,{key:0},[t(J,{label:N.value,readonly:"",variant:"underlined",onClick:V,modelValue:_(G).value.value,"onUpdate:modelValue":n[5]||(n[5]=g=>_(G).value.value=g),"error-messages":_(G).errorMessage.value},null,8,["label","modelValue","error-messages"]),t(We,{label:"預約時段",readonly:"",textarea:"","auto-grow":"",rows:"1",variant:"underlined","model-value":we.value,onClick:n[6]||(n[6]=g=>V(g,"預約時段"))},null,8,["model-value"])],64)):(F(),le(oe,{key:1},[t(J,{label:N.value,disabled:"",variant:"underlined",modelValue:_(G).value.value,"onUpdate:modelValue":n[7]||(n[7]=g=>_(G).value.value=g),"error-messages":_(G).errorMessage.value},null,8,["label","modelValue","error-messages"]),t(We,{label:"預約時段",disabled:"",textarea:"","auto-grow":"",rows:"1",variant:"underlined","model-value":we.value},null,8,["model-value"])],64)),t(J,{label:" 預約總時數",disabled:"",variant:"underlined","model-value":_(Me).value.value},null,8,["model-value"]),t(J,{label:"總計金額",disabled:"",variant:"underlined","model-value":_(Te).value.value},null,8,["model-value"]),t(U,{class:"w-40 mt-5",type:"submit",color:"green",loading:_(pe)},{default:M(()=>[Ke("送出預約")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1}),t(_e,{class:"choose-time-dialog",modelValue:W.value,"onUpdate:modelValue":n[9]||(n[9]=g=>W.value=g)},{default:M(()=>[$("div",nt,[ot,t(La),(F(!0),le(oe,null,Ye(p.value.bookingTime.join(" ").split(",").sort((g,y)=>parseInt(g)-parseInt(y)),g=>(F(),de(Fa,{"hide-details":"",modelValue:R.value,"onUpdate:modelValue":n[8]||(n[8]=y=>R.value=y),label:g,value:g,"false-icon":"mdi-paw-outline","true-icon":"mdi-paw"},null,8,["modelValue","label","value"]))),256)),$("div",it,[t(U,{onClick:ke},{default:M(()=>[t(xe,{icon:te.value?"mdi-close-circle":"mdi-close-circle-outline",onMouseover:re,onMouseout:re,onClick:Se},null,8,["icon"])]),_:1})])])]),_:1},8,["modelValue"]),t(_e,{modelValue:se.value,"onUpdate:modelValue":n[10]||(n[10]=g=>se.value=g)},{default:M(()=>[t(_(Wa),{bigTitle:"已預約資訊",orderInfoData:ge.infor,orderInfoDataImg:ge.img,dialogClose:ke,submit:_(Ae),isSubmitting:_(pe)},null,8,["orderInfoData","orderInfoDataImg","submit","isSubmitting"])]),_:1},8,["modelValue"])]),_:1})])}}};export{bt as default};
