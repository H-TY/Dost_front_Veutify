import{i as v,a as x,r as c,o as u,k as p,f as e,e as a,l as B,a2 as d,a5 as C,aI as S,d as T,h as I,F as N,aH as w,a8 as A,a3 as D,aP as L}from"./index-CHvuu8OD.js";import{b as f}from"./route-block-B_A1xBdJ.js";import{V as g}from"./VCol-BjfcFgd5.js";import{V as k}from"./VRow-u_dJQbFZ.js";import{r as F}from"./VDataTable-CnopYSZk.js";import{a as P,V as U}from"./VList-CMLqznIr.js";import{V as j}from"./VContainer-DwZrrJg0.js";import"./VPagination-7VO3E3DR.js";import"./VCheckboxBtn-DeQYI_xO.js";import"./VDivider-nxMN7MrH.js";const E=A("h1",null,"預約狗狗查詢",-1),H={__name:"dogBookingSearch",setup(R){const{apiAuth:V}=L(),_=v(),h=x(),y=c(h.account),r=c(""),n=c([]),b=[{align:"center",title:"編號",key:"_id"},{align:"center",title:"下單日期",key:"createdAt",value:l=>new Date(l.createdAt).toLocaleString()},{align:"center",title:"帳號名稱",key:"accountName"},{align:"center",title:"預約人",key:"name"},{align:"center",title:"電話",key:"phone"},{align:"center",title:"預約狗狗",key:"dogName"},{align:"center",title:"預約日期",key:"bookingDate"},{align:"center",title:"預約時段",key:"bookingTime"},{align:"center",title:"預約總金額",key:"totalPrice"}],m=async()=>{var l,s;try{const{data:t}=await V.get("/order",{params:{search:y.value}});n.value.splice(0,n.value.length,...t.result.data)}catch(t){console.log(t),_({text:((s=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:s.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return m(),(l,s)=>(u(),p(j,{class:"my-5",fluid:""},{default:e(()=>[a(k,{class:"text-center"},{default:e(()=>[a(g,null,{default:e(()=>[E]),_:1})]),_:1}),a(k,{class:"text-center"},{default:e(()=>[a(g,null,{default:e(()=>[a(B,{color:"green",onClick:m},{default:e(()=>[d("查詢預約")]),_:1})]),_:1})]),_:1}),a(w,{class:"mt-8",flat:""},{text:e(()=>[a(C,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=t=>r.value=t),label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"])]),default:e(()=>[a(S,null,{default:e(()=>[d("查詢預約結果")]),_:1}),a(F,{headers:b,items:n.value,search:r.value},{"item.bookingTime":e(({value:t})=>[a(P,null,{default:e(()=>[(u(!0),T(N,null,I(t.join(" ").split(",").sort((o,i)=>parseInt(o)-parseInt(i)),(o,i)=>(u(),p(U,{key:i},{default:e(()=>[d(D(o),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["items","search"])]),_:1})]),_:1}))}};typeof f=="function"&&f(H);export{H as default};
