import{p as X,aw as de,q as Z,I as P,s as ee,e as n,k as H,aN as Ze,z as Ge,aR as Ce,K as me,aS as Je,aT as ea,r as T,aU as aa,aV as re,H as le,O as L,a2 as A,S as se,aW as Me,X as Ie,W as R,L as Te,aX as ta,P as Ae,aq as Oe,av as oe,aY as na,aZ as la,a_ as ge,F as ve,a$ as sa,b0 as ue,b1 as oa,aQ as Be,_ as ra,u as ia,a as da,i as ua,o as G,j as ce,w as V,d as ke,g as ye,h as B,a9 as ca,V as W,a0 as be,a4 as te,a1 as va,a5 as Q,a3 as ne,b2 as ma,b as ha,a6 as fa,a7 as pa,a8 as $e}from"./index-BPP8pLfR.js";import{_ as ga}from"./dogsCard-C2rttzbL.js";import{c as ka,a as K,d as ya,b as xe,u as ba,f as q,V as Ve}from"./vee-validate.esm-BHS1Il1s.js";import{g as J,b as xa,e as Va,P as wa,N as Sa,S as _a,a as Pa}from"./pagination-COZGTJmp.js";import{V as we}from"./VCol-BA1E6pxV.js";import{V as Da}from"./VDivider-DgVUsZ6h.js";import{a as Na}from"./VList-CeVs699b.js";import{a as Ca,V as Ma}from"./VRow-D4Fe77u5.js";import{V as Ia}from"./VCheckbox-DuHd7A9R.js";import"./VCheckboxBtn-BXLo0nHL.js";const Ye=X({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:de,default:"$next"},prevIcon:{type:de,default:"$prev"},modeIcon:{type:de,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Se=Z()({name:"VDatePickerControls",props:Ye(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,a){let{emit:b}=a;const d=P(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),t=P(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),v=P(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=P(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function u(){b("click:prev")}function o(){b("click:next")}function l(){b("click:year")}function r(){b("click:month")}return ee(()=>n("div",{class:["v-date-picker-controls"]},[n(H,{class:"v-date-picker-controls__month-btn",disabled:d.value,text:e.text,variant:"text",rounded:!0,onClick:r},null),n(H,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:t.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:l},null),n(Ze,{key:"mode-spacer"},null),n("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[n(H,{disabled:v.value,icon:e.prevIcon,variant:"text",onClick:u},null),n(H,{disabled:i.value,icon:e.nextIcon,variant:"text",onClick:o},null)])])),{}}}),Ta=X({appendIcon:String,color:String,header:String,transition:String,onClick:Je()},"VDatePickerHeader"),_e=Z()({name:"VDatePickerHeader",props:Ta(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,a){let{emit:b,slots:d}=a;const{backgroundColorClasses:t,backgroundColorStyles:v}=Ge(e,"color");function i(){b("click")}function u(){b("click:append")}return ee(()=>{const o=!!(d.default||e.header),l=!!(d.append||e.appendIcon);return n("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},t.value],style:v.value,onClick:i},[d.prepend&&n("div",{key:"prepend",class:"v-date-picker-header__prepend"},[d.prepend()]),o&&n(Ce,{key:"content",name:e.transition},{default:()=>{var r;return[n("div",{key:e.header,class:"v-date-picker-header__content"},[((r=d.default)==null?void 0:r.call(d))??e.header])]}}),l&&n("div",{class:"v-date-picker-header__append"},[d.append?n(me,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var r;return[(r=d.append)==null?void 0:r.call(d)]}}):n(H,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:u},null)])])}),{}}}),He=X({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...ea()},"VDatePickerMonth"),Pe=Z()({name:"VDatePickerMonth",props:He(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,a){let{emit:b,slots:d}=a;const t=T(),{daysInMonth:v,model:i,weekNumbers:u}=aa(e),o=re(),l=le(),r=le(),k=le(!1),w=P(()=>k.value?e.reverseTransition:e.transition);e.multiple==="range"&&i.value.length>0&&(l.value=i.value[0],i.value.length>1&&(r.value=i.value[i.value.length-1]));const m=P(()=>{const h=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return i.value.length>=h});L(v,(h,s)=>{s&&(k.value=o.isBefore(h[0].date,s[0].date))});function D(h){const s=o.startOfDay(h);if(i.value.length===0?l.value=void 0:i.value.length===1&&(l.value=i.value[0],r.value=void 0),!l.value)l.value=s,i.value=[l.value];else if(r.value)l.value=h,r.value=void 0,i.value=[l.value];else{if(o.isSameDay(s,l.value)){l.value=void 0,i.value=[];return}else o.isBefore(s,l.value)?(r.value=o.endOfDay(l.value),l.value=s):r.value=o.endOfDay(s);const C=o.getDiff(r.value,l.value,"days"),_=[l.value];for(let O=1;O<C;O++){const E=o.addDays(l.value,O);_.push(E)}_.push(r.value),i.value=_}}function y(h){const s=i.value.findIndex(C=>o.isSameDay(C,h));if(s===-1)i.value=[...i.value,h];else{const C=[...i.value];C.splice(s,1),i.value=C}}function x(h){e.multiple==="range"?D(h):e.multiple?y(h):i.value=[h]}return()=>n("div",{class:"v-date-picker-month"},[e.showWeek&&n("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&n("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[A(" ")]),u.value.map(h=>n("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[h]))]),n(Ce,{name:w.value},{default:()=>{var h;return[n("div",{ref:t,key:(h=v.value[0].date)==null?void 0:h.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&o.getWeekdays(e.firstDayOfWeek).map(s=>n("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[s])),v.value.map((s,C)=>{const _={props:{onClick:()=>x(s.date)},item:s,i:C};return m.value&&!s.isSelected&&(s.isDisabled=!0),n("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":s.isAdjacent,"v-date-picker-month__day--hide-adjacent":s.isHidden,"v-date-picker-month__day--selected":s.isSelected,"v-date-picker-month__day--week-end":s.isWeekEnd,"v-date-picker-month__day--week-start":s.isWeekStart}],"data-v-date":s.isDisabled?void 0:s.isoDate},[(e.showAdjacentMonths||!s.isAdjacent)&&n(me,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(s.isSelected||s.isToday)&&!s.isDisabled?e.color:void 0,disabled:s.isDisabled,icon:!0,ripple:!1,text:s.localized,variant:s.isDisabled?s.isToday?"outlined":"text":s.isToday&&!s.isSelected?"outlined":"flat",onClick:()=>x(s.date)}}},{default:()=>{var O;return[((O=d.day)==null?void 0:O.call(d,_))??n(H,_.props,null)]}})])})])]}})])}}),Ee=X({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),De=Z()({name:"VDatePickerMonths",props:Ee(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:b,slots:d}=a;const t=re(),v=se(e,"modelValue"),i=P(()=>{let u=t.startOfYear(t.date());return e.year&&(u=t.setYear(u,e.year)),Me(12).map(o=>{const l=t.format(u,"monthShort"),r=!!(e.min&&t.isAfter(t.startOfMonth(t.date(e.min)),u)||e.max&&t.isAfter(u,t.startOfMonth(t.date(e.max))));return u=t.getNextMonth(u),{isDisabled:r,text:l,value:o}})});return Ie(()=>{v.value=v.value??t.getMonth(t.date())}),ee(()=>n("div",{class:"v-date-picker-months",style:{height:Te(e.height)}},[n("div",{class:"v-date-picker-months__content"},[i.value.map((u,o)=>{var k;const l={active:v.value===o,color:v.value===o?e.color:void 0,disabled:u.isDisabled,rounded:!0,text:u.text,variant:v.value===u.value?"flat":"text",onClick:()=>r(o)};function r(w){if(v.value===w){b("update:modelValue",v.value);return}v.value=w}return((k=d.month)==null?void 0:k.call(d,{month:u,i:o,props:l}))??n(H,R({key:"month"},l),null)})])])),{}}}),qe=X({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),Ne=Z()({name:"VDatePickerYears",props:qe(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:b,slots:d}=a;const t=re(),v=se(e,"modelValue"),i=P(()=>{const o=t.getYear(t.date());let l=o-100,r=o+52;e.min&&(l=t.getYear(t.date(e.min))),e.max&&(r=t.getYear(t.date(e.max)));let k=t.startOfYear(t.date());return k=t.setYear(k,l),Me(r-l+1,l).map(w=>{const m=t.format(k,"year");return k=t.setYear(k,t.getYear(k)+1),{text:m,value:w}})});Ie(()=>{v.value=v.value??t.getYear(t.date())});const u=ta();return Ae(async()=>{var o;await Oe(),(o=u.el)==null||o.scrollIntoView({block:"center"})}),ee(()=>n("div",{class:"v-date-picker-years",style:{height:Te(e.height)}},[n("div",{class:"v-date-picker-years__content"},[i.value.map((o,l)=>{var k;const r={ref:v.value===o.value?u:void 0,active:v.value===o.value,color:v.value===o.value?e.color:void 0,rounded:!0,text:o.text,variant:v.value===o.value?"flat":"text",onClick:()=>{if(v.value===o.value){b("update:modelValue",v.value);return}v.value=o.value}};return((k=d.year)==null?void 0:k.call(d,{year:o,i:l,props:r}))??n(H,R({key:"month"},r),null)})])])),{}}}),Aa=X({header:{type:String,default:"$vuetify.datePicker.header"},...Ye(),...He({weeksInMonth:"static"}),...oe(Ee(),["modelValue"]),...oe(qe(),["modelValue"]),...na({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Oa=Z()({name:"VDatePicker",props:Aa(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,a){let{emit:b,slots:d}=a;const t=re(),{t:v}=la(),i=se(e,"modelValue",void 0,f=>ue(f),f=>e.multiple?f:f[0]),u=se(e,"viewMode"),o=P(()=>{var M;const f=t.date((M=i.value)==null?void 0:M[0]);return f&&t.isValid(f)?f:t.date()}),l=T(Number(e.month??t.getMonth(t.startOfMonth(o.value)))),r=T(Number(e.year??t.getYear(t.startOfYear(t.setMonth(o.value,l.value))))),k=le(!1),w=P(()=>e.multiple&&i.value.length>1?v("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&t.isValid(i.value[0])?t.format(t.date(i.value[0]),"normalDateWithWeekday"):v(e.header)),m=P(()=>{let f=t.date();return f=t.setDate(f,1),f=t.setMonth(f,l.value),f=t.setYear(f,r.value),t.format(f,"monthAndYear")}),D=P(()=>`date-picker-header${k.value?"-reverse":""}-transition`),y=P(()=>{const f=t.date(e.min);return e.min&&t.isValid(f)?f:null}),x=P(()=>{const f=t.date(e.max);return e.max&&t.isValid(f)?f:null}),h=P(()=>{if(e.disabled)return!0;const f=[];if(u.value!=="month")f.push("prev","next");else{let M=t.date();if(M=t.setYear(M,r.value),M=t.setMonth(M,l.value),y.value){const $=t.addDays(t.startOfMonth(M),-1);t.isAfter(y.value,$)&&f.push("prev")}if(x.value){const $=t.addDays(t.endOfMonth(M),1);t.isAfter($,x.value)&&f.push("next")}}return f});function s(){l.value<11?l.value++:(r.value++,l.value=0,F(r.value)),j(l.value)}function C(){l.value>0?l.value--:(r.value--,l.value=11,F(r.value)),j(l.value)}function _(){u.value="month"}function O(){u.value=u.value==="months"?"month":"months"}function E(){u.value=u.value==="year"?"month":"year"}function j(f){u.value==="months"&&O(),b("update:month",f)}function F(f){u.value==="year"&&E(),b("update:year",f)}return L(i,(f,M)=>{const $=ue(M),I=ue(f);if(!I.length)return;const z=t.date($[$.length-1]),Y=t.date(I[I.length-1]),U=t.getMonth(Y),N=t.getYear(Y);U!==l.value&&(l.value=U,j(l.value)),N!==r.value&&(r.value=N,F(r.value)),k.value=t.isBefore(z,Y)}),ee(()=>{const f=ge.filterProps(e),M=Se.filterProps(e),$=_e.filterProps(e),I=Pe.filterProps(e),z=oe(De.filterProps(e),["modelValue"]),Y=oe(Ne.filterProps(e),["modelValue"]),U={header:w.value,transition:D.value};return n(ge,R(f,{class:["v-date-picker",`v-date-picker--${u.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var N;return((N=d.title)==null?void 0:N.call(d))??n("div",{class:"v-date-picker__title"},[v(e.title)])},header:()=>d.header?n(me,{defaults:{VDatePickerHeader:{...U}}},{default:()=>{var N;return[(N=d.header)==null?void 0:N.call(d,U)]}}):n(_e,R({key:"header"},$,U,{onClick:u.value!=="month"?_:void 0}),{...d,default:void 0}),default:()=>n(ve,null,[n(Se,R(M,{disabled:h.value,text:m.value,"onClick:next":s,"onClick:prev":C,"onClick:month":O,"onClick:year":E}),null),n(sa,{hideOnLeave:!0},{default:()=>[u.value==="months"?n(De,R({key:"date-picker-months"},z,{modelValue:l.value,"onUpdate:modelValue":[N=>l.value=N,j],min:y.value,max:x.value,year:r.value}),null):u.value==="year"?n(Ne,R({key:"date-picker-years"},Y,{modelValue:r.value,"onUpdate:modelValue":[N=>r.value=N,F],min:y.value,max:x.value}),null):n(Pe,R({key:"date-picker-month"},I,{modelValue:i.value,"onUpdate:modelValue":N=>i.value=N,month:l.value,"onUpdate:month":[N=>l.value=N,j],year:r.value,"onUpdate:year":[N=>r.value=N,F],min:y.value,max:x.value}),null)]})]),actions:d.actions})}),{}}});function Ba(e){let{swiper:a,extendParams:b,on:d}=e;b({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let t=!1,v={};const i=m=>m.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),u=m=>{const D=J();let y;m?y=new URL(m):y=D.location;const x=y.pathname.slice(1).split("/").filter(_=>_!==""),h=x.length,s=x[h-2],C=x[h-1];return{key:s,value:C}},o=(m,D)=>{const y=J();if(!t||!a.params.history.enabled)return;let x;a.params.url?x=new URL(a.params.url):x=y.location;const h=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${D}"]`):a.slides[D];let s=i(h.getAttribute("data-history"));if(a.params.history.root.length>0){let _=a.params.history.root;_[_.length-1]==="/"&&(_=_.slice(0,_.length-1)),s=`${_}/${m?`${m}/`:""}${s}`}else x.pathname.includes(m)||(s=`${m?`${m}/`:""}${s}`);a.params.history.keepQuery&&(s+=x.search);const C=y.history.state;C&&C.value===s||(a.params.history.replaceState?y.history.replaceState({value:s},null,s):y.history.pushState({value:s},null,s))},l=(m,D,y)=>{if(D)for(let x=0,h=a.slides.length;x<h;x+=1){const s=a.slides[x];if(i(s.getAttribute("data-history"))===D){const _=a.getSlideIndex(s);a.slideTo(_,m,y)}}else a.slideTo(0,m,y)},r=()=>{v=u(a.params.url),l(a.params.speed,v.value,!1)},k=()=>{const m=J();if(a.params.history){if(!m.history||!m.history.pushState){a.params.history.enabled=!1,a.params.hashNavigation.enabled=!0;return}if(t=!0,v=u(a.params.url),!v.key&&!v.value){a.params.history.replaceState||m.addEventListener("popstate",r);return}l(0,v.value,a.params.runCallbacksOnInit),a.params.history.replaceState||m.addEventListener("popstate",r)}},w=()=>{const m=J();a.params.history.replaceState||m.removeEventListener("popstate",r)};d("init",()=>{a.params.history.enabled&&k()}),d("destroy",()=>{a.params.history.enabled&&w()}),d("transitionEnd _freeModeNoMomentumRelease",()=>{t&&o(a.params.history.key,a.activeIndex)}),d("slideChange",()=>{t&&a.params.cssMode&&o(a.params.history.key,a.activeIndex)})}function $a(e){let{swiper:a,extendParams:b,emit:d,on:t}=e,v=!1;const i=xa(),u=J();b({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(w,m){if(a.virtual&&a.params.virtual.enabled){const D=a.slides.filter(x=>x.getAttribute("data-hash")===m)[0];return D?parseInt(D.getAttribute("data-swiper-slide-index"),10):0}return a.getSlideIndex(Va(a.slidesEl,`.${a.params.slideClass}[data-hash="${m}"], swiper-slide[data-hash="${m}"]`)[0])}}});const o=()=>{d("hashChange");const w=i.location.hash.replace("#",""),m=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${a.activeIndex}"]`):a.slides[a.activeIndex],D=m?m.getAttribute("data-hash"):"";if(w!==D){const y=a.params.hashNavigation.getSlideIndex(a,w);if(typeof y>"u"||Number.isNaN(y))return;a.slideTo(y)}},l=()=>{if(!v||!a.params.hashNavigation.enabled)return;const w=a.virtual&&a.params.virtual.enabled?a.slidesEl.querySelector(`[data-swiper-slide-index="${a.activeIndex}"]`):a.slides[a.activeIndex],m=w?w.getAttribute("data-hash")||w.getAttribute("data-history"):"";a.params.hashNavigation.replaceState&&u.history&&u.history.replaceState?(u.history.replaceState(null,null,`#${m}`||""),d("hashSet")):(i.location.hash=m||"",d("hashSet"))},r=()=>{if(!a.params.hashNavigation.enabled||a.params.history&&a.params.history.enabled)return;v=!0;const w=i.location.hash.replace("#","");if(w){const D=a.params.hashNavigation.getSlideIndex(a,w);a.slideTo(D||0,0,a.params.runCallbacksOnInit,!0)}a.params.hashNavigation.watchState&&u.addEventListener("hashchange",o)},k=()=>{a.params.hashNavigation.watchState&&u.removeEventListener("hashchange",o)};t("init",()=>{a.params.hashNavigation.enabled&&r()}),t("destroy",()=>{a.params.hashNavigation.enabled&&k()}),t("transitionEnd _freeModeNoMomentumRelease",()=>{v&&l()}),t("slideChange",()=>{v&&a.params.cssMode&&l()})}const Ya=oa("BookingOrderData",()=>{const{apiAuth:e}=Be(),a=T(new Date().toLocaleDateString().replace(/\//g,"")),b=T(null),d=T(""),t=T(""),v=T(""),i=async()=>{var u,o;try{console.log("Store觸發");const{data:l}=await e.get("/order",{params:{search:a.value}}),r=P(()=>l.result.data.length==0?a.value+"000":Math.max(...l.result.data.map(k=>Number(k.bookingOrderNumber))));b.value=r.value}catch(l){console.log(l),createSnackbar({text:((o=(u=l==null?void 0:l.response)==null?void 0:u.data)==null?void 0:o.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return i(),{bookingOrderNumber:b,dogName:d,bookingDate:t,bookingTime:v,endBookingOrderData:i}}),Re=e=>(fa("data-v-68b5a6a4"),e=e(),pa(),e),Ha=Re(()=>$e("h1",null,"預約狗狗時間",-1)),Ea=Re(()=>$e("h3",null,"可預約時段",-1)),qa={__name:"booking",setup(e){const a=ma(),b=ha(),{mobile:d}=ia(),{backApi:t,apiAuth:v}=Be(),i=da(),u=Ya(),o=ua(),l=[wa,Sa,$a,Ba],r=P(()=>{if(!i.isLogin){b.push("/login");return}return i.account}),k=T(new Date("")),w=T(new Date),m=P(()=>isNaN(k.value.getTime())?"左側選擇日期":k.value.toLocaleDateString()),D=g=>g>w.value,y=T([]);(async()=>{var g,p;try{const{data:c}=await t.get("/dogs");y.value.splice(0,y.value.length,...c.result.data)}catch(c){console.log(c),o({text:((p=(g=c==null?void 0:c.response)==null?void 0:g.data)==null?void 0:p.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const h=T({_id:"",image:"",dogName:"",age:0,price:0,booking:!0,bookingTime:[],feature:"",sell:!0,counter:0}),s=T(null);L(s,(g,p)=>{if(g!==p)return I.value=[];console.log("哈希newId:",g,"哈希oldId:",p)});const C=()=>{a.query.id?(s.value=a.query.id,window.location.hash=`booking#${a.query.id}`,a.query.id=""):s.value=window.location.hash.substring(10)},_=()=>{C(),O()};Ae(()=>{setTimeout(()=>{C(),O()},500)});const O=async()=>{var g,p;if(s.value!==null)try{await Oe();const{data:c}=await t.get("/dogs/"+s.value);h.value._id=c.result._id,h.value.image=c.result.image,h.value.dogName=c.result.dogName,h.value.age=c.result.age,h.value.price=c.result.price,h.value.booking=c.result.booking,h.value.bookingTime=c.result.bookingTime,h.value.feature=c.result.feature,h.value.sell=c.result.sell,h.value.counter=c.result.counter}catch(c){console.log(c),o({text:((p=(g=c==null?void 0:c.response)==null?void 0:g.data)==null?void 0:p.message)||"發生錯誤",snackbarProps:{color:"red"}})}};O();const E=T(!1),j=g=>{g.target.innerText==m.value.slice(-2).replace("/","")&&(E.value=!0)},F=()=>{E.value=!1},f=T(!1),M=()=>{f.value=!f.value},$=()=>{f.value=!1},I=T([]),z=P(()=>I.value.length*2),Y=P(()=>h.value.price*I.value.length),U=ka({bookingOrderNumber:K().required("預約訂單編號必填"),name:K().required("預約人名字必填"),phone:K().required("預約人電話必填"),dogName:K().required("狗狗名字必填"),bookingDate:K().required("預約日期必填"),bookingTime:ya().required("預約時段必填"),totalBookingTime:xe().required("預約總時數必填").typeError("預約總時數格式錯誤").min(0,"預約總時數不能小於 0"),totalPrice:xe().required("預約總金額必填").typeError("預約總金額格式錯誤").min(0,"預約總金額不能小於 0"),accountName:K().required("帳戶名稱必填")}),{handleSubmit:N,isSubmitting:he,resetForm:Ue}=ba({validationSchema:U,initialValues:{bookingOrderNumber:"",name:r.value,phone:"",dogName:"",bookingDate:"",bookingTime:[],totalBookingTime:0,totalPrice:0,accountName:""}}),fe=q("bookingOrderNumber"),ae=q("name"),ie=q("phone"),We=q("dogName"),Le=q("bookingDate"),je=q("bookingTime"),Fe=q("totalBookingTime"),ze=q("totalPrice"),Qe=q("accountName");L(m,(g,p)=>{if(g!==p)return Qe.value.value=r.value,We.value.value=h.value.dogName});const Ke=async()=>{await u.endBookingOrderData()};L(m,(g,p)=>{if(g!==p)return I.value=[],Le.value.value=m.value,Ke(),fe.value.value=(u.bookingOrderNumber*1+1).toString(),console.log("OK_bookingOrderNumber",fe.value.value)}),L(I,(g,p)=>{if(g!==p)return je.value.value=I.value.sort((c,S)=>parseInt(c)-parseInt(S))}),L(z,(g,p)=>{if(g!==p)return Fe.value.value=z.value}),L(Y,(g,p)=>{if(g!==p)return ze.value.value=Y.value});const Xe=N(async g=>{var p,c;try{const S=new FormData;S.append("bookingOrderNumber",g.bookingOrderNumber),S.append("name",g.name),S.append("phone",g.phone),S.append("dogName",g.dogName),S.append("bookingDate",g.bookingDate),S.append("bookingTime",g.bookingTime),S.append("totalBookingTime",g.totalBookingTime),S.append("totalPrice",g.totalPrice),S.append("accountName",g.accountName),await v.post("/order",S),o({text:"預約成功",snackbarProps:{color:"green"}}),Ue(),m.value=NaN,I.value=[],Y.value=0}catch(S){console.log(S),o({text:((c=(p=S==null?void 0:S.response)==null?void 0:p.data)==null?void 0:c.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),pe=P(()=>({myClass:ae.value.value.length>0}));return(g,p)=>(G(),ce(Ma,{class:"text-center mt-8"},{default:V(()=>[Ha,n(B(_a),{slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,pagination:{clickable:!0},navigation:!0,hashNavigation:{replaceState:!0,watchState:!0},modules:l,onSlideChangeTransitionEnd:_,class:"mySwiper my-10"},{default:V(()=>[(G(!0),ke(ve,null,ye(y.value,c=>(G(),ce(B(Pa),{"data-hash":`/booking#${c._id}`},{default:V(()=>[n(W,{style:{width:"100%"}},{default:V(()=>[n(ga,R({ref_for:!0},c),null,16)]),_:2},1024)]),_:2},1032,["data-hash"]))),256))]),_:1}),n(Ca,{class:"my-7"},{default:V(()=>[n(we,{class:"d-flex flex-wrap justify-center",cols:"12",sm:"6"},{default:V(()=>[n(Oa,{width:"400",color:"primary",modelValue:k.value,"onUpdate:modelValue":p[0]||(p[0]=c=>k.value=c),"show-adjacent-months":"","allowed-dates":D,onClick:p[1]||(p[1]=c=>j(c))},null,8,["modelValue"]),n(ca,{modelValue:E.value,"onUpdate:modelValue":p[3]||(p[3]=c=>E.value=c)},{default:V(()=>[n(Ve,null,{default:V(()=>[n(W,{class:"bg-white d-flex flex-column text-center justify-self-center align-self-center pa-7",width:"350",height:"240"},{default:V(()=>[Ea,n(Da,{class:"my-4"}),(G(!0),ke(ve,null,ye(h.value.bookingTime.join(" ").split(",").sort((c,S)=>parseInt(c)-parseInt(S)),c=>(G(),ce(Ia,{class:"d-flex justify-center",modelValue:I.value,"onUpdate:modelValue":p[2]||(p[2]=S=>I.value=S),label:c,value:c,"false-icon":"mdi-paw-outline","true-icon":"mdi-paw"},null,8,["modelValue","label","value"]))),256)),n(W,{class:"dialogClosePosition rounded-circle bg-transparent d-flex"},{default:V(()=>[n(H,{class:"rounded-circle d-flex pa-0 bg-white opacity-100","min-width":"60","min-height":"60",variant:"plain",onClick:F,flat:""},{default:V(()=>[n(be,{icon:f.value?"mdi-close-circle":"mdi-close-circle-outline",size:"48",color:"red-darken-4",onMouseover:M,onMouseout:M,onClick:$},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(W,{class:te(["bg-transparent d-flex align-center",B(d)?"mt-5":""])},{default:V(()=>[n(be,{icon:"mdi-message-alert",class:"me-1",color:"orange-darken-2"}),A("當天日期無法預約，若有需求，請來電洽詢，謝謝！")]),_:1},8,["class"])]),_:1}),n(we,{class:te(["d-flex justify-center",B(d)?"my-4":""])},{default:V(()=>[n(Ve,{class:"w-90",cols:"12",sm:"6",onSubmit:va(B(Xe),["prevent"]),disabled:B(he)},{default:V(()=>[n(Q,{label:"預約人姓名",class:te(pe.value),modelValue:B(ae).value.value,"onUpdate:modelValue":p[4]||(p[4]=c=>B(ae).value.value=c),"error-messages":B(ae).errorMessage.value},null,8,["class","modelValue","error-messages"]),n(Q,{label:"預約人電話",class:te(pe.value),modelValue:B(ie).value.value,"onUpdate:modelValue":p[5]||(p[5]=c=>B(ie).value.value=c),"error-messages":B(ie).errorMessage.value},null,8,["class","modelValue","error-messages"]),n(Q,{readonly:""},{default:V(()=>[A("預約狗狗： "),n(W,{class:"text-h6 font-weight-bold bg-transparent"},{default:V(()=>[A(ne(h.value.dogName),1)]),_:1})]),_:1}),n(Q,{readonly:""},{default:V(()=>[A("預約日期： "),n(W,{class:"text-h6 font-weight-bold bg-transparent"},{default:V(()=>[A(ne(m.value),1)]),_:1})]),_:1}),n(Q,{readonly:""},{default:V(()=>[A("預約時間： "),n(Na,{class:"my-0 pa-0 bg-transparent",items:I.value.sort((c,S)=>parseInt(c)-parseInt(S))},null,8,["items"])]),_:1}),n(Q,{readonly:""},{default:V(()=>[A("預約總時數： "),n(W,{class:"text-h5 font-weight-bold bg-transparent"},{default:V(()=>[A(ne(z.value),1)]),_:1}),A(" 小時 ")]),_:1}),n(Q,{readonly:""},{default:V(()=>[A("總計金額： "),n(W,{class:"text-h5 font-weight-bold bg-transparent"},{default:V(()=>[A(ne(Y.value),1)]),_:1}),A(" 元 ")]),_:1}),n(H,{class:"w-40 mt-5",type:"submit",color:"green",loading:B(he)},{default:V(()=>[A("送出預約")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1},8,["class"])]),_:1})]),_:1}))}},Za=ra(qa,[["__scopeId","data-v-68b5a6a4"]]);export{Za as default};
