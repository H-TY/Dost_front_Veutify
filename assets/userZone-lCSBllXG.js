import{_ as N,a as Z,i as T,r as f,c as z,o as d,j as v,w as t,e,V as i,f as k,h as c,k as y,a0 as j,a9 as O,a1 as $,aa as q,ab as E,a2 as x,ac as G,ad as K,u as Q,b as W,I as D,d as I,a3 as M,l as F,F as R,g as X}from"./index-DLRJN4FZ.js";import{u as Y,V as ee}from"./vee-validate.esm-BVy77EUH.js";import{V as A,a as te}from"./VRow-VcEcc_WT.js";import{a as L,V as U}from"./VList-BHosKB_W.js";import{V as _}from"./VCol-Co7rp_lu.js";import{V as ae}from"./VDivider-yJIBPFVa.js";import{V as oe,a as le}from"./VNavigationDrawer-qjNGTUh7.js";const se=""+new URL("userZone_bg_01-修-CbFPSVuJ.png",import.meta.url).href,re={__name:"userPhoto",setup(H){const u=Z(),s=T(),h=f(null),C=()=>{h.value.deleteFileRecord()},a=f(!1),P=()=>{a.value=!0},V=()=>{a.value=!1},o=f(!1),b=()=>{o.value=!o.value},S=()=>{V(),C(),o.value=!1},p=f([]),g=f([]),{handleSubmit:B,isSubmitting:r,resetForm:ce}=Y({initialValues:{image:"123"}}),J=B(async w=>{var l;if(!((l=p.value[0])!=null&&l.error))try{if(p.value.length>0)w.image=p.value[0].file;else{s({text:"未選擇圖片上傳",snackbarProps:{color:"red",location:"center center"}});return}const m=new FormData;m.append("image",w.image);const n=await u.edit(m);n==="上傳圖片成功"&&s({text:n,snackbarProps:{color:"green"}}),V()}catch(m){console.log(m),s({text:result,snackbarProps:{color:"red"}})}});return(w,l)=>{const m=z("vue-file-agent");return d(),v(A,{fluid:"",class:"pa-0 d-flex flex-column"},{default:t(()=>[e(i,{class:"bg-transparent",onClick:P},{default:t(()=>[e(k,{src:c(u).image,class:"rounded-circle","min-width":"130","min-height":"130",cover:""},null,8,["src"]),e(y,{class:"iconBtnPosition d-flex justify-center align-center pa-0",flat:""},{default:t(()=>[e(j,{icon:"mdi-camera",class:"iconStyle"})]),_:1})]),_:1}),e(O,{modelValue:a.value,"onUpdate:modelValue":l[2]||(l[2]=n=>a.value=n),width:"320",persistent:""},{default:t(()=>[e(ee,{onSubmit:$(c(J),["prevent"])},{default:t(()=>[e(q,{height:"370"},{default:t(()=>[e(E,{class:"text-h6 font-weight-bold text-center pa-0 pt-7"},{default:t(()=>[x("目前大頭照")]),_:1}),e(G,{class:"pa-0 px-6 py-7 flex-grow-0"},{default:t(()=>[e(m,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=n=>p.value=n),"raw-model-value":g.value,"onUpdate:rawModelValue":l[1]||(l[1]=n=>g.value=n),accept:"image/jpg,image/jpeg,image/png","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},deletable:"",ref_key:"fileAgent",ref:h},null,8,["modelValue","raw-model-value"])]),_:1}),e(K,{class:"justify-center pa-0 pb-7"},{default:t(()=>[e(y,{class:"bg-green w-25",type:"submit",loading:c(r)},{default:t(()=>[x("送出")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit"]),e(i,{class:"dialogClosePosition rounded-circle bg-transparent d-flex"},{default:t(()=>[e(y,{class:"rounded-circle d-flex pa-0 bg-grey-lighten-3 opacity-100","min-width":"60","min-height":"60",variant:"plain",onClick:w.dialogClose,flat:""},{default:t(()=>[e(j,{icon:o.value?"mdi-close-circle":"mdi-close-circle-outline",size:"48",color:"red-darken-4",onMouseover:b,onMouseout:b,onClick:S},null,8,["icon"])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},ne=N(re,[["__scopeId","data-v-d3276cc2"]]),ie={__name:"userZone",setup(H){const{mobile:u}=Q(),s=Z(),h=W(),C=T(),a=f(!1),P=D(()=>u.value==!0?a.value=!1:a.value=!0),V=f(s.account),o={to:"/userZone",img:new URL(""+new URL("Dost_logo-CIekf1rM.png",import.meta.url).href,import.meta.url).href},b=D(()=>[{to:"/",text:"回首頁",icon:"mdi-home"},{to:"/userZone",text:"會員基本資料",icon:"mdi-list-box"},{to:"/userZone/dogBookingSearch",text:"預約狗狗查詢",icon:"mdi-dog"},{to:"/",text:"狗狗適性測試結果",icon:"mdi-tooltip-edit"},{to:"/",text:"設定",icon:"mdi-cog-outline"}]),S=async()=>(await s.logout(),C({text:"登出成功",snackbarProps:{color:"green"}}),h.push("/"));return(p,g)=>{const B=z("router-view");return d(),I(R,null,[c(u)?(d(),v(A,{key:0,class:"pa-0",fluid:""},{default:t(()=>[e(i,{class:"bg-transparent position-relative","max-height":"450px"},{default:t(()=>[e(i,{class:"bg-red d-flex justify-center pa-10","max-height":"380px"},{default:t(()=>[e(k,{src:o.img,class:"accountBgFilter",fit:""},null,8,["src"])]),_:1}),e(i,{class:"bg-transparent userPhotoPosition"},{default:t(()=>[e(i,{class:"d-flex justify-center userPhotoBorder"},{default:t(()=>[e(ne)]),_:1}),e(i,{class:"bg-transparent text-center accountName"},{default:t(()=>[x(M(c(s).account),1)]),_:1})]),_:1})]),_:1})]),_:1})):F("",!0),e(oe,{class:"border-0",position:"relative",location:c(u)?"right":"left",theme:"light",modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=r=>a.value=r),permanent:P.value},{image:t(()=>[e(k,{src:se,height:"1000",cover:""})]),default:t(()=>[c(u)?F("",!0):(d(),v(L,{key:0,class:"d-flex align-center pa-0 ma-4"},{default:t(()=>[e(_,{class:"pa-0 d-flex justify-end pe-4"},{default:t(()=>[e(U,{class:"rounded-circle pa-2",color:"white",width:" 70",height:"70",to:o.to,ripple:!1},{default:t(()=>[e(k,{src:o.img,cover:""},null,8,["src"])]),_:1},8,["to"])]),_:1}),e(_,null,{default:t(()=>[e(te,{class:"d-flex flex-column"},{default:t(()=>[e(_,{class:"pa-0"},{default:t(()=>[e(U,{to:o.to,ripple:!1,"min-height":"0",class:"d-flex align-center pa-0 text-overline",text:"會員專區"},null,8,["to"])]),_:1}),e(_,{class:"pa-0"},{default:t(()=>[e(i,{class:"bg-transparent accountName d-flex"},{default:t(()=>[x(M(V.value),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})),e(ae),e(L,{class:"px-6 py-4"},{default:t(()=>[(d(!0),I(R,null,X(b.value,r=>(d(),v(U,{key:r.to,to:r.to,title:r.text,"prepend-icon":r.icon,"border-radius":"50",color:"light-blue-darken-2"},null,8,["to","title","prepend-icon"]))),128))]),_:1}),e(_,{class:"d-flex justify-center mt-5"},{default:t(()=>[c(s).isLogin?(d(),v(y,{key:0,"prepend-icon":"mdi-account-arrow-right",class:"bg-deep-orange-darken-2 bottom-0 mb-11",position:"absolute",variant:"outlined",rounded:"",ripple:!1,onClick:S},{default:t(()=>[x("登出")]),_:1})):F("",!0)]),_:1})]),_:1},8,["location","modelValue","permanent"]),e(le,null,{default:t(()=>[e(B)]),_:1})],64)}}},ve=N(ie,[["__scopeId","data-v-6b0ea49d"]]);export{ve as default};
