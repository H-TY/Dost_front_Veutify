import{_ as M,u as U,i as q,o as B,j as I,w as r,e as s,T as A,h as e,Q as N,U as u,V as R,R as i,k as T,aQ as $,b as j,c as E,W as P,X as Q,Y as w}from"./index-Bpng_Fgk.js";import{c as z,a as m,g as D,u as O,f as c,V as W}from"./vee-validate.esm-Bb59PWfo.js";import{v as f}from"./index-Kff9ldf0.js";import{V as x}from"./VCol-DHlgVTbF.js";import{V as X}from"./VDivider-CGjmZFrE.js";import{V as Y}from"./VRow-DbPpJXgm.js";import{V as G}from"./VContainer-BsDcz-rc.js";const _=l=>(P("data-v-246b988a"),l=l(),Q(),l),H=_(()=>w("h1",{class:"text-spacing1"},"歡迎註冊加入",-1)),J=_(()=>w("h4",{class:"text-spacing2"},"享受狗狗至上的服務",-1)),K={__name:"register",setup(l){const{backApi:h}=$(),y=j(),{mobile:k}=U(),v=q(),S=z({account:m().required("使用者帳號必填").min(4,"使用者帳號文字最少 4 個字").max(20,"使用者帳號文字最多 20 個字").test("驗證 account","使用者帳號格式錯誤",o=>f.isAlphanumeric(o)),password:m().required("密碼必填").min(4,"使用者密碼最少 4 個字").max(20,"使用者密碼最多 20 個字"),passwordConfirm:m().required("確認密碼必填").oneOf([D("password")],"密碼不一致"),email:m().required("信箱必填").test("驗證 Email","使用者信箱格式錯誤",o=>f.isEmail(o))}),{handleSubmit:C,isSubmitting:b}=O({validationSchema:S}),d=c("account"),p=c("password"),g=c("passwordConfirm"),V=c("email"),F=C(async o=>{var t,n;try{await h.post("/user",{account:o.account,password:o.password,email:o.email}),v({text:"註冊成功",snackbarProps:{color:"green"}}),y.push("/login")}catch(a){console.log(a),v({text:((n=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:n.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return(o,t)=>{const n=E("router-link");return B(),I(G,{class:"mt-3 mb-7"},{default:r(()=>[s(Y,null,{default:r(()=>[s(x,{class:"text-center",cols:"12"},{default:r(()=>[H,J]),_:1}),s(X,{class:"py-2"}),s(x,{class:"d-flex justify-center"},{default:r(()=>[s(W,{class:A(["text-center",e(k)?"w-50":"w-40"]),onSubmit:N(e(F),["prevent"]),disabled:e(b)},{default:r(()=>[s(u,{type:"account",label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:e(d).value.value,"onUpdate:modelValue":t[0]||(t[0]=a=>e(d).value.value=a),"error-messages":e(d).errorMessage.value},null,8,["modelValue","error-messages"]),s(u,{type:"email",label:"信箱",modelValue:e(V).value.value,"onUpdate:modelValue":t[1]||(t[1]=a=>e(V).value.value=a),"error-messages":e(V).errorMessage.value},null,8,["modelValue","error-messages"]),s(u,{type:"password",label:"密碼",minlength:"4",maxlength:"20",counter:"",modelValue:e(p).value.value,"onUpdate:modelValue":t[2]||(t[2]=a=>e(p).value.value=a),"error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),s(u,{type:"password",label:"確認密碼",minlength:"4",maxlength:"20",counter:"",modelValue:e(g).value.value,"onUpdate:modelValue":t[3]||(t[3]=a=>e(g).value.value=a),"error-messages":e(g).errorMessage.value},null,8,["modelValue","error-messages"]),s(R,{class:"bg-transparent text-body-2 mb-5"},{default:r(()=>[i(" 已加入會員？點擊 "),s(n,{class:"text-subtitle-1 font-weight-black text-decoration-none text-blue",to:{path:"/login"}},{default:r(()=>[i("登入")]),_:1}),i(" 會員 ")]),_:1}),s(T,{class:"w-25",type:"submit",color:"green",loading:e(b)},{default:r(()=>[i("註冊")]),_:1},8,["loading"])]),_:1},8,["class","onSubmit","disabled"])]),_:1})]),_:1})]),_:1})}}},re=M(K,[["__scopeId","data-v-246b988a"]]);export{re as default};
