import{_ as C,i as F,o as M,j as q,w as t,e as o,a1 as B,h as e,a5 as n,k as I,a2 as U,aQ as A,b as N,a6 as $,a7 as E,a8 as b}from"./index-D7W5mdlw.js";import{c as P,a as m,g as R,u as T,f as i,V as j}from"./vee-validate.esm-DBjEran-.js";import{v as f}from"./index-CvWOJxXD.js";import{V as w}from"./VCol-fSjupuPI.js";import{V as O}from"./VDivider-umCazi6M.js";import{V as Q}from"./VRow-BXNdjYRp.js";import{V as z}from"./VContainer-CKvRTEtg.js";const x=l=>($("data-v-cf0cf65c"),l=l(),E(),l),D=x(()=>b("h1",{class:"text-spacing1"},"歡迎註冊加入",-1)),G=x(()=>b("h4",{class:"text-spacing2"},"享受狗狗至上的服務",-1)),H={__name:"register",setup(l){const{backApi:_}=A(),h=N(),v=F(),S=P({account:m().required("使用者帳號必填").min(4,"使用者帳號文字最少 4 個字").max(20,"使用者帳號文字最多 20 個字").test("驗證 account","使用者帳號格式錯誤",r=>f.isAlphanumeric(r)),password:m().required("密碼必填").min(4,"使用者密碼最少 4 個字").max(20,"使用者密碼最多 20 個字"),passwordConfirm:m().required("確認密碼必填").oneOf([R("password")],"密碼不一致"),email:m().required("信箱必填").test("驗證 Email","使用者信箱格式錯誤",r=>f.isEmail(r))}),{handleSubmit:y,isSubmitting:V}=T({validationSchema:S}),c=i("account"),d=i("password"),p=i("passwordConfirm"),g=i("email"),k=y(async r=>{var a,s;try{await _.post("/user",{account:r.account,password:r.password,email:r.email}),v({text:"註冊成功",snackbarProps:{color:"green"}}),h.push("/login")}catch(u){console.log(u),v({text:((s=(a=u==null?void 0:u.response)==null?void 0:a.data)==null?void 0:s.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return(r,a)=>(M(),q(z,{class:"w-75 mt-sm-12 mt-3 mb-7"},{default:t(()=>[o(Q,null,{default:t(()=>[o(w,{class:"text-center",cols:"12"},{default:t(()=>[D,G]),_:1}),o(O,{class:"py-2"}),o(w,null,{default:t(()=>[o(j,{class:"text-center",onSubmit:B(e(k),["prevent"]),disabled:e(V)},{default:t(()=>[o(n,{type:"account",label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:e(c).value.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e(c).value.value=s),"error-messages":e(c).errorMessage.value},null,8,["modelValue","error-messages"]),o(n,{type:"email",label:"信箱",modelValue:e(g).value.value,"onUpdate:modelValue":a[1]||(a[1]=s=>e(g).value.value=s),"error-messages":e(g).errorMessage.value},null,8,["modelValue","error-messages"]),o(n,{type:"password",label:"密碼",minlength:"4",maxlength:"20",counter:"",modelValue:e(d).value.value,"onUpdate:modelValue":a[2]||(a[2]=s=>e(d).value.value=s),"error-messages":e(d).errorMessage.value},null,8,["modelValue","error-messages"]),o(n,{type:"password",label:"確認密碼",minlength:"4",maxlength:"20",counter:"",modelValue:e(p).value.value,"onUpdate:modelValue":a[3]||(a[3]=s=>e(p).value.value=s),"error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),o(I,{class:"w-25",type:"submit",color:"green",loading:e(V)},{default:t(()=>[U("註冊")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1})]),_:1}))}},ee=C(H,[["__scopeId","data-v-cf0cf65c"]]);export{ee as default};
