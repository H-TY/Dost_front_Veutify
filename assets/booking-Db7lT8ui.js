import{p as Q,aB as be,q as J,I as b,s as le,e as t,k as q,aH as ca,z as va,aK as Fe,K as Pe,aL as ma,aM as fa,r as M,aN as ga,aO as ve,H as ue,O as _e,a3 as Le,S as de,aP as je,X as ze,W as R,L as Ke,aQ as ha,P as Xe,an as xe,aA as ce,aR as ka,aS as pa,aT as Ie,F as te,aU as ba,aV as ye,aW as ya,aX as Va,aY as xa,aZ as Pa,b as _a,u as Da,a as Sa,i as wa,ao as Ca,o as W,d as ee,w as B,h as Me,f as y,j as re,a6 as Ve,Z as E,a0 as Na,a1 as Ta,a5 as G,a2 as Be,a4 as Ia,c as Ae,au as Ma}from"./index-B_ClgwzW.js";import{u as Ba}from"./bookingOrder-BZ47P7yv.js";import{_ as Aa}from"./dogsCard-XBiMeBj2.js";import{c as Ya,a as ae,d as Oa,b as Ye,e as $a,u as Ua,f as $,V as Ha}from"./vee-validate.esm--c8TpcSt.js";import{_ as Oe,a as Wa}from"./orderInfoCard-CtLWccuM.js";import{P as Ra,N as Ea}from"./pagination-BidhRDV0.js";import{V as qa}from"./VRow-BM2LP6MJ.js";import{V as se}from"./VCol-6SaxFhke.js";import{a as $e,V as Fa}from"./VTextarea-kn6GrekK.js";import{V as La}from"./VDivider-e0is3_f6.js";import{V as ja}from"./VContainer-28_OieBK.js";import"./VCheckboxBtn-DMWxpVQr.js";const Ze=Q({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:be,default:"$next"},prevIcon:{type:be,default:"$prev"},modeIcon:{type:be,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Ue=J()({name:"VDatePickerControls",props:Ze(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,n){let{emit:k}=n;const o=b(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=b(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),c=b(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),u=b(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function i(){k("click:prev")}function s(){k("click:next")}function l(){k("click:year")}function r(){k("click:month")}return le(()=>t("div",{class:["v-date-picker-controls"]},[t(q,{class:"v-date-picker-controls__month-btn",disabled:o.value,text:e.text,variant:"text",rounded:!0,onClick:r},null),t(q,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:l},null),t(ca,{key:"mode-spacer"},null),t("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[t(q,{disabled:c.value,icon:e.prevIcon,variant:"text",onClick:i},null),t(q,{disabled:u.value,icon:e.nextIcon,variant:"text",onClick:s},null)])])),{}}}),za=Q({appendIcon:String,color:String,header:String,transition:String,onClick:ma()},"VDatePickerHeader"),He=J()({name:"VDatePickerHeader",props:za(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,n){let{emit:k,slots:o}=n;const{backgroundColorClasses:a,backgroundColorStyles:c}=va(e,"color");function u(){k("click")}function i(){k("click:append")}return le(()=>{const s=!!(o.default||e.header),l=!!(o.append||e.appendIcon);return t("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},a.value],style:c.value,onClick:u},[o.prepend&&t("div",{key:"prepend",class:"v-date-picker-header__prepend"},[o.prepend()]),s&&t(Fe,{key:"content",name:e.transition},{default:()=>{var r;return[t("div",{key:e.header,class:"v-date-picker-header__content"},[((r=o.default)==null?void 0:r.call(o))??e.header])]}}),l&&t("div",{class:"v-date-picker-header__append"},[o.append?t(Pe,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var r;return[(r=o.append)==null?void 0:r.call(o)]}}):t(q,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:i},null)])])}),{}}}),Ge=Q({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...fa()},"VDatePickerMonth"),We=J()({name:"VDatePickerMonth",props:Ge(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,n){let{emit:k,slots:o}=n;const a=M(),{daysInMonth:c,model:u,weekNumbers:i}=ga(e),s=ve(),l=ue(),r=ue(),V=ue(!1),g=b(()=>V.value?e.reverseTransition:e.transition);e.multiple==="range"&&u.value.length>0&&(l.value=u.value[0],u.value.length>1&&(r.value=u.value[u.value.length-1]));const S=b(()=>{const x=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return u.value.length>=x});_e(c,(x,d)=>{d&&(V.value=s.isBefore(x[0].date,d[0].date))});function C(x){const d=s.startOfDay(x);if(u.value.length===0?l.value=void 0:u.value.length===1&&(l.value=u.value[0],r.value=void 0),!l.value)l.value=d,u.value=[l.value];else if(r.value)l.value=x,r.value=void 0,u.value=[l.value];else{if(s.isSameDay(d,l.value)){l.value=void 0,u.value=[];return}else s.isBefore(d,l.value)?(r.value=s.endOfDay(l.value),l.value=d):r.value=s.endOfDay(d);const w=s.getDiff(r.value,l.value,"days"),U=[l.value];for(let Y=1;Y<w;Y++){const X=s.addDays(l.value,Y);U.push(X)}U.push(r.value),u.value=U}}function T(x){const d=u.value.findIndex(w=>s.isSameDay(w,x));if(d===-1)u.value=[...u.value,x];else{const w=[...u.value];w.splice(d,1),u.value=w}}function A(x){e.multiple==="range"?C(x):e.multiple?T(x):u.value=[x]}return()=>t("div",{class:"v-date-picker-month"},[e.showWeek&&t("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&t("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[Le(" ")]),i.value.map(x=>t("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[x]))]),t(Fe,{name:g.value},{default:()=>{var x;return[t("div",{ref:a,key:(x=c.value[0].date)==null?void 0:x.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&s.getWeekdays(e.firstDayOfWeek).map(d=>t("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[d])),c.value.map((d,w)=>{const U={props:{onClick:()=>A(d.date)},item:d,i:w};return S.value&&!d.isSelected&&(d.isDisabled=!0),t("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":d.isAdjacent,"v-date-picker-month__day--hide-adjacent":d.isHidden,"v-date-picker-month__day--selected":d.isSelected,"v-date-picker-month__day--week-end":d.isWeekEnd,"v-date-picker-month__day--week-start":d.isWeekStart}],"data-v-date":d.isDisabled?void 0:d.isoDate},[(e.showAdjacentMonths||!d.isAdjacent)&&t(Pe,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(d.isSelected||d.isToday)&&!d.isDisabled?e.color:void 0,disabled:d.isDisabled,icon:!0,ripple:!1,text:d.localized,variant:d.isDisabled?d.isToday?"outlined":"text":d.isToday&&!d.isSelected?"outlined":"flat",onClick:()=>A(d.date)}}},{default:()=>{var Y;return[((Y=o.day)==null?void 0:Y.call(o,U))??t(q,U.props,null)]}})])})])]}})])}}),Qe=Q({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Re=J()({name:"VDatePickerMonths",props:Qe(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:k,slots:o}=n;const a=ve(),c=de(e,"modelValue"),u=b(()=>{let i=a.startOfYear(a.date());return e.year&&(i=a.setYear(i,e.year)),je(12).map(s=>{const l=a.format(i,"monthShort"),r=!!(e.min&&a.isAfter(a.startOfMonth(a.date(e.min)),i)||e.max&&a.isAfter(i,a.startOfMonth(a.date(e.max))));return i=a.getNextMonth(i),{isDisabled:r,text:l,value:s}})});return ze(()=>{c.value=c.value??a.getMonth(a.date())}),le(()=>t("div",{class:"v-date-picker-months",style:{height:Ke(e.height)}},[t("div",{class:"v-date-picker-months__content"},[u.value.map((i,s)=>{var V;const l={active:c.value===s,color:c.value===s?e.color:void 0,disabled:i.isDisabled,rounded:!0,text:i.text,variant:c.value===i.value?"flat":"text",onClick:()=>r(s)};function r(g){if(c.value===g){k("update:modelValue",c.value);return}c.value=g}return((V=o.month)==null?void 0:V.call(o,{month:i,i:s,props:l}))??t(q,R({key:"month"},l),null)})])])),{}}}),Je=Q({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),Ee=J()({name:"VDatePickerYears",props:Je(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:k,slots:o}=n;const a=ve(),c=de(e,"modelValue"),u=b(()=>{const s=a.getYear(a.date());let l=s-100,r=s+52;e.min&&(l=a.getYear(a.date(e.min))),e.max&&(r=a.getYear(a.date(e.max)));let V=a.startOfYear(a.date());return V=a.setYear(V,l),je(r-l+1,l).map(g=>{const S=a.format(V,"year");return V=a.setYear(V,a.getYear(V)+1),{text:S,value:g}})});ze(()=>{c.value=c.value??a.getYear(a.date())});const i=ha();return Xe(async()=>{var s;await xe(),(s=i.el)==null||s.scrollIntoView({block:"center"})}),le(()=>t("div",{class:"v-date-picker-years",style:{height:Ke(e.height)}},[t("div",{class:"v-date-picker-years__content"},[u.value.map((s,l)=>{var V;const r={ref:c.value===s.value?i:void 0,active:c.value===s.value,color:c.value===s.value?e.color:void 0,rounded:!0,text:s.text,variant:c.value===s.value?"flat":"text",onClick:()=>{if(c.value===s.value){k("update:modelValue",c.value);return}c.value=s.value}};return((V=o.year)==null?void 0:V.call(o,{year:s,i:l,props:r}))??t(q,R({key:"month"},r),null)})])])),{}}}),Ka=Q({header:{type:String,default:"$vuetify.datePicker.header"},...Ze(),...Ge({weeksInMonth:"static"}),...ce(Qe(),["modelValue"]),...ce(Je(),["modelValue"]),...ka({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),qe=J()({name:"VDatePicker",props:Ka(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:k,slots:o}=n;const a=ve(),{t:c}=pa(),u=de(e,"modelValue",void 0,m=>ye(m),m=>e.multiple?m:m[0]),i=de(e,"viewMode"),s=b(()=>{var N;const m=a.date((N=u.value)==null?void 0:N[0]);return m&&a.isValid(m)?m:a.date()}),l=M(Number(e.month??a.getMonth(a.startOfMonth(s.value)))),r=M(Number(e.year??a.getYear(a.startOfYear(a.setMonth(s.value,l.value))))),V=ue(!1),g=b(()=>e.multiple&&u.value.length>1?c("$vuetify.datePicker.itemsSelected",u.value.length):u.value[0]&&a.isValid(u.value[0])?a.format(a.date(u.value[0]),"normalDateWithWeekday"):c(e.header)),S=b(()=>{let m=a.date();return m=a.setDate(m,1),m=a.setMonth(m,l.value),m=a.setYear(m,r.value),a.format(m,"monthAndYear")}),C=b(()=>`date-picker-header${V.value?"-reverse":""}-transition`),T=b(()=>{const m=a.date(e.min);return e.min&&a.isValid(m)?m:null}),A=b(()=>{const m=a.date(e.max);return e.max&&a.isValid(m)?m:null}),x=b(()=>{if(e.disabled)return!0;const m=[];if(i.value!=="month")m.push("prev","next");else{let N=a.date();if(N=a.setYear(N,r.value),N=a.setMonth(N,l.value),T.value){const p=a.addDays(a.startOfMonth(N),-1);a.isAfter(T.value,p)&&m.push("prev")}if(A.value){const p=a.addDays(a.endOfMonth(N),1);a.isAfter(p,A.value)&&m.push("next")}}return m});function d(){l.value<11?l.value++:(r.value++,l.value=0,L(r.value)),O(l.value)}function w(){l.value>0?l.value--:(r.value--,l.value=11,L(r.value)),O(l.value)}function U(){i.value="month"}function Y(){i.value=i.value==="months"?"month":"months"}function X(){i.value=i.value==="year"?"month":"year"}function O(m){i.value==="months"&&Y(),k("update:month",m)}function L(m){i.value==="year"&&X(),k("update:year",m)}return _e(u,(m,N)=>{const p=ye(N),j=ye(m);if(!j.length)return;const z=a.date(p[p.length-1]),K=a.date(j[j.length-1]),F=a.getMonth(K),P=a.getYear(K);F!==l.value&&(l.value=F,O(l.value)),P!==r.value&&(r.value=P,L(r.value)),V.value=a.isBefore(z,K)}),le(()=>{const m=Ie.filterProps(e),N=Ue.filterProps(e),p=He.filterProps(e),j=We.filterProps(e),z=ce(Re.filterProps(e),["modelValue"]),K=ce(Ee.filterProps(e),["modelValue"]),F={header:g.value,transition:C.value};return t(Ie,R(m,{class:["v-date-picker",`v-date-picker--${i.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var P;return((P=o.title)==null?void 0:P.call(o))??t("div",{class:"v-date-picker__title"},[c(e.title)])},header:()=>o.header?t(Pe,{defaults:{VDatePickerHeader:{...F}}},{default:()=>{var P;return[(P=o.header)==null?void 0:P.call(o,F)]}}):t(He,R({key:"header"},p,F,{onClick:i.value!=="month"?U:void 0}),{...o,default:void 0}),default:()=>t(te,null,[t(Ue,R(N,{disabled:x.value,text:S.value,"onClick:next":d,"onClick:prev":w,"onClick:month":Y,"onClick:year":X}),null),t(ba,{hideOnLeave:!0},{default:()=>[i.value==="months"?t(Re,R({key:"date-picker-months"},z,{modelValue:l.value,"onUpdate:modelValue":[P=>l.value=P,O],min:T.value,max:A.value,year:r.value}),null):i.value==="year"?t(Ee,R({key:"date-picker-years"},K,{modelValue:r.value,"onUpdate:modelValue":[P=>r.value=P,L],min:T.value,max:A.value}),null):t(We,R({key:"date-picker-month"},j,{modelValue:u.value,"onUpdate:modelValue":P=>u.value=P,month:l.value,"onUpdate:month":[P=>l.value=P,O],year:r.value,"onUpdate:year":[P=>r.value=P,L],min:T.value,max:A.value}),null)]})]),actions:o.actions})}),{}}});function Xa(e){let{swiper:n,extendParams:k,emit:o,on:a}=e,c=!1;const u=ya(),i=Va();k({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(g,S){if(n.virtual&&n.params.virtual.enabled){const C=n.slides.filter(A=>A.getAttribute("data-hash")===S)[0];return C?parseInt(C.getAttribute("data-swiper-slide-index"),10):0}return n.getSlideIndex(xa(n.slidesEl,`.${n.params.slideClass}[data-hash="${S}"], swiper-slide[data-hash="${S}"]`)[0])}}});const s=()=>{o("hashChange");const g=u.location.hash.replace("#",""),S=n.virtual&&n.params.virtual.enabled?n.slidesEl.querySelector(`[data-swiper-slide-index="${n.activeIndex}"]`):n.slides[n.activeIndex],C=S?S.getAttribute("data-hash"):"";if(g!==C){const T=n.params.hashNavigation.getSlideIndex(n,g);if(typeof T>"u"||Number.isNaN(T))return;n.slideTo(T)}},l=()=>{if(!c||!n.params.hashNavigation.enabled)return;const g=n.virtual&&n.params.virtual.enabled?n.slidesEl.querySelector(`[data-swiper-slide-index="${n.activeIndex}"]`):n.slides[n.activeIndex],S=g?g.getAttribute("data-hash")||g.getAttribute("data-history"):"";n.params.hashNavigation.replaceState&&i.history&&i.history.replaceState?(i.history.replaceState(null,null,`#${S}`||""),o("hashSet")):(u.location.hash=S||"",o("hashSet"))},r=()=>{if(!n.params.hashNavigation.enabled||n.params.history&&n.params.history.enabled)return;c=!0;const g=u.location.hash.replace("#","");if(g){const C=n.params.hashNavigation.getSlideIndex(n,g);n.slideTo(C||0,0,n.params.runCallbacksOnInit,!0)}n.params.hashNavigation.watchState&&i.addEventListener("hashchange",s)},V=()=>{n.params.hashNavigation.watchState&&i.removeEventListener("hashchange",s)};a("init",()=>{n.params.hashNavigation.enabled&&r()}),a("destroy",()=>{n.params.hashNavigation.enabled&&V()}),a("transitionEnd _freeModeNoMomentumRelease",()=>{c&&l()}),a("slideChange",()=>{c&&n.params.cssMode&&l()})}function Za(e,n){const k=b(()=>({times:e.value||e||[],price:n.value.price||0})),o=2,a=b(()=>k.value.times.length*o),c=b(()=>k.value.times.length*k.value.price);return{totalBTime:a,totalBPrice:c}}function Ga(e,n,k){const{totalBTime:o,totalBPrice:a}=Za(n,k),c=b(()=>e.value===null||isNaN(e.value.getTime())?"":e.value.toLocaleDateString()),u=b(()=>n.value.sort((l,r)=>parseInt(l)-parseInt(r)).join(`
`)),i=b(()=>`${o.value} 小時`),s=b(()=>`${a.value} 元`);return{totalBTime:o,totalBPrice:a,chooseBDate:c,BTimeTxt:u,totalBTimeTxt:i,totalBPriceTxt:s}}const Qa={id:"booking",class:"booking"},Ja={class:"notice"},et=E("p",null,"當天日期無法預約，若有需求，請來電洽詢，謝謝！",-1),at={class:"box pb-6"},tt={class:"d-flex flex-row justify-center align-baseline"},lt=E("p",null,"預約狗狗：",-1),nt=["src"],ot={class:"choose-time-dialog-txt"},it=E("h4",null,"可預約時段",-1),bt={__name:"booking",setup(e){const n=Pa(),k=_a(),{mobile:o,sm:a}=Da(),{backApi:c,apiAuth:u}=Ma(),i=Sa(),s=Ba(),l=wa(),r=[Ra,Ea,Xa],V=b(()=>i.isLogin?i.account:"Guest"),g=M(null),S=M(new Date),C=M("預約日期"),T=M(window.innerWidth);function A(){if(g.value===null||isNaN(g.value.getTime()))return T.value>576?C.value="預約日期（請於左側日期表選擇）":C.value="選擇預約日期"}_e(g,(f,v)=>{(!(f instanceof Date)||!(v instanceof Date)||f.toLocaleDateString()!=v.toLocaleDateString())&&(Z.value=!1)});const x=f=>f>S.value,d=M([]),w=M([]);(async()=>{var f,v;try{const{data:I}=await c.get("/dogs");w.value.splice(0,w.value.length,...I.result.data),L()}catch(I){console.log(I),l({text:((v=(f=I==null?void 0:I.response)==null?void 0:f.data)==null?void 0:v.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const Y=M(null);function X(f){Y.value=f}const O=n.query.id;function L(){if(O){if(!O)return;const f=w.value.findIndex(v=>v._id===O);if(f===-1)return;Y.value.slideTo(f,0,!1),z(O)}else m()}function m(){var v;const f=(v=w.value[0])==null?void 0:v._id;z(f)}const N=()=>{const f=window.location.hash.split("#")[2];z(f)},p=M({_id:"",image:"",dogName:"",age:0,price:0,booking:!0,bookingTime:[],feature:"",sell:!0,counter:0}),j=b(()=>p.value.image),z=async f=>{var v,I;Se();try{await xe();const{data:D}=await c.get("/dogs/"+f);p.value._id=D.result._id,p.value.image=D.result.image,p.value.dogName=D.result.dogName,p.value.age=D.result.age,p.value.price=D.result.price,p.value.booking=D.result.booking,p.value.bookingTime=D.result.bookingTime,p.value.feature=D.result.feature,p.value.sell=D.result.sell,p.value.counter=D.result.counter}catch(D){console.log(D),l({text:((I=(v=D==null?void 0:D.response)==null?void 0:v.data)==null?void 0:I.message)||"發生錯誤",snackbarProps:{color:"red"}})}},{totalBTime:K,totalBPrice:F,chooseBDate:P,BTimeTxt:De,totalBTimeTxt:ea,totalBPriceTxt:aa}=Ga(g,d,p),ne=M(!1),Z=M(!1),me=(f,v)=>{v=="預約日期"?Z.value=!0:(v=="預約時段"||f.target.innerText==P.value.slice(-2).replace("/",""))&&(ne.value=!0)},fe=Ca({}),oe=M(!1),ta=()=>{oe.value=!0},ge=f=>{switch(f){case"dataDialog":Z.value=!1;break;case"chooseTimeDialog":ne.value=!1;break;case"dialogOrderInfo":oe.value=!1;break;default:console.warn("不存在的 dialogName:",f)}};function Se(){g.value=null,d.value=[]}const la=Ya({name:ae().required("預約人名字必填"),phone:ae().required("預約人電話必填"),dogName:ae().required("狗狗名字必填"),bookingDate:ae().required("預約日期必填"),bookingTime:Oa().required("預約時段必填").min(1,"預約時段必填"),totalBookingTime:Ye().required("預約總時數必填").typeError("預約總時數格式錯誤").min(1,"預約總時數不能小於 1"),totalPrice:Ye().required("預約總金額必填").typeError("預約總金額格式錯誤").min(1,"預約總金額不能小於 1"),accountName:ae().required("帳戶名稱必填"),orderStatus:$a().required("訂單狀態必填")}),{handleSubmit:na,isSubmitting:we,resetForm:oa}=Ua({validationSchema:la,initialValues:{name:V.value,phone:"",image:"",dogName:"",bookingDate:"",bookingTime:[],totalBookingTime:0,totalPrice:0,accountName:V.value,orderStatus:!0}}),ie=$("name"),he=$("phone"),ia=$("image"),ra=$("dogName"),ke=$("bookingDate"),pe=$("bookingTime"),Ce=$("totalBookingTime"),Ne=$("totalPrice");$("accountName"),$("orderStatus");function sa(){ia.value.value=p.value.image,ra.value.value=p.value.dogName,ke.value.value=P.value,pe.value.value=d.value,Ce.value.value=K.value,Ne.value.value=F.value}const ua=na(async f=>{var v,I,D,h;try{if(!i.isLogin){console.log("User.isLogin",i.isLogin),l({text:"請先登入會員",snackbarProps:{color:"red"}}),k.push("/login");return}const _=new FormData;_.append("name",f.name),_.append("phone",f.phone),_.append("image",f.image),_.append("dogName",f.dogName),_.append("bookingDate",f.bookingDate),_.append("bookingTime",f.bookingTime),_.append("totalBookingTime",f.totalBookingTime),_.append("totalPrice",f.totalPrice),_.append("accountName",f.accountName),_.append("orderStatus",f.orderStatus);const H=await s.createBookingOrder(_),da={infor:[{title:"訂單編號",value:H.data.result.bookingOrderNumber},{title:"預約人",value:H.data.result.name},{title:"電話",value:H.data.result.phone},{title:"預約狗狗",value:H.data.result.dogName},{title:"預約日期",value:H.data.result.bookingDate},{title:"預約時段",value:H.data.result.bookingTime[0].replace(/,/g,`
`)},{title:"預約總金額",value:H.data.result.totalPrice+" 元"}],img:H.data.result.image};Object.assign(fe,da),ta(),l({text:H.text,snackbarProps:{color:"green"}}),oa(),Se()}catch(_){console.log("error",_),console.log("error?.response?.data?.message",(I=(v=_==null?void 0:_.response)==null?void 0:v.data)==null?void 0:I.message),l({text:((h=(D=_==null?void 0:_.response)==null?void 0:D.data)==null?void 0:h.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),Te=b(()=>({myClass:ie.value.value.length>0}));return Xe(async()=>{await xe(),requestAnimationFrame(()=>{A()})}),(f,v)=>{const I=Ae("swiper-slide"),D=Ae("swiper");return W(),ee("section",Qa,[t(ja,null,{default:B(()=>[t(D,{class:"dogSwiper",centeredSlides:!0,spaceBetween:30,pagination:{clickable:!0},navigation:!0,hashNavigation:{replaceState:!0,watchState:!0},breakpoints:{0:{slidesPerView:1},576:{slidesPerView:"auto"}},modules:r,onSwiper:X,onSlideChangeTransitionEnd:N},{default:B(()=>[(W(!0),ee(te,null,Me(w.value,h=>(W(),re(I,{"data-hash":`/booking#${h._id}`},{default:B(()=>[t(Aa,R({ref_for:!0},h),null,16)]),_:2},1032,["data-hash"]))),256))]),_:1}),t(qa,{class:"booking-area"},{default:B(()=>[t(se,{md:"6"},{default:B(()=>[y(o)?(W(),re(Ve,{key:0,class:"data-dialog",modelValue:Z.value,"onUpdate:modelValue":v[1]||(v[1]=h=>Z.value=h)},{default:B(()=>[t(qe,{modelValue:g.value,"onUpdate:modelValue":v[0]||(v[0]=h=>g.value=h),"allowed-dates":x},null,8,["modelValue"]),t(Oe,{dialogName:"dataDialog",onClose:ge})]),_:1},8,["modelValue"])):(W(),re(qe,{key:1,modelValue:g.value,"onUpdate:modelValue":v[2]||(v[2]=h=>g.value=h),onClick:me,"allowed-dates":x},null,8,["modelValue"])),E("div",Ja,[t(Na,{icon:"mdi-message-alert"}),et])]),_:1}),t(se,{md:"6"},{default:B(()=>[t(Ha,{class:"booking-form",onSubmit:Ta(y(ua),["prevent"]),disabled:y(we)},{default:B(()=>[t(G,{label:"預約人姓名",variant:"underlined",class:Be(Te.value),modelValue:y(ie).value.value,"onUpdate:modelValue":v[3]||(v[3]=h=>y(ie).value.value=h),"error-messages":y(ie).errorMessage.value},null,8,["class","modelValue","error-messages"]),t(G,{label:"預約人電話",variant:"underlined",class:Be(Te.value),modelValue:y(he).value.value,"onUpdate:modelValue":v[4]||(v[4]=h=>y(he).value.value=h),"error-messages":y(he).errorMessage.value},null,8,["class","modelValue","error-messages"]),E("div",at,[t(se,null,{default:B(()=>[E("div",tt,[lt,E("h6",null,Ia(p.value.dogName),1)])]),_:1}),t(se,null,{default:B(()=>[E("img",{src:j.value},null,8,nt)]),_:1})]),y(o)?(W(),ee(te,{key:0},[t(G,{label:C.value,readonly:"",variant:"underlined",onClick:v[5]||(v[5]=h=>me(h,"預約日期")),"model-value":y(P),"error-messages":y(ke).errorMessage.value},null,8,["label","model-value","error-messages"]),t($e,{label:"預約時段",readonly:"",textarea:"","auto-grow":"",rows:"1",variant:"underlined","model-value":y(De),"error-messages":y(pe).errorMessage.value,onClick:v[6]||(v[6]=h=>me(h,"預約時段"))},null,8,["model-value","error-messages"])],64)):(W(),ee(te,{key:1},[t(G,{label:C.value,disabled:"",variant:"underlined","model-value":y(P),"error-messages":y(ke).errorMessage.value},null,8,["label","model-value","error-messages"]),t($e,{label:"預約時段",disabled:"",textarea:"","auto-grow":"",rows:"1",variant:"underlined","model-value":y(De),"error-messages":y(pe).errorMessage.value},null,8,["model-value","error-messages"])],64)),t(G,{label:" 預約總時數",disabled:"",variant:"underlined","model-value":y(ea),"error-messages":y(Ce).errorMessage.value},null,8,["model-value","error-messages"]),t(G,{label:"總計金額",disabled:"",variant:"underlined","model-value":y(aa),"error-messages":y(Ne).errorMessage.value},null,8,["model-value","error-messages"]),t(q,{class:"submit-btn",type:"submit",onClick:sa,loading:y(we)},{default:B(()=>[Le("送出預約")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1}),t(Ve,{class:"choose-time-dialog",modelValue:ne.value,"onUpdate:modelValue":v[8]||(v[8]=h=>ne.value=h)},{default:B(()=>[E("div",ot,[it,t(La),(W(!0),ee(te,null,Me(p.value.bookingTime.join(" ").split(",").sort((h,_)=>parseInt(h)-parseInt(_)),h=>(W(),re(Fa,{"hide-details":"",modelValue:d.value,"onUpdate:modelValue":v[7]||(v[7]=_=>d.value=_),label:h,value:h,"false-icon":"mdi-paw-outline","true-icon":"mdi-paw"},null,8,["modelValue","label","value"]))),256)),t(Oe,{dialogName:"chooseTimeDialog",onClose:ge})])]),_:1},8,["modelValue"]),t(Ve,{modelValue:oe.value,"onUpdate:modelValue":v[9]||(v[9]=h=>oe.value=h)},{default:B(()=>[t(y(Wa),{class:"order-info",bigTitle:"已成功預約",orderInfoData:fe.infor,orderInfoDataImg:fe.img,dialogClose:ge},null,8,["orderInfoData","orderInfoDataImg"])]),_:1},8,["modelValue"])]),_:1})])}}};export{bt as default};
