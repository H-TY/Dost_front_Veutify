import{_ as U,b as F,u as q,i as R,O as $,o as A,j as N,w as l,e as t,a2 as j,f as e,a1 as E,a5 as c,V as L,a3 as d,k as O,au as P,c as T,av as Z,aw as z,Z as x}from"./index-DcCE1zY3.js";import{c as D,a as r,g as G,u as H,f as n,V as J}from"./vee-validate.esm-CeMod6hW.js";import{v as b}from"./index-BYiaXz1c.js";import{V as w}from"./VCol-DOoOEpVk.js";import{V as K}from"./VDivider-CeNHaRDM.js";import{V as Q}from"./VRow-EQX1bY24.js";import{V as W}from"./VContainer-DLIgLdBa.js";const _=i=>(Z("data-v-02be2a28"),i=i(),z(),i),X=_(()=>x("h1",{class:"text-spacing1"},"歡迎註冊加入",-1)),Y=_(()=>x("h4",{class:"text-spacing2"},"享受狗狗至上的服務",-1)),ee={__name:"register",setup(i){const h={to:"/userZone",img:new URL(""+new URL("Dost_logo-CIekf1rM.png",import.meta.url).href,import.meta.url).href},{backApi:k}=P(),y=F(),{mobile:I}=q(),V=R(),S=D({account:r().required("使用者帳號必填").min(4,"使用者帳號文字最少 4 個字").max(20,"使用者帳號文字最多 20 個字").test("驗證 account","使用者帳號格式錯誤",o=>b.isAlphanumeric(o)),password:r().required("密碼必填").min(4,"使用者密碼最少 4 個字").max(20,"使用者密碼最多 20 個字"),passwordConfirm:r().required("確認密碼必填").oneOf([G("password")],"密碼不一致"),email:r().required("信箱必填").test("驗證 Email","使用者信箱格式錯誤",o=>b.isEmail(o)),image:r(),accountBgImage:r()}),{handleSubmit:B,isSubmitting:f}=H({validationSchema:S,initialValues:{accountBgImage:h.img}}),u=n("account"),p=n("password"),g=n("passwordConfirm"),v=n("email"),C=n("image");n("accountBgImage"),$(u.value,(o,a)=>{C.value.value=`https://api.multiavatar.com/${u.value.value}.png`});const M=B(async o=>{var a,m;try{await k.post("/user",{account:o.account,password:o.password,email:o.email,image:o.image,accountBgImage:o.accountBgImage}),V({text:"註冊成功",snackbarProps:{color:"green"}}),y.push("/login")}catch(s){console.log(s),V({text:((m=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:m.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return(o,a)=>{const m=T("router-link");return A(),N(W,{class:"mt-3 mb-7"},{default:l(()=>[t(Q,null,{default:l(()=>[t(w,{class:"text-center",cols:"12"},{default:l(()=>[X,Y]),_:1}),t(K,{class:"py-2"}),t(w,{class:"d-flex justify-center"},{default:l(()=>[t(J,{class:j(["text-center",e(I)?"w-50":"w-40"]),onSubmit:E(e(M),["prevent"]),disabled:e(f)},{default:l(()=>[t(c,{type:"account",label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:e(u).value.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e(u).value.value=s),"error-messages":e(u).errorMessage.value},null,8,["modelValue","error-messages"]),t(c,{type:"email",label:"信箱",modelValue:e(v).value.value,"onUpdate:modelValue":a[1]||(a[1]=s=>e(v).value.value=s),"error-messages":e(v).errorMessage.value},null,8,["modelValue","error-messages"]),t(c,{type:"password",label:"密碼",minlength:"4",maxlength:"20",counter:"",modelValue:e(p).value.value,"onUpdate:modelValue":a[2]||(a[2]=s=>e(p).value.value=s),"error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),t(c,{type:"password",label:"確認密碼",minlength:"4",maxlength:"20",counter:"",modelValue:e(g).value.value,"onUpdate:modelValue":a[3]||(a[3]=s=>e(g).value.value=s),"error-messages":e(g).errorMessage.value},null,8,["modelValue","error-messages"]),t(L,{class:"bg-transparent text-body-2 mb-5"},{default:l(()=>[d(" 已加入會員？點擊 "),t(m,{class:"text-subtitle-1 font-weight-black text-decoration-none text-blue",to:{path:"/login"}},{default:l(()=>[d("登入")]),_:1}),d(" 會員 ")]),_:1}),t(O,{class:"w-25",type:"submit",color:"green",loading:e(f)},{default:l(()=>[d("註冊")]),_:1},8,["loading"])]),_:1},8,["class","onSubmit","disabled"])]),_:1})]),_:1})]),_:1})}}},ue=U(ee,[["__scopeId","data-v-02be2a28"]]);export{ue as default};
