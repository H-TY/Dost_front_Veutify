import{p as Z,aA as be,q as J,I as V,s as te,e as t,k as E,aG as ia,z as sa,aK as Ue,K as De,aL as ra,aM as ua,r as N,aN as da,aO as ce,H as re,O as _e,a3 as He,S as ue,aP as We,X as Re,W as F,L as Fe,aQ as ca,P as Le,an as xe,az as de,aR as va,aS as ma,aT as we,F as ae,aU as fa,aV as ye,aW as ha,aX as ga,aY as ka,aZ as pa,b as ba,u as ya,a as Va,i as xa,a_ as Da,o as R,d as Q,w as M,h as Ce,f as D,j as ie,a6 as Ve,Z as L,a0 as _a,a1 as Sa,a5 as X,a4 as Pa,aJ as wa,c as Ne}from"./index-CdslpjzL.js";import{u as Ca}from"./bookingOrder-CMpKpPL6.js";import{_ as Na}from"./dogsCard-D1X9dS9y.js";import{c as Ia,a as ee,d as Ma,e as Ta,u as Ba,f as q,V as Aa}from"./vee-validate.esm-Cf8OACO2.js";import{_ as Ie,a as Ya}from"./orderInfoCard-6Bf98CMh.js";import{P as $a,N as Oa}from"./pagination-DHQxPB2t.js";import{V as Ua}from"./VRow-wGRv9S0B.js";import{V as se}from"./VCol-C3gT_YzK.js";import{a as Me,V as Ha}from"./VTextarea-D2_VdbhX.js";import{V as Wa}from"./VDivider-B1Rh7UWT.js";import{V as Ra}from"./VContainer-DCh82_Uk.js";import"./VCheckboxBtn-pr4lZuoz.js";const Ee=Z({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:be,default:"$next"},prevIcon:{type:be,default:"$prev"},modeIcon:{type:be,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Te=J()({name:"VDatePickerControls",props:Ee(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,n){let{emit:b}=n;const s=V(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=V(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),c=V(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),u=V(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function r(){b("click:prev")}function o(){b("click:next")}function l(){b("click:year")}function i(){b("click:month")}return te(()=>t("div",{class:["v-date-picker-controls"]},[t(E,{class:"v-date-picker-controls__month-btn",disabled:s.value,text:e.text,variant:"text",rounded:!0,onClick:i},null),t(E,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:l},null),t(ia,{key:"mode-spacer"},null),t("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[t(E,{disabled:c.value,icon:e.prevIcon,variant:"text",onClick:r},null),t(E,{disabled:u.value,icon:e.nextIcon,variant:"text",onClick:o},null)])])),{}}}),Fa=Z({appendIcon:String,color:String,header:String,transition:String,onClick:ra()},"VDatePickerHeader"),Be=J()({name:"VDatePickerHeader",props:Fa(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,n){let{emit:b,slots:s}=n;const{backgroundColorClasses:a,backgroundColorStyles:c}=sa(e,"color");function u(){b("click")}function r(){b("click:append")}return te(()=>{const o=!!(s.default||e.header),l=!!(s.append||e.appendIcon);return t("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},a.value],style:c.value,onClick:u},[s.prepend&&t("div",{key:"prepend",class:"v-date-picker-header__prepend"},[s.prepend()]),o&&t(Ue,{key:"content",name:e.transition},{default:()=>{var i;return[t("div",{key:e.header,class:"v-date-picker-header__content"},[((i=s.default)==null?void 0:i.call(s))??e.header])]}}),l&&t("div",{class:"v-date-picker-header__append"},[s.append?t(De,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var i;return[(i=s.append)==null?void 0:i.call(s)]}}):t(E,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:r},null)])])}),{}}}),qe=Z({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...ua()},"VDatePickerMonth"),Ae=J()({name:"VDatePickerMonth",props:qe(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,n){let{emit:b,slots:s}=n;const a=N(),{daysInMonth:c,model:u,weekNumbers:r}=da(e),o=ce(),l=re(),i=re(),k=re(!1),y=V(()=>k.value?e.reverseTransition:e.transition);e.multiple==="range"&&u.value.length>0&&(l.value=u.value[0],u.value.length>1&&(i.value=u.value[u.value.length-1]));const _=V(()=>{const p=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return u.value.length>=p});_e(c,(p,d)=>{d&&(k.value=o.isBefore(p[0].date,d[0].date))});function T(p){const d=o.startOfDay(p);if(u.value.length===0?l.value=void 0:u.value.length===1&&(l.value=u.value[0],i.value=void 0),!l.value)l.value=d,u.value=[l.value];else if(i.value)l.value=p,i.value=void 0,u.value=[l.value];else{if(o.isSameDay(d,l.value)){l.value=void 0,u.value=[];return}else o.isBefore(d,l.value)?(i.value=o.endOfDay(l.value),l.value=d):i.value=o.endOfDay(d);const B=o.getDiff(i.value,l.value,"days"),A=[l.value];for(let Y=1;Y<B;Y++){const U=o.addDays(l.value,Y);A.push(U)}A.push(i.value),u.value=A}}function C(p){const d=u.value.findIndex(B=>o.isSameDay(B,p));if(d===-1)u.value=[...u.value,p];else{const B=[...u.value];B.splice(d,1),u.value=B}}function I(p){e.multiple==="range"?T(p):e.multiple?C(p):u.value=[p]}return()=>t("div",{class:"v-date-picker-month"},[e.showWeek&&t("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&t("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[He(" ")]),r.value.map(p=>t("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[p]))]),t(Ue,{name:y.value},{default:()=>{var p;return[t("div",{ref:a,key:(p=c.value[0].date)==null?void 0:p.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&o.getWeekdays(e.firstDayOfWeek).map(d=>t("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[d])),c.value.map((d,B)=>{const A={props:{onClick:()=>I(d.date)},item:d,i:B};return _.value&&!d.isSelected&&(d.isDisabled=!0),t("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":d.isAdjacent,"v-date-picker-month__day--hide-adjacent":d.isHidden,"v-date-picker-month__day--selected":d.isSelected,"v-date-picker-month__day--week-end":d.isWeekEnd,"v-date-picker-month__day--week-start":d.isWeekStart}],"data-v-date":d.isDisabled?void 0:d.isoDate},[(e.showAdjacentMonths||!d.isAdjacent)&&t(De,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(d.isSelected||d.isToday)&&!d.isDisabled?e.color:void 0,disabled:d.isDisabled,icon:!0,ripple:!1,text:d.localized,variant:d.isDisabled?d.isToday?"outlined":"text":d.isToday&&!d.isSelected?"outlined":"flat",onClick:()=>I(d.date)}}},{default:()=>{var Y;return[((Y=s.day)==null?void 0:Y.call(s,A))??t(E,A.props,null)]}})])})])]}})])}}),je=Z({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Ye=J()({name:"VDatePickerMonths",props:je(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:b,slots:s}=n;const a=ce(),c=ue(e,"modelValue"),u=V(()=>{let r=a.startOfYear(a.date());return e.year&&(r=a.setYear(r,e.year)),We(12).map(o=>{const l=a.format(r,"monthShort"),i=!!(e.min&&a.isAfter(a.startOfMonth(a.date(e.min)),r)||e.max&&a.isAfter(r,a.startOfMonth(a.date(e.max))));return r=a.getNextMonth(r),{isDisabled:i,text:l,value:o}})});return Re(()=>{c.value=c.value??a.getMonth(a.date())}),te(()=>t("div",{class:"v-date-picker-months",style:{height:Fe(e.height)}},[t("div",{class:"v-date-picker-months__content"},[u.value.map((r,o)=>{var k;const l={active:c.value===o,color:c.value===o?e.color:void 0,disabled:r.isDisabled,rounded:!0,text:r.text,variant:c.value===r.value?"flat":"text",onClick:()=>i(o)};function i(y){if(c.value===y){b("update:modelValue",c.value);return}c.value=y}return((k=s.month)==null?void 0:k.call(s,{month:r,i:o,props:l}))??t(E,F({key:"month"},l),null)})])])),{}}}),ze=Z({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),$e=J()({name:"VDatePickerYears",props:ze(),emits:{"update:modelValue":e=>!0},setup(e,n){let{emit:b,slots:s}=n;const a=ce(),c=ue(e,"modelValue"),u=V(()=>{const o=a.getYear(a.date());let l=o-100,i=o+52;e.min&&(l=a.getYear(a.date(e.min))),e.max&&(i=a.getYear(a.date(e.max)));let k=a.startOfYear(a.date());return k=a.setYear(k,l),We(i-l+1,l).map(y=>{const _=a.format(k,"year");return k=a.setYear(k,a.getYear(k)+1),{text:_,value:y}})});Re(()=>{c.value=c.value??a.getYear(a.date())});const r=ca();return Le(async()=>{var o;await xe(),(o=r.el)==null||o.scrollIntoView({block:"center"})}),te(()=>t("div",{class:"v-date-picker-years",style:{height:Fe(e.height)}},[t("div",{class:"v-date-picker-years__content"},[u.value.map((o,l)=>{var k;const i={ref:c.value===o.value?r:void 0,active:c.value===o.value,color:c.value===o.value?e.color:void 0,rounded:!0,text:o.text,variant:c.value===o.value?"flat":"text",onClick:()=>{if(c.value===o.value){b("update:modelValue",c.value);return}c.value=o.value}};return((k=s.year)==null?void 0:k.call(s,{year:o,i:l,props:i}))??t(E,F({key:"month"},i),null)})])])),{}}}),La=Z({header:{type:String,default:"$vuetify.datePicker.header"},...Ee(),...qe({weeksInMonth:"static"}),...de(je(),["modelValue"]),...de(ze(),["modelValue"]),...va({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Oe=J()({name:"VDatePicker",props:La(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,n){let{emit:b,slots:s}=n;const a=ce(),{t:c}=ma(),u=ue(e,"modelValue",void 0,m=>ye(m),m=>e.multiple?m:m[0]),r=ue(e,"viewMode"),o=V(()=>{var h;const m=a.date((h=u.value)==null?void 0:h[0]);return m&&a.isValid(m)?m:a.date()}),l=N(Number(e.month??a.getMonth(a.startOfMonth(o.value)))),i=N(Number(e.year??a.getYear(a.startOfYear(a.setMonth(o.value,l.value))))),k=re(!1),y=V(()=>e.multiple&&u.value.length>1?c("$vuetify.datePicker.itemsSelected",u.value.length):u.value[0]&&a.isValid(u.value[0])?a.format(a.date(u.value[0]),"normalDateWithWeekday"):c(e.header)),_=V(()=>{let m=a.date();return m=a.setDate(m,1),m=a.setMonth(m,l.value),m=a.setYear(m,i.value),a.format(m,"monthAndYear")}),T=V(()=>`date-picker-header${k.value?"-reverse":""}-transition`),C=V(()=>{const m=a.date(e.min);return e.min&&a.isValid(m)?m:null}),I=V(()=>{const m=a.date(e.max);return e.max&&a.isValid(m)?m:null}),p=V(()=>{if(e.disabled)return!0;const m=[];if(r.value!=="month")m.push("prev","next");else{let h=a.date();if(h=a.setYear(h,i.value),h=a.setMonth(h,l.value),C.value){const O=a.addDays(a.startOfMonth(h),-1);a.isAfter(C.value,O)&&m.push("prev")}if(I.value){const O=a.addDays(a.endOfMonth(h),1);a.isAfter(O,I.value)&&m.push("next")}}return m});function d(){l.value<11?l.value++:(i.value++,l.value=0,z(i.value)),j(l.value)}function B(){l.value>0?l.value--:(i.value--,l.value=11,z(i.value)),j(l.value)}function A(){r.value="month"}function Y(){r.value=r.value==="months"?"month":"months"}function U(){r.value=r.value==="year"?"month":"year"}function j(m){r.value==="months"&&Y(),b("update:month",m)}function z(m){r.value==="year"&&U(),b("update:year",m)}return _e(u,(m,h)=>{const O=ye(h),H=ye(m);if(!H.length)return;const le=a.date(O[O.length-1]),G=a.date(H[H.length-1]),$=a.getMonth(G),S=a.getYear(G);$!==l.value&&(l.value=$,j(l.value)),S!==i.value&&(i.value=S,z(i.value)),k.value=a.isBefore(le,G)}),te(()=>{const m=we.filterProps(e),h=Te.filterProps(e),O=Be.filterProps(e),H=Ae.filterProps(e),le=de(Ye.filterProps(e),["modelValue"]),G=de($e.filterProps(e),["modelValue"]),$={header:y.value,transition:T.value};return t(we,F(m,{class:["v-date-picker",`v-date-picker--${r.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var S;return((S=s.title)==null?void 0:S.call(s))??t("div",{class:"v-date-picker__title"},[c(e.title)])},header:()=>s.header?t(De,{defaults:{VDatePickerHeader:{...$}}},{default:()=>{var S;return[(S=s.header)==null?void 0:S.call(s,$)]}}):t(Be,F({key:"header"},O,$,{onClick:r.value!=="month"?A:void 0}),{...s,default:void 0}),default:()=>t(ae,null,[t(Te,F(h,{disabled:p.value,text:_.value,"onClick:next":d,"onClick:prev":B,"onClick:month":Y,"onClick:year":U}),null),t(fa,{hideOnLeave:!0},{default:()=>[r.value==="months"?t(Ye,F({key:"date-picker-months"},le,{modelValue:l.value,"onUpdate:modelValue":[S=>l.value=S,j],min:C.value,max:I.value,year:i.value}),null):r.value==="year"?t($e,F({key:"date-picker-years"},G,{modelValue:i.value,"onUpdate:modelValue":[S=>i.value=S,z],min:C.value,max:I.value}),null):t(Ae,F({key:"date-picker-month"},H,{modelValue:u.value,"onUpdate:modelValue":S=>u.value=S,month:l.value,"onUpdate:month":[S=>l.value=S,j],year:i.value,"onUpdate:year":[S=>i.value=S,z],min:C.value,max:I.value}),null)]})]),actions:s.actions})}),{}}});function Ea(e){let{swiper:n,extendParams:b,emit:s,on:a}=e,c=!1;const u=ha(),r=ga();b({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(y,_){if(n.virtual&&n.params.virtual.enabled){const T=n.slides.filter(I=>I.getAttribute("data-hash")===_)[0];return T?parseInt(T.getAttribute("data-swiper-slide-index"),10):0}return n.getSlideIndex(ka(n.slidesEl,`.${n.params.slideClass}[data-hash="${_}"], swiper-slide[data-hash="${_}"]`)[0])}}});const o=()=>{s("hashChange");const y=u.location.hash.replace("#",""),_=n.virtual&&n.params.virtual.enabled?n.slidesEl.querySelector(`[data-swiper-slide-index="${n.activeIndex}"]`):n.slides[n.activeIndex],T=_?_.getAttribute("data-hash"):"";if(y!==T){const C=n.params.hashNavigation.getSlideIndex(n,y);if(typeof C>"u"||Number.isNaN(C))return;n.slideTo(C)}},l=()=>{if(!c||!n.params.hashNavigation.enabled)return;const y=n.virtual&&n.params.virtual.enabled?n.slidesEl.querySelector(`[data-swiper-slide-index="${n.activeIndex}"]`):n.slides[n.activeIndex],_=y?y.getAttribute("data-hash")||y.getAttribute("data-history"):"";n.params.hashNavigation.replaceState&&r.history&&r.history.replaceState?(r.history.replaceState(null,null,`#${_}`||""),s("hashSet")):(u.location.hash=_||"",s("hashSet"))},i=()=>{if(!n.params.hashNavigation.enabled||n.params.history&&n.params.history.enabled)return;c=!0;const y=u.location.hash.replace("#","");if(y){const T=n.params.hashNavigation.getSlideIndex(n,y);n.slideTo(T||0,0,n.params.runCallbacksOnInit,!0)}n.params.hashNavigation.watchState&&r.addEventListener("hashchange",o)},k=()=>{n.params.hashNavigation.watchState&&r.removeEventListener("hashchange",o)};a("init",()=>{n.params.hashNavigation.enabled&&i()}),a("destroy",()=>{n.params.hashNavigation.enabled&&k()}),a("transitionEnd _freeModeNoMomentumRelease",()=>{c&&l()}),a("slideChange",()=>{c&&n.params.cssMode&&l()})}function qa(e,n){const b=V(()=>({times:e.value||e||[],price:n.value.price||0})),s=2,a=V(()=>b.value.times.length*s),c=V(()=>b.value.times.length*b.value.price);return{totalBTime:a,totalBPrice:c}}function ja(e,n,b){const{totalBTime:s,totalBPrice:a}=qa(n,b),c=V(()=>e.value===null||isNaN(e.value.getTime())?"":e.value.toLocaleDateString()),u=V(()=>n.value.sort((l,i)=>parseInt(l)-parseInt(i)).join(`
`)),r=V(()=>`預估 ${s.value} 小時`),o=V(()=>`預估 ${a.value} 元`);return{totalBTime:s,totalBPrice:a,chooseBDate:c,BTimeTxt:u,totalBTimeTxt:r,totalBPriceTxt:o}}const za={id:"booking",class:"booking"},Ga={class:"notice"},Ka=L("p",null,"當天日期無法預約，若有需求，請來電洽詢，謝謝！",-1),Xa={class:"box pb-6"},Za={class:"d-flex flex-row justify-center align-baseline"},Ja=L("p",null,"預約狗狗：",-1),Qa=["src"],et={class:"choose-time-dialog-txt"},at=L("h4",null,"可預約時段",-1),ft={__name:"booking",setup(e){const n=pa(),b=ba(),{mobile:s,sm:a}=ya(),{backApi:c,apiAuth:u}=wa(),r=Va();Ca();const o=xa(),l=[$a,Oa,Ea],i=V(()=>r.isLogin?r.account:"Guest"),k=N(null),y=N(new Date),_=N("預約日期"),T=N(window.innerWidth);function C(){if(k.value===null||isNaN(k.value.getTime()))return T.value>576?_.value="預約日期（請於左側日期表選擇）":_.value="選擇預約日期"}_e(k,(f,v)=>{(!(f instanceof Date)||!(v instanceof Date)||f.toLocaleDateString()!=v.toLocaleDateString())&&(K.value=!1)});const I=f=>f>y.value,p=N([]),d=N([]);(async()=>{var f,v;try{const{data:w}=await c.get("/dogs");d.value.splice(0,d.value.length,...w.result.data),j()}catch(w){console.log(w),o({text:((v=(f=w==null?void 0:w.response)==null?void 0:f.data)==null?void 0:v.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const A=N(null);function Y(f){A.value=f}const U=n.query.id;function j(){if(U){if(!U)return;const f=d.value.findIndex(v=>v._id===U);if(f===-1)return;A.value.slideTo(f,0,!1),H(U)}else z()}function z(){var v;const f=(v=d.value[0])==null?void 0:v._id;H(f)}const m=()=>{const f=window.location.hash.split("#")[2];H(f)},h=N({_id:"",image:"",dogName:"",age:0,price:0,booking:!0,bookingTime:[],feature:"",sell:!0,counter:0}),O=V(()=>h.value.image),H=async f=>{var v,w;Se();try{await xe();const{data:x}=await c.get("/dogs/"+f);h.value._id=x.result._id,h.value.image=x.result.image,h.value.dogName=x.result.dogName,h.value.age=x.result.age,h.value.price=x.result.price,h.value.booking=x.result.booking,h.value.bookingTime=x.result.bookingTime,h.value.feature=x.result.feature,h.value.sell=x.result.sell,h.value.counter=x.result.counter}catch(x){console.log(x),o({text:((w=(v=x==null?void 0:x.response)==null?void 0:v.data)==null?void 0:w.message)||"發生錯誤",snackbarProps:{color:"red"}})}},{totalBTime:le,totalBPrice:G,chooseBDate:$,BTimeTxt:S,totalBTimeTxt:Ge,totalBPriceTxt:Ke}=ja(k,p,h),ne=N(!1),K=N(!1),ve=(f,v)=>{var g;const w=Number($.value.split("/").pop()),x=Number((g=f.target.closest("[data-v-date]"))==null?void 0:g.dataset.vDate.split("-").pop());v=="預約日期"?K.value=!0:(v=="預約時段"||x===w)&&(ne.value=!0)},me=Da({}),oe=N(!1),Xe=()=>{oe.value=!0},fe=f=>{switch(f){case"dataDialog":K.value=!1;break;case"chooseTimeDialog":ne.value=!1;break;case"dialogOrderInfo":oe.value=!1;break;default:console.warn("不存在的 dialogName:",f)}};function Se(){k.value=null,p.value=[]}const Ze=Ia({name:ee().required("預約人名字必填"),phone:ee().required("預約人電話必填"),dogName:ee().required("狗狗名字必填"),bookingDate:ee().required("預約日期必填"),bookingTime:Ma().required("預約時段必填").min(1,"預約時段必填"),accountName:ee().required("帳戶名稱必填"),orderStatus:Ta().required("訂單狀態必填")}),{handleSubmit:Je,isSubmitting:Pe,resetForm:Qe}=Ba({validationSchema:Ze,initialValues:{name:i.value,phone:"",image:"",dogName:"",bookingDate:"",bookingTime:[],accountName:i.value,orderStatus:!0}}),he=q("name"),ge=q("phone"),ea=q("image"),aa=q("dogName"),ke=q("bookingDate"),pe=q("bookingTime");q("accountName"),q("orderStatus");function ta(){ea.value.value=h.value.image,aa.value.value=h.value.dogName,ke.value.value=$.value,pe.value.value=p.value}const la=Je(async f=>{var v,w,x,g;if(!r.isLogin){console.log("User.isLogin",r.isLogin),o({text:"請先登入會員",snackbarProps:{color:"red"}}),b.push("/login");return}try{const P=new FormData;P.append("name",f.name),P.append("phone",f.phone),P.append("image",f.image),P.append("dogName",f.dogName),P.append("bookingDate",f.bookingDate),P.append("bookingTime",f.bookingTime),P.append("accountName",f.accountName),P.append("orderStatus",f.orderStatus);const na=`${y.value.getFullYear()}/${String(y.value.getMonth()+1).padStart(2,"0")}/${String(y.value.getDate()).padStart(2,"0")}`,{data:W}=await u.post("/order",P,{params:{orderDate:na,dogId:h.value._id}}),oa={infor:[{title:"訂單編號",value:W.result.bookingOrderNumber},{title:"預約人",value:W.result.name},{title:"電話",value:W.result.phone},{title:"預約狗狗",value:W.result.dogName},{title:"預約日期",value:W.result.bookingDate},{title:"預約時段",value:W.result.bookingTime[0].replace(/,/g,`
`)},{title:"預約總金額",value:W.result.totalPrice+" 元"}],img:W.result.image};Object.assign(me,oa),Xe(),o({text:W.message,snackbarProps:{color:"green"}}),Qe(),Se()}catch(P){console.log("error",P),console.log("error?.response?.data?.message",(w=(v=P==null?void 0:P.response)==null?void 0:v.data)==null?void 0:w.message),o({text:((g=(x=P==null?void 0:P.response)==null?void 0:x.data)==null?void 0:g.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return Le(async()=>{await xe(),requestAnimationFrame(()=>{C()})}),(f,v)=>{const w=Ne("swiper-slide"),x=Ne("swiper");return R(),Q("section",za,[t(Ra,null,{default:M(()=>[t(x,{class:"dogSwiper",centeredSlides:!0,spaceBetween:30,pagination:{clickable:!0},navigation:!0,hashNavigation:{replaceState:!0,watchState:!0},breakpoints:{0:{slidesPerView:1},576:{slidesPerView:"auto"}},modules:l,onSwiper:Y,onSlideChangeTransitionEnd:m},{default:M(()=>[(R(!0),Q(ae,null,Ce(d.value,g=>(R(),ie(w,{"data-hash":`/booking#${g._id}`},{default:M(()=>[t(Na,F({ref_for:!0},g),null,16)]),_:2},1032,["data-hash"]))),256))]),_:1}),t(Ua,{class:"booking-area"},{default:M(()=>[t(se,{md:"6"},{default:M(()=>[D(s)?(R(),ie(Ve,{key:0,class:"data-dialog",modelValue:K.value,"onUpdate:modelValue":v[1]||(v[1]=g=>K.value=g)},{default:M(()=>[t(Oe,{modelValue:k.value,"onUpdate:modelValue":v[0]||(v[0]=g=>k.value=g),"allowed-dates":I},null,8,["modelValue"]),t(Ie,{dialogName:"dataDialog",onClose:fe})]),_:1},8,["modelValue"])):(R(),ie(Oe,{key:1,modelValue:k.value,"onUpdate:modelValue":v[2]||(v[2]=g=>k.value=g),onClick:ve,"allowed-dates":I},null,8,["modelValue"])),L("div",Ga,[t(_a,{icon:"mdi-message-alert"}),Ka])]),_:1}),t(se,{md:"6"},{default:M(()=>[t(Aa,{class:"booking-form",onSubmit:Sa(D(la),["prevent"]),disabled:D(Pe)},{default:M(()=>[t(X,{label:"預約人姓名",variant:"underlined",modelValue:D(he).value.value,"onUpdate:modelValue":v[3]||(v[3]=g=>D(he).value.value=g),"error-messages":D(he).errorMessage.value},null,8,["modelValue","error-messages"]),t(X,{label:"預約人電話",variant:"underlined",modelValue:D(ge).value.value,"onUpdate:modelValue":v[4]||(v[4]=g=>D(ge).value.value=g),"error-messages":D(ge).errorMessage.value},null,8,["modelValue","error-messages"]),L("div",Xa,[t(se,null,{default:M(()=>[L("div",Za,[Ja,L("h6",null,Pa(h.value.dogName),1)])]),_:1}),t(se,null,{default:M(()=>[L("img",{src:O.value},null,8,Qa)]),_:1})]),D(s)?(R(),Q(ae,{key:0},[t(X,{label:_.value,readonly:"",variant:"underlined",onClick:v[5]||(v[5]=g=>ve(g,"預約日期")),"model-value":D($),"error-messages":D(ke).errorMessage.value},null,8,["label","model-value","error-messages"]),t(Me,{label:"預約時段",readonly:"",textarea:"","auto-grow":"",rows:"1",variant:"underlined","model-value":D(S),"error-messages":D(pe).errorMessage.value,onClick:v[6]||(v[6]=g=>ve(g,"預約時段"))},null,8,["model-value","error-messages"])],64)):(R(),Q(ae,{key:1},[t(X,{label:_.value,disabled:"",variant:"underlined","model-value":D($),"error-messages":D(ke).errorMessage.value},null,8,["label","model-value","error-messages"]),t(Me,{label:"預約時段",disabled:"",textarea:"","auto-grow":"",rows:"1",variant:"underlined","model-value":D(S),"error-messages":D(pe).errorMessage.value},null,8,["model-value","error-messages"])],64)),t(X,{label:" 預約總時數",disabled:"",variant:"underlined","model-value":D(Ge)},null,8,["model-value"]),t(X,{label:"總計金額",disabled:"",variant:"underlined","model-value":D(Ke)},null,8,["model-value"]),t(E,{class:"submit-btn",type:"submit",onClick:ta,loading:D(Pe)},{default:M(()=>[He("送出預約")]),_:1},8,["loading"])]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1}),t(Ve,{class:"choose-time-dialog",modelValue:ne.value,"onUpdate:modelValue":v[8]||(v[8]=g=>ne.value=g)},{default:M(()=>[L("div",et,[at,t(Wa),(R(!0),Q(ae,null,Ce(h.value.bookingTime.join(" ").split(",").sort((g,P)=>parseInt(g)-parseInt(P)),g=>(R(),ie(Ha,{"hide-details":"",modelValue:p.value,"onUpdate:modelValue":v[7]||(v[7]=P=>p.value=P),label:g,value:g,"false-icon":"mdi-paw-outline","true-icon":"mdi-paw"},null,8,["modelValue","label","value"]))),256)),t(Ie,{dialogName:"chooseTimeDialog",onClose:fe})])]),_:1},8,["modelValue"]),t(Ve,{modelValue:oe.value,"onUpdate:modelValue":v[9]||(v[9]=g=>oe.value=g)},{default:M(()=>[t(D(Ya),{class:"order-info",bigTitle:"已成功預約",orderInfoData:me.infor,orderInfoDataImg:me.img,dialogClose:fe},null,8,["orderInfoData","orderInfoDataImg"])]),_:1},8,["modelValue"])]),_:1})])}}};export{ft as default};
